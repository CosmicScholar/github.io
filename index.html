<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Helvetica:300,300italic,400,400italic,700,700italic|Bold:300,300italic,400,400italic,700,700italic|Condiment:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="九天学者，地球物理，cosscholar，python，fortran，编程" />





  <link rel="alternate" href="/atom.xml" title="九天学者" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/uploads/logo.ico?v=5.0.1" />






<meta name="description" content="地球物理学在读博士">
<meta property="og:type" content="website">
<meta property="og:title" content="九天学者">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="九天学者">
<meta property="og:description" content="地球物理学在读博士">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="九天学者">
<meta name="twitter:description" content="地球物理学在读博士">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> 九天学者 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?3b31f2ef78bb9793beef5d8fbca4f7c8";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">九天学者</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Knowledge is Power</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-search">
          <a href="/search" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-search"></i> <br />
            
            搜索
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/09/07/post_17/" itemprop="url">
                  Modern GMT Series：Slice in 3D View (三维切片图)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-09-07T19:05:00+02:00" content="2018-09-07">
              2018-09-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/三维切片图/" itemprop="url" rel="index">
                    <span itemprop="name">三维切片图</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>相信理工科方面的科研人员经常会遇到做三维切片图的时候，以地球物理为例，比如重力、磁异常三维反演，地震速度剖面+地形图，热液循环三维数值模拟（CFD范畴），地球动力学三维模拟等。当然了做三维切片图也有<strong>商业软件</strong>(比如<a href="https://www.tecplot.com/products/tecplot-360/" target="_blank" rel="external">Tecplot 360</a>)和<strong>开源软件</strong>（比如<a href="https://www.paraview.org" target="_blank" rel="external">Paraview</a>），前者缺点是收费收费收费，后者导出的三维场景图效果很差（不是矢量图，colorbar位置错乱等问题），其优点是做现场演示。还有我最喜欢的编程语言<a href="https://matplotlib.org" target="_blank" rel="external">python</a>也可以做这个工作，但是我觉得它对坐标轴的label处理的不是那么完美，但也是个不错的选择。<strong>我的原则</strong>就是用<strong>开源的程序或者软件做出最漂亮最简洁并且高质量</strong>(本人追求矢量的eps、pdf、ps格式)<strong>的学术论文图</strong>。经过我四年的不断折腾和筛选，发现到目前为止，<a href="http://gmt.soest.hawaii.edu/doc/5.4.4/index.html" target="_blank" rel="external">GMT 6.0</a>最新版（我是直接从<a href="https://github.com/GenericMappingTools/gmt" target="_blank" rel="external">github</a>克隆下来的开发版）对三维图支持已经非常棒了。不仅可以做<a href="待添加">三维地形图</a>（上面标注文字，数据点，线，legend等），还可以做切片的等值线图或者image。</p>
</blockquote>
<p><strong>一贯的风格：先来一段回顾和概述，然后提出问题，再解决问题，最后点评一下存在的问题或可选方案</strong></p>
<h1 id="提出问题"><a href="#提出问题" class="headerlink" title="提出问题"></a>提出问题</h1><p>这种图在什么情况下使用？直接上图感受一下</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-3dcdd93c05410360.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Olive, et al., 2015, Science"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-3bb3e2dfd322f0da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Schmid F. and Schlindwein V., 2016, G3"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-b6fed46781638260.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Zhao, et al., 2013, G3"></p>
<h1 id="GMT如何实现三维切片图"><a href="#GMT如何实现三维切片图" class="headerlink" title="GMT如何实现三维切片图"></a>GMT如何实现三维切片图</h1><p>gmt新版推出的三维成图主要通过<strong>-p</strong>和<strong>-JZ</strong>实现的。前者进行旋转，后者给定垂向轴相关信息。gmt官网上有个<a href="http://gmt.soest.hawaii.edu/doc/latest/gallery/users_contrib_script/vertical_slice.html#vertical-slice" target="_blank" rel="external">用户给出的例子</a>，但是没有讲清楚这个切片图到底如何准确实现，但是还是有借鉴意义的。因为本人的博士课题有部分数据涉密，不方面放上来，就以上面提到的这个例子里面的函数造一个数据进行成图。</p>
<h2 id="p参数"><a href="#p参数" class="headerlink" title="-p参数"></a>-p参数</h2><p>这个参数是新版gmt里面一个很通用的参数，在<a href="http://gmt.soest.hawaii.edu/doc/latest/basemap.html" target="_blank" rel="external">basemap</a>, <a href="http://gmt.soest.hawaii.edu/doc/latest/grdimage.html" target="_blank" rel="external">grdimage</a>, <a href="http://gmt.soest.hawaii.edu/doc/latest/grdcontour.html" target="_blank" rel="external">grdcontour</a>, <a href="http://gmt.soest.hawaii.edu/doc/latest/grdview.html" target="_blank" rel="external">grdview</a>等都有这个参数，下面以<strong>basemap</strong>为例介绍<code>-p</code>参数的用法。具体请参见<a href="http://gmt.soest.hawaii.edu/doc/latest/gmt.html#perspective-full" target="_blank" rel="external">官网英文解释</a></p>
<ul>
<li><strong>参数解释</strong><br>-p后面可以跟<code>x</code>,<code>y</code>,<code>z</code>（这三个字母表示你的此图的<code>纵轴</code>是哪个），然后再跟<a href="https://ww2.mathworks.cn/help/matlab/visualize/setting-the-viewpoint-with-azimuth-and-elevation.html" target="_blank" rel="external"><code>方位角(azimuth)/仰角(elevation)</code></a>，或者直接跟<code>方位角/仰角</code>。方位角的范围是$(0,360]$，仰角范围是$(0,90]$，这个很重要，比如方位角或者仰角为0，则gmt会报错。</li>
</ul>
<ol>
<li><strong>方位角</strong> 表示的是绕<code>纵轴</code>(由-p后面跟的字母决定，可以是<code>x</code>,<code>y</code>,<code>z</code>如果没给出则默认为<code>z</code>)旋转多少度，<code>方位角=180</code>的情况相当于没有旋转，小于180°表示顺时针旋转；大于180°表示顺时针旋转。</li>
<li><strong>仰角</strong> 过视角点做一个与此图平面$P_1$垂直的面$P_2$。在$P_2$面内，视角点与参考点的直线假设为$L_0$，那么$L_0$与$P_1$面之间的夹角就是<strong>仰角</strong> （<em>挺复杂，姑且这么理解，慢慢体会</em>）。所以，如果<code>仰角=90</code>表示俯视图，也就是下图(b)所示的只是在(a)图的基础上绕z轴顺时针旋转了$180^{\circ}-135^{\circ}=45^{\circ}$；(c)图在(b)图的基础上上仰了45°。</li>
<li><strong>切片位置</strong> -p后面除了方位角和仰角，还可以再跟第三个数字，类似这样的格式:<code>-p方位角/仰角/在纵轴的位置</code> 即<code>-pazimuth/elevation/pos</code>，这个<code>pos</code>设定了此图在纵轴的什么位置处。比如<code>-pz135/60/400</code>表示此图平面是x-y平面（与纸张面平行），位于纵轴(也就是z轴）的$z=400$处；<code>-px135/60/-50</code>表示此图的平面与y-z平面平行，位于$x=-50$处，<strong>这是设置切片位置的关键</strong>。这个功能必须与<code>-JZ</code>参数配个才生效，同时要求<code>-R</code>后面必须跟六个参数表示坐标范围（见下面的-JZ解释）。</li>
</ol>
<blockquote>
<p>注意：下面的所有操作都是在Mac系统下进行的，而且用到了<code>awk</code>程序（配合gmt做一些文字处理和简单计算），如何安装和使用gmt开发版和如何配置gmt请阅读<a href="待添加">gmt第一课</a></p>
</blockquote>
<ul>
<li><strong>绘图实例</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-96ec3e190c912281.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="-p参数在底图中的使用。（a）没有使用-p参数；（b）方位角135°/仰角90°；（c）仰角45°"></p>
<ul>
<li><strong>代码</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">fig_name=<span class="built_in">test</span>_basemap_p</div><div class="line">fig_fmt=png</div><div class="line">gmt begin <span class="variable">$fig_name</span> <span class="variable">$fig_fmt</span></div><div class="line">    gmt gmtset MAP_FRAME_TYPE=fancy+</div><div class="line">    fig_width=14</div><div class="line">    lon_min=-75</div><div class="line">    lon_max=-60</div><div class="line">    lat_min=-50</div><div class="line">    lat_max=-40</div><div class="line">    <span class="comment"># 方位角</span></div><div class="line">    azimuth=135</div><div class="line">    <span class="comment"># 仰角</span></div><div class="line">    elevation=90</div><div class="line">    range_lon_lat=<span class="variable">$lon_min</span>/<span class="variable">$lon_max</span>/<span class="variable">$lat_min</span>/<span class="variable">$lat_max</span></div><div class="line">    gmt basemap -JM<span class="variable">$&#123;fig_width&#125;</span>c -R<span class="variable">$range_lon_lat</span> -Ba5f1 -BWSen+t<span class="string">"(a) without -p"</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N </div><div class="line">    gmt basemap -B -BWSen+t<span class="string">"(b) -p"</span><span class="variable">$azimuth</span><span class="string">"/"</span><span class="variable">$elevation</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N -X16c -p<span class="variable">$&#123;azimuth&#125;</span>/<span class="variable">$&#123;elevation&#125;</span></div><div class="line">    <span class="comment"># 更改仰角</span></div><div class="line">    elevation=45</div><div class="line">    gmt basemap -B -BWSen+t<span class="string">"(c) -p"</span><span class="variable">$azimuth</span><span class="string">"/"</span><span class="variable">$elevation</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N -X19c -p<span class="variable">$&#123;azimuth&#125;</span>/<span class="variable">$&#123;elevation&#125;</span></div><div class="line">gmt end</div><div class="line"><span class="comment"># 打开文件查看</span></div><div class="line">open <span class="variable">$&#123;fig_name&#125;</span>.<span class="variable">$&#123;fig_fmt&#125;</span></div></pre></td></tr></table></figure>
<ul>
<li><strong>关于代码</strong><br>这个代码风格是新版gmt推出的<strong>modern模式</strong>，带来了很大方便。<br>(1) 不用每个绘图命令后面都要跟一个<code>-O</code>,<code>-K</code>,<code>&gt;&gt;xxx.ps</code>等<br>(2) 不用再用<code>psconvert</code>将<code>ps</code>格式转换为<code>png</code>,<code>pdf</code>,<code>svg</code>了，直接在开头给出文件名和格式即可<br>(3) <strong>MAP_FRAME_TYPE=fancy+</strong> <code>fancy</code>表示坐标轴显示为火车道样式；<code>+</code>表示拐角显示为圆角(不信你就上翻在看一眼图哟)<br>(4) 如果投影参数<code>-J</code>, 范围参数<code>-R</code>与前一个绘图完全一致，则可以省略这两个参数。但是<code>-B</code>不能省略，不然将不显示坐标轴，虽然坐标轴设置参数也完全一致</li>
</ul>
<h2 id="JZ参数"><a href="#JZ参数" class="headerlink" title="-JZ参数"></a>-JZ参数</h2><p>上面讲的<code>-p</code>参数只是对图做了方位旋转，还不是真正的三维作图，因为所有的绘图元素都在一个平面内。要实现三维成图，需要附加<code>-JZ</code>参数，一看-J就知道肯定是与投影有关了，此参数设定了<code>纵轴</code>方向的长度。更多-J参数参见<a href="http://gmt.soest.hawaii.edu/doc/latest/gmt.html#j-full" target="_blank" rel="external">官网说明</a></p>
<ul>
<li><strong>参数解释</strong></li>
</ul>
<ol>
<li><strong>图像纵轴高度</strong> 与<code>-JX</code>参数类似，后面直接跟此轴方向的图像大小，单位可以是<code>c</code>厘米或者<code>i</code>英尺。</li>
<li><strong>坐标范围</strong> gmt绘图必须给定坐标范围即<code>-R</code>参数（当然了这是针对第一个绘图命令而言的），除了新版(6.0版)的<code>-Re</code>和<code>-Ra</code>之外，对于二维绘图必须给出四个数字(<code>-Rxmin/xmax/ymin/ymax</code>)，而对于三维绘图（也就是有<code>-JZ</code>参数出现的时候）必须给出六个数字(<code>-Rxmin/xmax/ymin/ymax/zmin/zmax</code>)</li>
<li><strong>坐标轴</strong> 坐标轴的label格式用类似命令<code>-Bza250f50g250</code>(主刻度间隔250，副刻度间隔50，显示网格间隔250)设置；如果想显示纵轴，则用<code>-BWseNZ</code>类似的命令设置，大写字母表示要显示哪个轴，如果要显示立方体框(cubic outline)，只要在后面跟一个<code>+b</code>即可(<code>-BWseNZ+b</code>)。</li>
</ol>
<ul>
<li><strong>绘图实例</strong><br>体会不同旋转角度的视角差异，注意（a）和（b）中的玫瑰方向标的变化。<br><img src="https://upload-images.jianshu.io/upload_images/7316098-c3da0e2e265c7bb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="不同视角下的-JZ参数绘图实例"></li>
</ul>
<ul>
<li><p><strong>代码</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">fig_name=<span class="built_in">test</span>_basemap_JZ</div><div class="line">fig_fmt=png</div><div class="line">gmt begin <span class="variable">$fig_name</span> <span class="variable">$fig_fmt</span></div><div class="line">    gmt gmtset MAP_FRAME_TYPE=fancy+</div><div class="line">    fig_width=14</div><div class="line">    <span class="comment"># 增加图像高度：及纵轴方向的长度</span></div><div class="line">    fig_height=8</div><div class="line">    lon_min=-75</div><div class="line">    lon_max=-60</div><div class="line">    lat_min=-50</div><div class="line">    lat_max=-40</div><div class="line">    <span class="comment"># 增加纵轴方向的范围</span></div><div class="line">    z_min=0</div><div class="line">    z_max=999</div><div class="line">    <span class="comment"># 方位角</span></div><div class="line">    azimuth=135</div><div class="line">    <span class="comment"># 仰角</span></div><div class="line">    elevation=45</div><div class="line">    range_lon_lat=<span class="variable">$lon_min</span>/<span class="variable">$lon_max</span>/<span class="variable">$lat_min</span>/<span class="variable">$lat_max</span></div><div class="line">    range_z=<span class="variable">$z_min</span>/<span class="variable">$z_max</span></div><div class="line">    range=<span class="variable">$range_lon_lat</span>/<span class="variable">$range_z</span></div><div class="line">    gmt basemap -R<span class="variable">$range</span> -JM<span class="variable">$fig_width</span> -JZ<span class="variable">$fig_height</span> -Ba5f1 -Bza250f50g250+l<span class="string">"km"</span> -BWSenZ+b+t<span class="string">"3D basemap: "</span><span class="variable">$azimuth</span><span class="string">"/"</span><span class="variable">$elevation</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N -pz<span class="variable">$&#123;azimuth&#125;</span>/<span class="variable">$&#123;elevation&#125;</span> </div><div class="line">    azimuth=45</div><div class="line">    gmt basemap -JZ -B -Bza250f50g250+l<span class="string">"km"</span> -BWSenZ+b+t<span class="string">"3D basemap: "</span><span class="variable">$azimuth</span><span class="string">"/"</span><span class="variable">$elevation</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N -pz<span class="variable">$&#123;azimuth&#125;</span>/<span class="variable">$&#123;elevation&#125;</span> -X19c</div><div class="line">    elevation=30</div><div class="line">    gmt basemap -JZ -B -Bza250f50g250+l<span class="string">"km"</span> -BWSenZ+b+t<span class="string">"3D basemap: "</span><span class="variable">$azimuth</span><span class="string">"/"</span><span class="variable">$elevation</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N -pz<span class="variable">$&#123;azimuth&#125;</span>/<span class="variable">$&#123;elevation&#125;</span> -X19c</div><div class="line">gmt end</div><div class="line"></div><div class="line">open <span class="variable">$&#123;fig_name&#125;</span>.<span class="variable">$&#123;fig_fmt&#125;</span></div></pre></td></tr></table></figure>
</li>
<li><p><strong>关于代码</strong><br>（1）如果使用了<code>-JZ</code>参数，必须设定六位数的<code>-R</code>参数<br>（2）<code>-J</code>参数可以省略（继承上一个绘图命令的-J参数），但是<code>-JZ</code>不能省略<br>（3）<code>-Bz</code>也不能省略</p>
</li>
</ul>
<h1 id="三维切片绘图实例"><a href="#三维切片绘图实例" class="headerlink" title="三维切片绘图实例"></a>三维切片绘图实例</h1><p><img src="https://upload-images.jianshu.io/upload_images/7316098-0f34ccfbe3b97035.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="利用GMT绘制的两个切片:平面模式"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-83436c27502820b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="利用GMT绘制的两个切片：三维立体模式"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">gmt <span class="built_in">set</span> GMT_COMPATIBILITY=5 MAP_FRAME_TYPE=plain</div><div class="line"><span class="comment"># 1. 数据和绘图坐标参数设置</span></div><div class="line">fig_width_x=14</div><div class="line">fig_width_z=8</div><div class="line"><span class="comment"># 数据范围</span></div><div class="line">lon_min=-75</div><div class="line">lon_max=-60</div><div class="line">lat_min=-50</div><div class="line">lat_max=-40</div><div class="line">zmin=0</div><div class="line">zmax=999</div><div class="line"><span class="comment"># 数据中心点坐标</span></div><div class="line">lon0=`<span class="built_in">echo</span> <span class="variable">$lon_min</span> <span class="variable">$lon_max</span> | awk <span class="string">'&#123;print $1+($2-$1)/2.0&#125;'</span>`</div><div class="line">lat0=`<span class="built_in">echo</span> <span class="variable">$lat_min</span> <span class="variable">$lat_max</span> | awk <span class="string">'&#123;print $1+($2-$1)/2.0&#125;'</span>`</div><div class="line"><span class="built_in">echo</span> <span class="variable">$lon0</span> <span class="variable">$lat0</span></div><div class="line">range_lon_lat=<span class="variable">$lon_min</span>/<span class="variable">$lon_max</span>/<span class="variable">$lat_min</span>/<span class="variable">$lat_max</span></div><div class="line">range_z=<span class="variable">$zmin</span>/<span class="variable">$zmax</span></div><div class="line">range=<span class="variable">$range_lon_lat</span>/<span class="variable">$range_z</span></div><div class="line"><span class="comment"># 投影参数</span></div><div class="line">proj_xy=M<span class="variable">$lon0</span>/<span class="variable">$lat0</span>/<span class="variable">$fig_width_x</span>  <span class="comment">#x-y平面的投影参数</span></div><div class="line"><span class="comment"># 数据文件名</span></div><div class="line">data_xy=base.nc</div><div class="line">data_xy_cart=base_cart.nc</div><div class="line">data_yz=slice_cut.nc</div><div class="line"></div><div class="line"><span class="comment"># 2. x-y平面内的网格数据</span></div><div class="line"><span class="comment"># gmt grdmath -R$range_lon_lat -I0.005 X D2R Y D2R ADD STO@xySum SIN @xySum 3 MUL NEG EXP MUL = $data_xy</span></div><div class="line"></div><div class="line"><span class="comment"># 3. 沿纬度方向的垂直切片</span></div><div class="line">lat_min_slice=-47.5</div><div class="line">lat_max_slice=-42.5</div><div class="line"><span class="comment"># gmt grdmath -R$&#123;lat_min_slice&#125;/$&#123;lat_max_slice&#125;/$&#123;zmin&#125;/$&#123;zmax&#125; -I0.005/0.5 X D2R -67.5 D2R ADD STO@xySum SIN @xySum 3 Y 1E4 DIV SUB MUL NEG EXP MUL = slice.nc</span></div><div class="line"></div><div class="line"><span class="comment"># 4. 将数据范围投影到图像空间的大小:x对应经度方向；y对应纬度方向</span></div><div class="line">xmin=`<span class="built_in">echo</span> <span class="variable">$lon_min</span> <span class="variable">$lat_min</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $1&#125;'</span>`</div><div class="line">ymin=`<span class="built_in">echo</span> <span class="variable">$lon_min</span> <span class="variable">$lat_min</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $2&#125;'</span>`</div><div class="line">xmax=`<span class="built_in">echo</span> <span class="variable">$lon_max</span> <span class="variable">$lat_max</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $1&#125;'</span>`</div><div class="line">ymax=`<span class="built_in">echo</span> <span class="variable">$lon_max</span> <span class="variable">$lat_max</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $2&#125;'</span>`</div><div class="line">ymin_slice=`<span class="built_in">echo</span> <span class="variable">$lon0</span> <span class="variable">$lat_min_slice</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $2&#125;'</span>`</div><div class="line">ymax_slice=`<span class="built_in">echo</span> <span class="variable">$lon0</span> <span class="variable">$lat_max_slice</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $2&#125;'</span>`</div><div class="line"><span class="built_in">echo</span> <span class="variable">$xmin</span> <span class="variable">$xmax</span> <span class="variable">$ymin</span> <span class="variable">$ymax</span> <span class="variable">$ymin_slice</span> <span class="variable">$ymax_slice</span></div><div class="line">fig_width_y=<span class="variable">$ymax</span></div><div class="line"></div><div class="line"><span class="comment"># 5. 将切片数据投影到图像大小的空间：最好利用中心经度，也就是后面的-JM参数中的中心经度值</span></div><div class="line"><span class="comment"># mapproject输入经纬度值（读取前两列），投影参数与后面作图的时候一致，输出的前两列是x,y值，位于[0,fig_width_x]和[0,fig_width_y]范围内,fig_width_y目前还不知道，需要计算</span></div><div class="line"><span class="comment"># gmt grd2xyz slice.nc | awk '&#123;print "'$lon0'",$0&#125;' | gmt mapproject -R$range_lon_lat -J$proj_xy |awk '&#123;print $2,$3,$4&#125;'&gt; points.txt</span></div><div class="line"><span class="comment"># gmt grdproject $data_xy -R$range_lon_lat -J$proj_xy -r -E300 -G$data_xy_cart</span></div><div class="line"></div><div class="line"><span class="comment"># 6. 重新网格化切片</span></div><div class="line"><span class="comment"># gmt surface points.txt -G$data_yz -R$ymin_slice/$ymax_slice/$zmin/$zmax -I1500+/2000+ -C0.1 -T0.25</span></div><div class="line"></div><div class="line"><span class="comment"># # 开始绘图</span></div><div class="line">proj_yz=X<span class="variable">$fig_width_y</span>/<span class="variable">$fig_width_z</span></div><div class="line">proj_xz=X<span class="variable">$fig_width_x</span>/<span class="variable">$fig_width_z</span></div><div class="line">rm gmt.history gmt.conf</div><div class="line"><span class="comment"># 8.1 将数据显示在平面内</span></div><div class="line">fig_name=vslice_gmt</div><div class="line">fig_fmt=png</div><div class="line">gmt begin <span class="variable">$fig_name</span> <span class="variable">$fig_fmt</span></div><div class="line">    <span class="comment"># x-y平面的数据显示</span></div><div class="line">    gmt basemap -J<span class="variable">$proj_xy</span> -R<span class="variable">$range_lon_lat</span> -Ba5f1 -BWSen+t<span class="string">"Data on x-y plane"</span> </div><div class="line">    gmt grdimage <span class="variable">$data_xy</span> -Ccpt-city/oc/sst</div><div class="line">    gmt coast -Df -A0/0/1 -N1/0.5p,black,-..- -W0.5p,black</div><div class="line">    <span class="comment"># y-z切片数据显示</span></div><div class="line">    move_x=16</div><div class="line">    gmt basemap -J<span class="variable">$proj_yz</span> -R<span class="variable">$ymin</span>/<span class="variable">$ymax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span> -Bxa5f1+l<span class="string">"y (latitude)"</span> -Bya200f40+l<span class="string">"z (km)"</span> -BWSen+t<span class="string">"Slice data on y-z plane"</span> -X<span class="variable">$move_x</span> -p90/90</div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -Crainbow -p</div><div class="line">    <span class="comment"># x-z切片数据显示</span></div><div class="line">    gmt basemap -J<span class="variable">$proj_yz</span> -R<span class="variable">$xmin</span>/<span class="variable">$xmax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span> -Bxa5f1+l<span class="string">"x (longitude)"</span> -Bya200f40+l<span class="string">"z (km)"</span> -BWSen+t<span class="string">"Slice data on x-z plane"</span> -X-<span class="variable">$move_x</span> -Y-10 </div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -Chot </div><div class="line">gmt end</div><div class="line"></div><div class="line">open <span class="variable">$&#123;fig_name&#125;</span>.<span class="variable">$&#123;fig_fmt&#125;</span></div><div class="line"></div><div class="line"><span class="comment"># 8.2 显示为3维切片形式</span></div><div class="line"><span class="comment"># 方位角设置</span></div><div class="line">azimuth=135</div><div class="line">elevation=45</div><div class="line">angle_view=<span class="variable">$azimuth</span>/<span class="variable">$elevation</span></div><div class="line">fig_name=vslice_gmt_3D</div><div class="line">fig_fmt=png</div><div class="line">gmt begin <span class="variable">$fig_name</span> <span class="variable">$fig_fmt</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"figwidth "</span><span class="variable">$fig_width_x</span> <span class="variable">$fig_width_y</span> <span class="variable">$fig_width_z</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"range "</span> <span class="variable">$xmin</span> <span class="variable">$xmax</span> <span class="variable">$ymin</span> <span class="variable">$ymax</span> <span class="variable">$zmin</span> <span class="variable">$zmax</span></div><div class="line">    <span class="comment"># 三维框架</span></div><div class="line">    gmt basemap -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span> -Ba5f1 -Bza200f40g200+l<span class="string">"Z (km)"</span> -BwSEnZ+b </div><div class="line">    <span class="comment"># 贴x-y平面数据图</span></div><div class="line">    gmt grdimage <span class="variable">$data_xy</span> -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span>/0 -Ccpt-city/oc/sst --MAP_FRAME_AXES=<span class="string">''</span></div><div class="line">    gmt coast -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span>/0 -Df -A0/0/1 -N1/0.5p,black,-..- -W0.5p,black </div><div class="line">    <span class="comment"># # 贴y-z平面的切片数据</span></div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -JX<span class="variable">$fig_width_y</span>/<span class="variable">$fig_width_z</span> -JZ<span class="variable">$fig_width_x</span> -R<span class="variable">$ymin</span>/<span class="variable">$ymax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span>/<span class="variable">$xmin</span>/<span class="variable">$xmax</span>  -px<span class="variable">$angle_view</span>/7 -Crainbow </div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -JX<span class="variable">$fig_width_x</span>/<span class="variable">$fig_width_z</span> -JZ<span class="variable">$fig_width_y</span> -R<span class="variable">$xmin</span>/<span class="variable">$xmax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span>/<span class="variable">$ymin</span>/<span class="variable">$ymax</span> -py<span class="variable">$angle_view</span>/0 -Chot </div><div class="line">gmt end</div><div class="line"></div><div class="line">open <span class="variable">$&#123;fig_name&#125;</span>.<span class="variable">$&#123;fig_fmt&#125;</span></div></pre></td></tr></table></figure>
<h1 id="存在BUG"><a href="#存在BUG" class="headerlink" title="存在BUG"></a>存在BUG</h1><h2 id="错误展示"><a href="#错误展示" class="headerlink" title="错误展示"></a>错误展示</h2><p>旋转之后切片位置不能很好的归位，因为源代码里面有问题，比如下图</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-1f500f271b6b1638.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="两个切片分别位于xmin和ymin位置：显示位置错乱"></p>
<h2 id="查找问题"><a href="#查找问题" class="headerlink" title="查找问题"></a>查找问题</h2><p>找到三维透视图绘图的源代码<code>gmt_plot.c</code>-&gt;<code>gmt_plane_perspective</code>函数（位于7429行）<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">double</span> a, b, c, d, e, f;</div><div class="line"><span class="keyword">struct</span> PSL_CTRL *PSL= GMT-&gt;PSL;</div><div class="line">....</div><div class="line"><span class="comment">//省略一些代码</span></div><div class="line">....</div><div class="line"><span class="keyword">switch</span> (plane % <span class="number">3</span>) &#123;</div><div class="line">			<span class="keyword">case</span> GMT_X:	<span class="comment">/* Constant x, Convert y,z to x',y' */</span></div><div class="line">				a = GMT-&gt;current.proj.z_project.sin_az;</div><div class="line">				b = -GMT-&gt;current.proj.z_project.cos_az * GMT-&gt;current.proj.z_project.sin_el;</div><div class="line">				c = <span class="number">0.0</span>;</div><div class="line">				d = GMT-&gt;current.proj.z_project.cos_el;</div><div class="line">				e = GMT-&gt;current.proj.z_project.x_off - level * GMT-&gt;current.proj.z_project.cos_az;</div><div class="line">				f = GMT-&gt;current.proj.z_project.y_off - level * GMT-&gt;current.proj.z_project.sin_az * GMT-&gt;current.proj.z_project.sin_el;</div><div class="line">。。。</div><div class="line"><span class="comment">//省略</span></div><div class="line">PSL_command (PSL, <span class="string">"%s [%g %g %g %g %g %g] concat\n"</span>,</div><div class="line">			(GMT-&gt;current.proj.z_project.plane &gt;= <span class="number">0</span>) ? <span class="string">"PSL_GPP setmatrix"</span> : <span class="string">"/PSL_GPP matrix currentmatrix def"</span>,</div><div class="line">			a, b, c, d, e * PSL-&gt;internal.x2ix, f * PSL-&gt;internal.y2iy);</div></pre></td></tr></table></figure></p>
<p>根据坐标轴范围(<code>-R</code>参数)和<code>方位角</code>,<code>仰角</code>,<code>level</code>值（也即是<code>-p</code>后面的第三个参数）计算<code>a</code>,<code>b</code>,<code>c</code>,<code>d</code>,<code>e</code>,<code>f</code>，然后将这六个数字写入ps文件里面。这里面的计算公式是有问题的，我已将其修改，具体修改方法见<a href="待添加">下回分解</a>.</p>
<h2 id="修正后"><a href="#修正后" class="headerlink" title="修正后"></a>修正后</h2><p>将<code>e</code>和<code>f</code>重新计算后，得到了正确的结果，如下图<br><img src="https://upload-images.jianshu.io/upload_images/7316098-ed663c296e49a9cd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Debug之后的结果，位置正确"></p>
<p>上面两个图的绘图代码均为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">gmt begin <span class="variable">$fig_name</span> <span class="variable">$fig_fmt</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"figwidth "</span><span class="variable">$fig_width_x</span> <span class="variable">$fig_width_y</span> <span class="variable">$fig_width_z</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"range "</span> <span class="variable">$xmin</span> <span class="variable">$xmax</span> <span class="variable">$ymin</span> <span class="variable">$ymax</span> <span class="variable">$zmin</span> <span class="variable">$zmax</span></div><div class="line">    <span class="comment"># 三维框架</span></div><div class="line">    gmt basemap -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span> -Ba5f1 -Bza200f40+l<span class="string">"Z (km)"</span> -BwSEnZ+b+t<span class="string">"After debug"</span> </div><div class="line">    <span class="comment"># 贴x-y平面数据图</span></div><div class="line">    gmt grdimage <span class="variable">$data_xy</span> -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span>/0 -Ccpt-city/oc/sst --MAP_FRAME_AXES=<span class="string">''</span></div><div class="line">    gmt coast -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span>/0 -Df -A0/0/1 -N1/0.5p,black,-..- -W0.5p,black </div><div class="line">    <span class="comment"># 贴y-z平面的切片数据</span></div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -JX<span class="variable">$fig_width_y</span>/<span class="variable">$fig_width_z</span> -JZ<span class="variable">$fig_width_x</span> -R<span class="variable">$ymin</span>/<span class="variable">$ymax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span>/<span class="variable">$xmin</span>/<span class="variable">$xmax</span>  -px<span class="variable">$angle_view</span>/0 -Crainbow </div><div class="line">    <span class="comment"># X-Z平面</span></div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -JX<span class="variable">$fig_width_x</span>/<span class="variable">$fig_width_z</span> -JZ<span class="variable">$fig_width_y</span> -R<span class="variable">$xmin</span>/<span class="variable">$xmax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span>/<span class="variable">$ymin</span>/<span class="variable">$ymax</span> -py<span class="variable">$angle_view</span>/0 -Chot </div><div class="line">gmt end</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/08/06/2017-08-06-GermanWord/" itemprop="url">
                  九天学者-德国留学之：德语培训
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2017-08-06T13:27:00+02:00" content="2017-08-06">
              2017-08-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/留学/" itemprop="url" rel="index">
                    <span itemprop="name">留学</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p><center><strong><font face="STKaiti", size="6" color=#EA5969 >论德语单词的新玩法</font></strong></center >  </p>
<div align=center><img src="http://ocp8aowoj.bkt.clouddn.com/WC_de_alice.svg" width="50%" /></div>
          <div class="post-more-link text-center">
            <a class="btn" href="/2017/08/06/2017-08-06-GermanWord/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/image/favico_blog.png"
               alt="九天学者" />
          <p class="site-author-name" itemprop="name">九天学者</p>
          <p class="site-description motion-element" itemprop="description">地球物理学在读博士</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">17</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="1013282124" target="_blank" title="QQ">
                  
                    <i class="fa fa-fw fa-qq"></i>
                  
                  QQ
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://cosscholar.coding.me/fatiando_doc/index.html" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.jianshu.com/u/b0523c9a1f6d" target="_blank" title="jianshu">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  jianshu
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="zhikuiguo@cug.edu.cn" target="_blank" title="Email">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Email
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.researchgate.net/profile/Zhikui_Guo2" target="_blank" title="RG">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  RG
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.modernfig.cn" title="ModernFig" target="_blank">ModernFig</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.modernfig.cn" title="GMTChina" target="_blank">GMTChina</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">九天学者

  &nbsp;&nbsp;|&nbsp;&nbsp;
  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1261545439'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1261545439%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));</script>

  &nbsp;&nbsp;|&nbsp;&nbsp;<span><a href="/sitemap.xml">Google网站地图</a></span>
  &nbsp;&nbsp;|&nbsp;&nbsp;<span><a href="/baidusitemap.xml">百度网站地图</a></span>

  </span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

&nbsp;&nbsp;|&nbsp;&nbsp;本站总点击 <span id="busuanzi_value_site_pv"></span> 次
&nbsp;&nbsp;|&nbsp;&nbsp;您是第 <span id="busuanzi_value_site_uv"></span> 位访客

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<script>
(function(){
    var bp = document.createElement('script');
    bp.src = '//push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  

</body>
</html>

<a href="https://github.com/CosmicScholar"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://camo.githubusercontent.com/8b6b8ccc6da3aa5722903da7b58eb5ab1081adee/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f6f72616e67655f6666373630302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_left_orange_ff7600.png"></a>

<a href="https://coding.net/u/CosScholar/p/CosScholar.coding.me"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://ocp8aowoj.bkt.clouddn.com/fockMeCoding.png" alt="Fork me on Coding" data-canonical-src="http://ocp8aowoj.bkt.clouddn.com/fockMeCoding.png"></a>
