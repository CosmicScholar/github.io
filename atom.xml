<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>九天学者</title>
  <subtitle>Knowledge is Power</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-09-07T17:11:56.341Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>九天学者</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Modern GMT Series：Slice in 3D View (三维切片图)</title>
    <link href="http://yoursite.com/2018/09/07/post_17/"/>
    <id>http://yoursite.com/2018/09/07/post_17/</id>
    <published>2018-09-07T17:05:00.000Z</published>
    <updated>2018-09-07T17:11:56.341Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>相信理工科方面的科研人员经常会遇到做三维切片图的时候，以地球物理为例，比如重力、磁异常三维反演，地震速度剖面+地形图，热液循环三维数值模拟（CFD范畴），地球动力学三维模拟等。当然了做三维切片图也有<strong>商业软件</strong>(比如<a href="https://www.tecplot.com/products/tecplot-360/" target="_blank" rel="external">Tecplot 360</a>)和<strong>开源软件</strong>（比如<a href="https://www.paraview.org" target="_blank" rel="external">Paraview</a>），前者缺点是收费收费收费，后者导出的三维场景图效果很差（不是矢量图，colorbar位置错乱等问题），其优点是做现场演示。还有我最喜欢的编程语言<a href="https://matplotlib.org" target="_blank" rel="external">python</a>也可以做这个工作，但是我觉得它对坐标轴的label处理的不是那么完美，但也是个不错的选择。<strong>我的原则</strong>就是用<strong>开源的程序或者软件做出最漂亮最简洁并且高质量</strong>(本人追求矢量的eps、pdf、ps格式)<strong>的学术论文图</strong>。经过我四年的不断折腾和筛选，发现到目前为止，<a href="http://gmt.soest.hawaii.edu/doc/5.4.4/index.html" target="_blank" rel="external">GMT 6.0</a>最新版（我是直接从<a href="https://github.com/GenericMappingTools/gmt" target="_blank" rel="external">github</a>克隆下来的开发版）对三维图支持已经非常棒了。不仅可以做<a href="待添加">三维地形图</a>（上面标注文字，数据点，线，legend等），还可以做切片的等值线图或者image。</p>
</blockquote>
<p><strong>一贯的风格：先来一段回顾和概述，然后提出问题，再解决问题，最后点评一下存在的问题或可选方案</strong></p>
<h1 id="提出问题"><a href="#提出问题" class="headerlink" title="提出问题"></a>提出问题</h1><p>这种图在什么情况下使用？直接上图感受一下</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-3dcdd93c05410360.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Olive, et al., 2015, Science"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-3bb3e2dfd322f0da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Schmid F. and Schlindwein V., 2016, G3"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-b6fed46781638260.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Zhao, et al., 2013, G3"></p>
<h1 id="GMT如何实现三维切片图"><a href="#GMT如何实现三维切片图" class="headerlink" title="GMT如何实现三维切片图"></a>GMT如何实现三维切片图</h1><p>gmt新版推出的三维成图主要通过<strong>-p</strong>和<strong>-JZ</strong>实现的。前者进行旋转，后者给定垂向轴相关信息。gmt官网上有个<a href="http://gmt.soest.hawaii.edu/doc/latest/gallery/users_contrib_script/vertical_slice.html#vertical-slice" target="_blank" rel="external">用户给出的例子</a>，但是没有讲清楚这个切片图到底如何准确实现，但是还是有借鉴意义的。因为本人的博士课题有部分数据涉密，不方面放上来，就以上面提到的这个例子里面的函数造一个数据进行成图。</p>
<h2 id="p参数"><a href="#p参数" class="headerlink" title="-p参数"></a>-p参数</h2><p>这个参数是新版gmt里面一个很通用的参数，在<a href="http://gmt.soest.hawaii.edu/doc/latest/basemap.html" target="_blank" rel="external">basemap</a>, <a href="http://gmt.soest.hawaii.edu/doc/latest/grdimage.html" target="_blank" rel="external">grdimage</a>, <a href="http://gmt.soest.hawaii.edu/doc/latest/grdcontour.html" target="_blank" rel="external">grdcontour</a>, <a href="http://gmt.soest.hawaii.edu/doc/latest/grdview.html" target="_blank" rel="external">grdview</a>等都有这个参数，下面以<strong>basemap</strong>为例介绍<code>-p</code>参数的用法。具体请参见<a href="http://gmt.soest.hawaii.edu/doc/latest/gmt.html#perspective-full" target="_blank" rel="external">官网英文解释</a></p>
<ul>
<li><strong>参数解释</strong><br>-p后面可以跟<code>x</code>,<code>y</code>,<code>z</code>（这三个字母表示你的此图的<code>纵轴</code>是哪个），然后再跟<a href="https://ww2.mathworks.cn/help/matlab/visualize/setting-the-viewpoint-with-azimuth-and-elevation.html" target="_blank" rel="external"><code>方位角(azimuth)/仰角(elevation)</code></a>，或者直接跟<code>方位角/仰角</code>。方位角的范围是$(0,360]$，仰角范围是$(0,90]$，这个很重要，比如方位角或者仰角为0，则gmt会报错。</li>
</ul>
<ol>
<li><strong>方位角</strong> 表示的是绕<code>纵轴</code>(由-p后面跟的字母决定，可以是<code>x</code>,<code>y</code>,<code>z</code>如果没给出则默认为<code>z</code>)旋转多少度，<code>方位角=180</code>的情况相当于没有旋转，小于180°表示顺时针旋转；大于180°表示顺时针旋转。</li>
<li><strong>仰角</strong> 过视角点做一个与此图平面$P_1$垂直的面$P_2$。在$P_2$面内，视角点与参考点的直线假设为$L_0$，那么$L_0$与$P_1$面之间的夹角就是<strong>仰角</strong> （<em>挺复杂，姑且这么理解，慢慢体会</em>）。所以，如果<code>仰角=90</code>表示俯视图，也就是下图(b)所示的只是在(a)图的基础上绕z轴顺时针旋转了$180^{\circ}-135^{\circ}=45^{\circ}$；(c)图在(b)图的基础上上仰了45°。</li>
<li><strong>切片位置</strong> -p后面除了方位角和仰角，还可以再跟第三个数字，类似这样的格式:<code>-p方位角/仰角/在纵轴的位置</code> 即<code>-pazimuth/elevation/pos</code>，这个<code>pos</code>设定了此图在纵轴的什么位置处。比如<code>-pz135/60/400</code>表示此图平面是x-y平面（与纸张面平行），位于纵轴(也就是z轴）的$z=400$处；<code>-px135/60/-50</code>表示此图的平面与y-z平面平行，位于$x=-50$处，<strong>这是设置切片位置的关键</strong>。这个功能必须与<code>-JZ</code>参数配个才生效，同时要求<code>-R</code>后面必须跟六个参数表示坐标范围（见下面的-JZ解释）。</li>
</ol>
<blockquote>
<p>注意：下面的所有操作都是在Mac系统下进行的，而且用到了<code>awk</code>程序（配合gmt做一些文字处理和简单计算），如何安装和使用gmt开发版和如何配置gmt请阅读<a href="待添加">gmt第一课</a></p>
</blockquote>
<ul>
<li><strong>绘图实例</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-96ec3e190c912281.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="-p参数在底图中的使用。（a）没有使用-p参数；（b）方位角135°/仰角90°；（c）仰角45°"></p>
<ul>
<li><strong>代码</strong></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">fig_name=<span class="built_in">test</span>_basemap_p</div><div class="line">fig_fmt=png</div><div class="line">gmt begin <span class="variable">$fig_name</span> <span class="variable">$fig_fmt</span></div><div class="line">    gmt gmtset MAP_FRAME_TYPE=fancy+</div><div class="line">    fig_width=14</div><div class="line">    lon_min=-75</div><div class="line">    lon_max=-60</div><div class="line">    lat_min=-50</div><div class="line">    lat_max=-40</div><div class="line">    <span class="comment"># 方位角</span></div><div class="line">    azimuth=135</div><div class="line">    <span class="comment"># 仰角</span></div><div class="line">    elevation=90</div><div class="line">    range_lon_lat=<span class="variable">$lon_min</span>/<span class="variable">$lon_max</span>/<span class="variable">$lat_min</span>/<span class="variable">$lat_max</span></div><div class="line">    gmt basemap -JM<span class="variable">$&#123;fig_width&#125;</span>c -R<span class="variable">$range_lon_lat</span> -Ba5f1 -BWSen+t<span class="string">"(a) without -p"</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N </div><div class="line">    gmt basemap -B -BWSen+t<span class="string">"(b) -p"</span><span class="variable">$azimuth</span><span class="string">"/"</span><span class="variable">$elevation</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N -X16c -p<span class="variable">$&#123;azimuth&#125;</span>/<span class="variable">$&#123;elevation&#125;</span></div><div class="line">    <span class="comment"># 更改仰角</span></div><div class="line">    elevation=45</div><div class="line">    gmt basemap -B -BWSen+t<span class="string">"(c) -p"</span><span class="variable">$azimuth</span><span class="string">"/"</span><span class="variable">$elevation</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N -X19c -p<span class="variable">$&#123;azimuth&#125;</span>/<span class="variable">$&#123;elevation&#125;</span></div><div class="line">gmt end</div><div class="line"><span class="comment"># 打开文件查看</span></div><div class="line">open <span class="variable">$&#123;fig_name&#125;</span>.<span class="variable">$&#123;fig_fmt&#125;</span></div></pre></td></tr></table></figure>
<ul>
<li><strong>关于代码</strong><br>这个代码风格是新版gmt推出的<strong>modern模式</strong>，带来了很大方便。<br>(1) 不用每个绘图命令后面都要跟一个<code>-O</code>,<code>-K</code>,<code>&gt;&gt;xxx.ps</code>等<br>(2) 不用再用<code>psconvert</code>将<code>ps</code>格式转换为<code>png</code>,<code>pdf</code>,<code>svg</code>了，直接在开头给出文件名和格式即可<br>(3) <strong>MAP_FRAME_TYPE=fancy+</strong> <code>fancy</code>表示坐标轴显示为火车道样式；<code>+</code>表示拐角显示为圆角(不信你就上翻在看一眼图哟)<br>(4) 如果投影参数<code>-J</code>, 范围参数<code>-R</code>与前一个绘图完全一致，则可以省略这两个参数。但是<code>-B</code>不能省略，不然将不显示坐标轴，虽然坐标轴设置参数也完全一致</li>
</ul>
<h2 id="JZ参数"><a href="#JZ参数" class="headerlink" title="-JZ参数"></a>-JZ参数</h2><p>上面讲的<code>-p</code>参数只是对图做了方位旋转，还不是真正的三维作图，因为所有的绘图元素都在一个平面内。要实现三维成图，需要附加<code>-JZ</code>参数，一看-J就知道肯定是与投影有关了，此参数设定了<code>纵轴</code>方向的长度。更多-J参数参见<a href="http://gmt.soest.hawaii.edu/doc/latest/gmt.html#j-full" target="_blank" rel="external">官网说明</a></p>
<ul>
<li><strong>参数解释</strong></li>
</ul>
<ol>
<li><strong>图像纵轴高度</strong> 与<code>-JX</code>参数类似，后面直接跟此轴方向的图像大小，单位可以是<code>c</code>厘米或者<code>i</code>英尺。</li>
<li><strong>坐标范围</strong> gmt绘图必须给定坐标范围即<code>-R</code>参数（当然了这是针对第一个绘图命令而言的），除了新版(6.0版)的<code>-Re</code>和<code>-Ra</code>之外，对于二维绘图必须给出四个数字(<code>-Rxmin/xmax/ymin/ymax</code>)，而对于三维绘图（也就是有<code>-JZ</code>参数出现的时候）必须给出六个数字(<code>-Rxmin/xmax/ymin/ymax/zmin/zmax</code>)</li>
<li><strong>坐标轴</strong> 坐标轴的label格式用类似命令<code>-Bza250f50g250</code>(主刻度间隔250，副刻度间隔50，显示网格间隔250)设置；如果想显示纵轴，则用<code>-BWseNZ</code>类似的命令设置，大写字母表示要显示哪个轴，如果要显示立方体框(cubic outline)，只要在后面跟一个<code>+b</code>即可(<code>-BWseNZ+b</code>)。</li>
</ol>
<ul>
<li><strong>绘图实例</strong><br>体会不同旋转角度的视角差异，注意（a）和（b）中的玫瑰方向标的变化。<br><img src="https://upload-images.jianshu.io/upload_images/7316098-c3da0e2e265c7bb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="不同视角下的-JZ参数绘图实例"></li>
</ul>
<ul>
<li><p><strong>代码</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">fig_name=<span class="built_in">test</span>_basemap_JZ</div><div class="line">fig_fmt=png</div><div class="line">gmt begin <span class="variable">$fig_name</span> <span class="variable">$fig_fmt</span></div><div class="line">    gmt gmtset MAP_FRAME_TYPE=fancy+</div><div class="line">    fig_width=14</div><div class="line">    <span class="comment"># 增加图像高度：及纵轴方向的长度</span></div><div class="line">    fig_height=8</div><div class="line">    lon_min=-75</div><div class="line">    lon_max=-60</div><div class="line">    lat_min=-50</div><div class="line">    lat_max=-40</div><div class="line">    <span class="comment"># 增加纵轴方向的范围</span></div><div class="line">    z_min=0</div><div class="line">    z_max=999</div><div class="line">    <span class="comment"># 方位角</span></div><div class="line">    azimuth=135</div><div class="line">    <span class="comment"># 仰角</span></div><div class="line">    elevation=45</div><div class="line">    range_lon_lat=<span class="variable">$lon_min</span>/<span class="variable">$lon_max</span>/<span class="variable">$lat_min</span>/<span class="variable">$lat_max</span></div><div class="line">    range_z=<span class="variable">$z_min</span>/<span class="variable">$z_max</span></div><div class="line">    range=<span class="variable">$range_lon_lat</span>/<span class="variable">$range_z</span></div><div class="line">    gmt basemap -R<span class="variable">$range</span> -JM<span class="variable">$fig_width</span> -JZ<span class="variable">$fig_height</span> -Ba5f1 -Bza250f50g250+l<span class="string">"km"</span> -BWSenZ+b+t<span class="string">"3D basemap: "</span><span class="variable">$azimuth</span><span class="string">"/"</span><span class="variable">$elevation</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N -pz<span class="variable">$&#123;azimuth&#125;</span>/<span class="variable">$&#123;elevation&#125;</span> </div><div class="line">    azimuth=45</div><div class="line">    gmt basemap -JZ -B -Bza250f50g250+l<span class="string">"km"</span> -BWSenZ+b+t<span class="string">"3D basemap: "</span><span class="variable">$azimuth</span><span class="string">"/"</span><span class="variable">$elevation</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N -pz<span class="variable">$&#123;azimuth&#125;</span>/<span class="variable">$&#123;elevation&#125;</span> -X19c</div><div class="line">    elevation=30</div><div class="line">    gmt basemap -JZ -B -Bza250f50g250+l<span class="string">"km"</span> -BWSenZ+b+t<span class="string">"3D basemap: "</span><span class="variable">$azimuth</span><span class="string">"/"</span><span class="variable">$elevation</span> -TdjBL+o0c/0c+w1.5c+f+l,E,,N -pz<span class="variable">$&#123;azimuth&#125;</span>/<span class="variable">$&#123;elevation&#125;</span> -X19c</div><div class="line">gmt end</div><div class="line"></div><div class="line">open <span class="variable">$&#123;fig_name&#125;</span>.<span class="variable">$&#123;fig_fmt&#125;</span></div></pre></td></tr></table></figure>
</li>
<li><p><strong>关于代码</strong><br>（1）如果使用了<code>-JZ</code>参数，必须设定六位数的<code>-R</code>参数<br>（2）<code>-J</code>参数可以省略（继承上一个绘图命令的-J参数），但是<code>-JZ</code>不能省略<br>（3）<code>-Bz</code>也不能省略</p>
</li>
</ul>
<h1 id="三维切片绘图实例"><a href="#三维切片绘图实例" class="headerlink" title="三维切片绘图实例"></a>三维切片绘图实例</h1><p><img src="https://upload-images.jianshu.io/upload_images/7316098-0f34ccfbe3b97035.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="利用GMT绘制的两个切片:平面模式"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-83436c27502820b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="利用GMT绘制的两个切片：三维立体模式"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line">gmt <span class="built_in">set</span> GMT_COMPATIBILITY=5 MAP_FRAME_TYPE=plain</div><div class="line"><span class="comment"># 1. 数据和绘图坐标参数设置</span></div><div class="line">fig_width_x=14</div><div class="line">fig_width_z=8</div><div class="line"><span class="comment"># 数据范围</span></div><div class="line">lon_min=-75</div><div class="line">lon_max=-60</div><div class="line">lat_min=-50</div><div class="line">lat_max=-40</div><div class="line">zmin=0</div><div class="line">zmax=999</div><div class="line"><span class="comment"># 数据中心点坐标</span></div><div class="line">lon0=`<span class="built_in">echo</span> <span class="variable">$lon_min</span> <span class="variable">$lon_max</span> | awk <span class="string">'&#123;print $1+($2-$1)/2.0&#125;'</span>`</div><div class="line">lat0=`<span class="built_in">echo</span> <span class="variable">$lat_min</span> <span class="variable">$lat_max</span> | awk <span class="string">'&#123;print $1+($2-$1)/2.0&#125;'</span>`</div><div class="line"><span class="built_in">echo</span> <span class="variable">$lon0</span> <span class="variable">$lat0</span></div><div class="line">range_lon_lat=<span class="variable">$lon_min</span>/<span class="variable">$lon_max</span>/<span class="variable">$lat_min</span>/<span class="variable">$lat_max</span></div><div class="line">range_z=<span class="variable">$zmin</span>/<span class="variable">$zmax</span></div><div class="line">range=<span class="variable">$range_lon_lat</span>/<span class="variable">$range_z</span></div><div class="line"><span class="comment"># 投影参数</span></div><div class="line">proj_xy=M<span class="variable">$lon0</span>/<span class="variable">$lat0</span>/<span class="variable">$fig_width_x</span>  <span class="comment">#x-y平面的投影参数</span></div><div class="line"><span class="comment"># 数据文件名</span></div><div class="line">data_xy=base.nc</div><div class="line">data_xy_cart=base_cart.nc</div><div class="line">data_yz=slice_cut.nc</div><div class="line"></div><div class="line"><span class="comment"># 2. x-y平面内的网格数据</span></div><div class="line"><span class="comment"># gmt grdmath -R$range_lon_lat -I0.005 X D2R Y D2R ADD STO@xySum SIN @xySum 3 MUL NEG EXP MUL = $data_xy</span></div><div class="line"></div><div class="line"><span class="comment"># 3. 沿纬度方向的垂直切片</span></div><div class="line">lat_min_slice=-47.5</div><div class="line">lat_max_slice=-42.5</div><div class="line"><span class="comment"># gmt grdmath -R$&#123;lat_min_slice&#125;/$&#123;lat_max_slice&#125;/$&#123;zmin&#125;/$&#123;zmax&#125; -I0.005/0.5 X D2R -67.5 D2R ADD STO@xySum SIN @xySum 3 Y 1E4 DIV SUB MUL NEG EXP MUL = slice.nc</span></div><div class="line"></div><div class="line"><span class="comment"># 4. 将数据范围投影到图像空间的大小:x对应经度方向；y对应纬度方向</span></div><div class="line">xmin=`<span class="built_in">echo</span> <span class="variable">$lon_min</span> <span class="variable">$lat_min</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $1&#125;'</span>`</div><div class="line">ymin=`<span class="built_in">echo</span> <span class="variable">$lon_min</span> <span class="variable">$lat_min</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $2&#125;'</span>`</div><div class="line">xmax=`<span class="built_in">echo</span> <span class="variable">$lon_max</span> <span class="variable">$lat_max</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $1&#125;'</span>`</div><div class="line">ymax=`<span class="built_in">echo</span> <span class="variable">$lon_max</span> <span class="variable">$lat_max</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $2&#125;'</span>`</div><div class="line">ymin_slice=`<span class="built_in">echo</span> <span class="variable">$lon0</span> <span class="variable">$lat_min_slice</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $2&#125;'</span>`</div><div class="line">ymax_slice=`<span class="built_in">echo</span> <span class="variable">$lon0</span> <span class="variable">$lat_max_slice</span> | gmt mapproject -R<span class="variable">$range_lon_lat</span> -J<span class="variable">$proj_xy</span> | awk <span class="string">'&#123;print $2&#125;'</span>`</div><div class="line"><span class="built_in">echo</span> <span class="variable">$xmin</span> <span class="variable">$xmax</span> <span class="variable">$ymin</span> <span class="variable">$ymax</span> <span class="variable">$ymin_slice</span> <span class="variable">$ymax_slice</span></div><div class="line">fig_width_y=<span class="variable">$ymax</span></div><div class="line"></div><div class="line"><span class="comment"># 5. 将切片数据投影到图像大小的空间：最好利用中心经度，也就是后面的-JM参数中的中心经度值</span></div><div class="line"><span class="comment"># mapproject输入经纬度值（读取前两列），投影参数与后面作图的时候一致，输出的前两列是x,y值，位于[0,fig_width_x]和[0,fig_width_y]范围内,fig_width_y目前还不知道，需要计算</span></div><div class="line"><span class="comment"># gmt grd2xyz slice.nc | awk '&#123;print "'$lon0'",$0&#125;' | gmt mapproject -R$range_lon_lat -J$proj_xy |awk '&#123;print $2,$3,$4&#125;'&gt; points.txt</span></div><div class="line"><span class="comment"># gmt grdproject $data_xy -R$range_lon_lat -J$proj_xy -r -E300 -G$data_xy_cart</span></div><div class="line"></div><div class="line"><span class="comment"># 6. 重新网格化切片</span></div><div class="line"><span class="comment"># gmt surface points.txt -G$data_yz -R$ymin_slice/$ymax_slice/$zmin/$zmax -I1500+/2000+ -C0.1 -T0.25</span></div><div class="line"></div><div class="line"><span class="comment"># # 开始绘图</span></div><div class="line">proj_yz=X<span class="variable">$fig_width_y</span>/<span class="variable">$fig_width_z</span></div><div class="line">proj_xz=X<span class="variable">$fig_width_x</span>/<span class="variable">$fig_width_z</span></div><div class="line">rm gmt.history gmt.conf</div><div class="line"><span class="comment"># 8.1 将数据显示在平面内</span></div><div class="line">fig_name=vslice_gmt</div><div class="line">fig_fmt=png</div><div class="line">gmt begin <span class="variable">$fig_name</span> <span class="variable">$fig_fmt</span></div><div class="line">    <span class="comment"># x-y平面的数据显示</span></div><div class="line">    gmt basemap -J<span class="variable">$proj_xy</span> -R<span class="variable">$range_lon_lat</span> -Ba5f1 -BWSen+t<span class="string">"Data on x-y plane"</span> </div><div class="line">    gmt grdimage <span class="variable">$data_xy</span> -Ccpt-city/oc/sst</div><div class="line">    gmt coast -Df -A0/0/1 -N1/0.5p,black,-..- -W0.5p,black</div><div class="line">    <span class="comment"># y-z切片数据显示</span></div><div class="line">    move_x=16</div><div class="line">    gmt basemap -J<span class="variable">$proj_yz</span> -R<span class="variable">$ymin</span>/<span class="variable">$ymax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span> -Bxa5f1+l<span class="string">"y (latitude)"</span> -Bya200f40+l<span class="string">"z (km)"</span> -BWSen+t<span class="string">"Slice data on y-z plane"</span> -X<span class="variable">$move_x</span> -p90/90</div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -Crainbow -p</div><div class="line">    <span class="comment"># x-z切片数据显示</span></div><div class="line">    gmt basemap -J<span class="variable">$proj_yz</span> -R<span class="variable">$xmin</span>/<span class="variable">$xmax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span> -Bxa5f1+l<span class="string">"x (longitude)"</span> -Bya200f40+l<span class="string">"z (km)"</span> -BWSen+t<span class="string">"Slice data on x-z plane"</span> -X-<span class="variable">$move_x</span> -Y-10 </div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -Chot </div><div class="line">gmt end</div><div class="line"></div><div class="line">open <span class="variable">$&#123;fig_name&#125;</span>.<span class="variable">$&#123;fig_fmt&#125;</span></div><div class="line"></div><div class="line"><span class="comment"># 8.2 显示为3维切片形式</span></div><div class="line"><span class="comment"># 方位角设置</span></div><div class="line">azimuth=135</div><div class="line">elevation=45</div><div class="line">angle_view=<span class="variable">$azimuth</span>/<span class="variable">$elevation</span></div><div class="line">fig_name=vslice_gmt_3D</div><div class="line">fig_fmt=png</div><div class="line">gmt begin <span class="variable">$fig_name</span> <span class="variable">$fig_fmt</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"figwidth "</span><span class="variable">$fig_width_x</span> <span class="variable">$fig_width_y</span> <span class="variable">$fig_width_z</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"range "</span> <span class="variable">$xmin</span> <span class="variable">$xmax</span> <span class="variable">$ymin</span> <span class="variable">$ymax</span> <span class="variable">$zmin</span> <span class="variable">$zmax</span></div><div class="line">    <span class="comment"># 三维框架</span></div><div class="line">    gmt basemap -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span> -Ba5f1 -Bza200f40g200+l<span class="string">"Z (km)"</span> -BwSEnZ+b </div><div class="line">    <span class="comment"># 贴x-y平面数据图</span></div><div class="line">    gmt grdimage <span class="variable">$data_xy</span> -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span>/0 -Ccpt-city/oc/sst --MAP_FRAME_AXES=<span class="string">''</span></div><div class="line">    gmt coast -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span>/0 -Df -A0/0/1 -N1/0.5p,black,-..- -W0.5p,black </div><div class="line">    <span class="comment"># # 贴y-z平面的切片数据</span></div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -JX<span class="variable">$fig_width_y</span>/<span class="variable">$fig_width_z</span> -JZ<span class="variable">$fig_width_x</span> -R<span class="variable">$ymin</span>/<span class="variable">$ymax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span>/<span class="variable">$xmin</span>/<span class="variable">$xmax</span>  -px<span class="variable">$angle_view</span>/7 -Crainbow </div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -JX<span class="variable">$fig_width_x</span>/<span class="variable">$fig_width_z</span> -JZ<span class="variable">$fig_width_y</span> -R<span class="variable">$xmin</span>/<span class="variable">$xmax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span>/<span class="variable">$ymin</span>/<span class="variable">$ymax</span> -py<span class="variable">$angle_view</span>/0 -Chot </div><div class="line">gmt end</div><div class="line"></div><div class="line">open <span class="variable">$&#123;fig_name&#125;</span>.<span class="variable">$&#123;fig_fmt&#125;</span></div></pre></td></tr></table></figure>
<h1 id="存在BUG"><a href="#存在BUG" class="headerlink" title="存在BUG"></a>存在BUG</h1><h2 id="错误展示"><a href="#错误展示" class="headerlink" title="错误展示"></a>错误展示</h2><p>旋转之后切片位置不能很好的归位，因为源代码里面有问题，比如下图</p>
<p><img src="https://upload-images.jianshu.io/upload_images/7316098-1f500f271b6b1638.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="两个切片分别位于xmin和ymin位置：显示位置错乱"></p>
<h2 id="查找问题"><a href="#查找问题" class="headerlink" title="查找问题"></a>查找问题</h2><p>找到三维透视图绘图的源代码<code>gmt_plot.c</code>-&gt;<code>gmt_plane_perspective</code>函数（位于7429行）<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">double</span> a, b, c, d, e, f;</div><div class="line"><span class="keyword">struct</span> PSL_CTRL *PSL= GMT-&gt;PSL;</div><div class="line">....</div><div class="line"><span class="comment">//省略一些代码</span></div><div class="line">....</div><div class="line"><span class="keyword">switch</span> (plane % <span class="number">3</span>) &#123;</div><div class="line">			<span class="keyword">case</span> GMT_X:	<span class="comment">/* Constant x, Convert y,z to x',y' */</span></div><div class="line">				a = GMT-&gt;current.proj.z_project.sin_az;</div><div class="line">				b = -GMT-&gt;current.proj.z_project.cos_az * GMT-&gt;current.proj.z_project.sin_el;</div><div class="line">				c = <span class="number">0.0</span>;</div><div class="line">				d = GMT-&gt;current.proj.z_project.cos_el;</div><div class="line">				e = GMT-&gt;current.proj.z_project.x_off - level * GMT-&gt;current.proj.z_project.cos_az;</div><div class="line">				f = GMT-&gt;current.proj.z_project.y_off - level * GMT-&gt;current.proj.z_project.sin_az * GMT-&gt;current.proj.z_project.sin_el;</div><div class="line">。。。</div><div class="line"><span class="comment">//省略</span></div><div class="line">PSL_command (PSL, <span class="string">"%s [%g %g %g %g %g %g] concat\n"</span>,</div><div class="line">			(GMT-&gt;current.proj.z_project.plane &gt;= <span class="number">0</span>) ? <span class="string">"PSL_GPP setmatrix"</span> : <span class="string">"/PSL_GPP matrix currentmatrix def"</span>,</div><div class="line">			a, b, c, d, e * PSL-&gt;internal.x2ix, f * PSL-&gt;internal.y2iy);</div></pre></td></tr></table></figure></p>
<p>根据坐标轴范围(<code>-R</code>参数)和<code>方位角</code>,<code>仰角</code>,<code>level</code>值（也即是<code>-p</code>后面的第三个参数）计算<code>a</code>,<code>b</code>,<code>c</code>,<code>d</code>,<code>e</code>,<code>f</code>，然后将这六个数字写入ps文件里面。这里面的计算公式是有问题的，我已将其修改，具体修改方法见<a href="待添加">下回分解</a>.</p>
<h2 id="修正后"><a href="#修正后" class="headerlink" title="修正后"></a>修正后</h2><p>将<code>e</code>和<code>f</code>重新计算后，得到了正确的结果，如下图<br><img src="https://upload-images.jianshu.io/upload_images/7316098-ed663c296e49a9cd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Debug之后的结果，位置正确"></p>
<p>上面两个图的绘图代码均为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">gmt begin <span class="variable">$fig_name</span> <span class="variable">$fig_fmt</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"figwidth "</span><span class="variable">$fig_width_x</span> <span class="variable">$fig_width_y</span> <span class="variable">$fig_width_z</span></div><div class="line">    <span class="built_in">echo</span> <span class="string">"range "</span> <span class="variable">$xmin</span> <span class="variable">$xmax</span> <span class="variable">$ymin</span> <span class="variable">$ymax</span> <span class="variable">$zmin</span> <span class="variable">$zmax</span></div><div class="line">    <span class="comment"># 三维框架</span></div><div class="line">    gmt basemap -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span> -Ba5f1 -Bza200f40+l<span class="string">"Z (km)"</span> -BwSEnZ+b+t<span class="string">"After debug"</span> </div><div class="line">    <span class="comment"># 贴x-y平面数据图</span></div><div class="line">    gmt grdimage <span class="variable">$data_xy</span> -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span>/0 -Ccpt-city/oc/sst --MAP_FRAME_AXES=<span class="string">''</span></div><div class="line">    gmt coast -J<span class="variable">$proj_xy</span> -JZ<span class="variable">$fig_width_z</span> -R<span class="variable">$range</span> -pz<span class="variable">$angle_view</span>/0 -Df -A0/0/1 -N1/0.5p,black,-..- -W0.5p,black </div><div class="line">    <span class="comment"># 贴y-z平面的切片数据</span></div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -JX<span class="variable">$fig_width_y</span>/<span class="variable">$fig_width_z</span> -JZ<span class="variable">$fig_width_x</span> -R<span class="variable">$ymin</span>/<span class="variable">$ymax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span>/<span class="variable">$xmin</span>/<span class="variable">$xmax</span>  -px<span class="variable">$angle_view</span>/0 -Crainbow </div><div class="line">    <span class="comment"># X-Z平面</span></div><div class="line">    gmt grdimage <span class="variable">$data_yz</span> -JX<span class="variable">$fig_width_x</span>/<span class="variable">$fig_width_z</span> -JZ<span class="variable">$fig_width_y</span> -R<span class="variable">$xmin</span>/<span class="variable">$xmax</span>/<span class="variable">$zmin</span>/<span class="variable">$zmax</span>/<span class="variable">$ymin</span>/<span class="variable">$ymax</span> -py<span class="variable">$angle_view</span>/0 -Chot </div><div class="line">gmt end</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;相信理工科方面的科研人员经常会遇到做三维切片图的时候，以地球物理为例，比如重力、磁异常三维反演，地震速度剖面+地形图，热液循环三维数值模拟（CFD范畴），地球动力学三维模拟等。当然了做三维切片图也有&lt;strong&gt;商业软件&lt;/strong&gt;(比如&lt;
    
    </summary>
    
      <category term="三维切片图" scheme="http://yoursite.com/categories/%E4%B8%89%E7%BB%B4%E5%88%87%E7%89%87%E5%9B%BE/"/>
    
    
      <category term="gmt" scheme="http://yoursite.com/tags/gmt/"/>
    
  </entry>
  
  <entry>
    <title>九天学者-德国留学之：德语培训</title>
    <link href="http://yoursite.com/2017/08/06/2017-08-06-GermanWord/"/>
    <id>http://yoursite.com/2017/08/06/2017-08-06-GermanWord/</id>
    <published>2017-08-06T11:27:00.000Z</published>
    <updated>2017-08-06T05:25:08.000Z</updated>
    
    <content type="html"><![CDATA[<p><center><strong><font face="STKaiti" ,="" size="6" color="#EA5969">论德语单词的新玩法</font></strong></center>  </p>
<div align="center"><img src="http://ocp8aowoj.bkt.clouddn.com/WC_de_alice.svg" width="50%"></div>

<a id="more"></a>
<h1 id="新求精德语词汇整理"><a href="#新求精德语词汇整理" class="headerlink" title="新求精德语词汇整理"></a>新求精德语词汇整理</h1><blockquote>
<p><strong>区老师</strong>每节课都用word做笔记，里面包括了所有需要掌握的句型和单词。本程序的作用就是将所有的笔记统一到一个文件进行分析，按词频提取单词并制作为<a href="http://my.godic.net/" target="_blank" rel="external">德语助手</a>单词复习课本和<strong>云图</strong>。</p>
</blockquote>
<h2 id="笔记整理"><a href="#笔记整理" class="headerlink" title="笔记整理"></a>笔记整理</h2><ul>
<li><strong>word_de_1-9.txt</strong><blockquote>
<p>目前第九课已经上完，这里讲1-9课的笔记全部拷贝到一个名为<strong>word_de_1-9.txt</strong>的文本文件中（这里不用担心word里面的表格什么的）。</p>
</blockquote>
</li>
</ul>
<h1 id="德语分词"><a href="#德语分词" class="headerlink" title="德语分词"></a>德语分词</h1><ul>
<li><strong>de_fenci.txt</strong></li>
<li><strong>de_fenci.detail.txt</strong><blockquote>
<p>利用程序提取<strong>word_de_1-9.txt</strong>文件中所有的单词并存储在<strong>de_fenci</strong>文件中，有后缀<strong>detail</strong>的表示对每个单词的词性进行了分析可供以后使用（暂时先用<strong>de_fenci.txt</strong>）。</p>
</blockquote>
</li>
</ul>
<h1 id="词频统计"><a href="#词频统计" class="headerlink" title="词频统计"></a>词频统计</h1><ul>
<li><strong>word_de_freq.txt</strong><blockquote>
<p>利用程序对分词结果<strong>de_fenci.txt</strong>进行词频分析，将结果存储到文件<strong>word_de_freq.txt</strong>中（第一列为单词，第二列为出现次数）。</p>
</blockquote>
</li>
</ul>
<h2 id="后期处理"><a href="#后期处理" class="headerlink" title="后期处理"></a>后期处理</h2><ul>
<li><strong>excel</strong>手动</li>
<li><strong>./results/word_1.txt</strong> （出现次数等于1的单词）</li>
<li><strong>./results/word_2.txt</strong> （出现次数超过1的单词）<blockquote>
<p>因为笔记里面难免有一些不是单词的东东出现，比如标点符号或者汉字，用excel打开词频分析结果，依据词频进行排序，将高频词中的非德语单词的东东（没多少）删掉然后保存为txt文件。</p>
</blockquote>
</li>
</ul>
<p><strong>注意:</strong> mac的txt文件和windows系统的txt文件每一行末尾的字符是不同的，貌似德语助手不能识别mac下的txt文件，会将<strong>öäü</strong>识别为乱码。<strong>解决办法</strong>是在Windows下将excel中的文本拷贝到txt文件中即可。</p>
<h1 id="单词本制作"><a href="#单词本制作" class="headerlink" title="单词本制作"></a>单词本制作</h1><p><a href="https://dict.eudic.net" target="_blank" rel="external">欧路</a>出品的<a href="http://www.godic.net" target="_blank" rel="external">德语助手</a>真心好用（至少对初学者），这个词典是支持自定义单词本的，只需要将<em> <em>*./results/word_1.txt</em></em>文件上传即可。</p>
<h2 id="单词本下载"><a href="#单词本下载" class="headerlink" title="单词本下载"></a>单词本下载</h2><!-- <table>
<tr>
<td><center><strong><font face="STKaiti", size="3">词频大于1</font></strong></center ></td>
<td><center><strong><font face="STKaiti", size="3">词频等于1</font></strong></center ></td>
<tr>
<td><div align=center><img src="http://ocp8aowoj.bkt.clouddn.com/word_de_1-9_2.png" width="70%"/></div></td>
<td><div align=center><img src="http://ocp8aowoj.bkt.clouddn.com/word_de_1-9_1.png" width="70%"/></div></td>
</tr>
</table> -->
<ul>
<li><strong><a href="http://ocp8aowoj.bkt.clouddn.com/word_de_1-9_2.png" target="_blank" rel="external">1-9课词频大于1的单词</a></strong></li>
<li><strong><a href="http://ocp8aowoj.bkt.clouddn.com/word_de_1-9_1.png" target="_blank" rel="external">1-9课词频等于1的单词</a></strong><blockquote>
<p>这里提供了我制作的单词本的二维码，在德语助手里扫码即可添加。操作流程：<strong>我的</strong>→<strong>单词复习</strong>→<strong>选择课本</strong>→<strong>扫码下课本</strong>→<strong>摄像头扫码</strong></p>
</blockquote>
</li>
</ul>
<h1 id="词云"><a href="#词云" class="headerlink" title="词云"></a>词云</h1><ul>
<li><strong>剔除人称代词</strong> 下载<a href="http://ocp8aowoj.bkt.clouddn.com/WC_de_1-9.pdf" target="_blank" rel="external">pdf</a> <a href="http://ocp8aowoj.bkt.clouddn.com/WC_de_1-9.svg" target="_blank" rel="external">svg</a></li>
</ul>
<p><img src="http://ocp8aowoj.bkt.clouddn.com/WC_de_1-9.svg" alt="剔除人称代词"></p>
<ul>
<li><strong>原始统计</strong> 下载<a href="http://ocp8aowoj.bkt.clouddn.com/WC_de_1-9_0.pdf" target="_blank" rel="external">pdf</a> <a href="http://ocp8aowoj.bkt.clouddn.com/WC_de_1-9_0.svg" target="_blank" rel="external">svg</a></li>
</ul>
<p><img src="http://ocp8aowoj.bkt.clouddn.com/WC_de_1-9_0.svg" alt="原始统计"></p>
<hr>
<p>C++库<a href="https://github.com/SalvaEB/mask_word_cloud" target="_blank" rel="external">mask_word_cloud</a>.首先需要用命令<code>brew install cairom</code>安装<strong>cairom</strong>；然后clone mask_word_cloud进行make编译即可使用。</p>
<ul>
<li><strong>调用命令(使用mask内部显示)</strong>：<code>./maskwc -m mask.png -r 0 -g 0 -b 0 -o WC_de_1-9_0 word_de_freq.txt</code></li>
<li><strong>调用命令(使用mask外部显示)</strong>：<code>./maskwc -m mask.png -R 0 -G 0 -B 0 -o WC_de_1-9_0 word_de_freq.txt</code></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;center&gt;&lt;strong&gt;&lt;font face=&quot;STKaiti&quot;, size=&quot;6&quot; color=#EA5969 &gt;论德语单词的新玩法&lt;/font&gt;&lt;/strong&gt;&lt;/center &gt;  &lt;/p&gt;
&lt;div align=center&gt;&lt;img src=&quot;http://ocp8aowoj.bkt.clouddn.com/WC_de_alice.svg&quot; width=&quot;50%&quot; /&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="留学" scheme="http://yoursite.com/categories/%E7%95%99%E5%AD%A6/"/>
    
    
      <category term="德国" scheme="http://yoursite.com/tags/%E5%BE%B7%E5%9B%BD/"/>
    
      <category term="德语" scheme="http://yoursite.com/tags/%E5%BE%B7%E8%AF%AD/"/>
    
  </entry>
  
  <entry>
    <title>九天学者-摄影之：小试牛刀</title>
    <link href="http://yoursite.com/2017/08/05/2017-08-05-EOS-0/"/>
    <id>http://yoursite.com/2017/08/05/2017-08-05-EOS-0/</id>
    <published>2017-08-05T11:27:00.000Z</published>
    <updated>2017-08-06T05:32:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><center><strong><font face="STKaiti" ,="" size="6" color="#EA5969">上海外滩夜景</font></strong></center>  </p>
<div align="center"><img src="http://ocp8aowoj.bkt.clouddn.com/%E4%B8%8A%E6%B5%B7%E5%A4%96%E6%BB%A9.jpg"></div>

<a id="more"></a>
<h1 id="论装备"><a href="#论装备" class="headerlink" title="论装备"></a>论装备</h1><h2 id="Canon-EOS-6D-mark-II-官方说明书"><a href="#Canon-EOS-6D-mark-II-官方说明书" class="headerlink" title="Canon EOS 6D mark II 官方说明书"></a><strong>Canon EOS 6D mark II</strong> <a href="http://ocp8aowoj.bkt.clouddn.com/eos6d2Manual.pdf" target="_blank" rel="external">官方说明书</a></h2><h2 id="三脚架"><a href="#三脚架" class="headerlink" title="三脚架"></a><strong><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.1f30a53fUpHgo3&amp;id=39896254092&amp;_u=6vmorf6ac7e" target="_blank" rel="external">三脚架</a></strong></h2><h2 id="CPL保护镜"><a href="#CPL保护镜" class="headerlink" title="CPL保护镜"></a><strong><a href="">CPL保护镜</a></strong></h2><h1 id="构图"><a href="#构图" class="headerlink" title="构图"></a>构图</h1><div align="center"><img src="http://ocp8aowoj.bkt.clouddn.com/IMG_0111.jpg"></div>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;center&gt;&lt;strong&gt;&lt;font face=&quot;STKaiti&quot;, size=&quot;6&quot; color=#EA5969 &gt;上海外滩夜景&lt;/font&gt;&lt;/strong&gt;&lt;/center &gt;  &lt;/p&gt;
&lt;div align=center&gt;&lt;img src=&quot;http://ocp8aowoj.bkt.clouddn.com/%E4%B8%8A%E6%B5%B7%E5%A4%96%E6%BB%A9.jpg&quot; /&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="爱好" scheme="http://yoursite.com/categories/%E7%88%B1%E5%A5%BD/"/>
    
    
      <category term="旅行" scheme="http://yoursite.com/tags/%E6%97%85%E8%A1%8C/"/>
    
      <category term="摄影" scheme="http://yoursite.com/tags/%E6%91%84%E5%BD%B1/"/>
    
  </entry>
  
  <entry>
    <title>九天学者-VT访学记之一：初来乍到</title>
    <link href="http://yoursite.com/2017/03/24/2017-03-24-visiting-vt-arrival/"/>
    <id>http://yoursite.com/2017/03/24/2017-03-24-visiting-vt-arrival/</id>
    <published>2017-03-24T10:59:56.000Z</published>
    <updated>2017-03-24T15:25:34.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>From now, begining new life.</strong></p>
<a id="more"></a>
<h1 id="check-in"><a href="#check-in" class="headerlink" title="check-in"></a>check-in</h1><p>第二天早上第一件事就是汇报外导已经顺利抵达。然后仔细阅读了一下学校寄过来的<strong>Pre-Departure Guide</strong>手册，里面有<strong>arrival todo list</strong>看看，然后联系这边的<strong>Internal Service</strong>负责人Belinda女士。因为需要跟她先约定好时间，所以我跟她发了邮件，然后她告诉了我该带哪些材料。  </p>
<ol>
<li>Passport</li>
<li>DS2019 Form</li>
<li><a href="https://i94.cbp.dhs.gov/I94/#/recent-search" target="_blank" rel="external">I-94 record</a></li>
<li>address in blacksburg</li>
<li>health insurance information(if purchased)  </li>
</ol>
<p>I-94表格就是记录你如今身份的，主要是上面的那个编号。之前都是入境的时候海关会发一张小白卡，上面盖章。现在改革了，只在护照上盖章入境时间，然后信息都是自己在网上填完调出来打印成pdf就行。网站页面如下图所示：<br><img src="http://ocp8aowoj.bkt.clouddn.com/I94Form.png" alt="I94Form"></p>
<p>我还没有来的及买保险，过两天再说吧，就带了500美金，也没有办银行卡，所以比较尴尬。</p>
<h1 id="随便逛逛"><a href="#随便逛逛" class="headerlink" title="随便逛逛"></a>随便逛逛</h1><p>把check-in的东西搞清楚了，接下来就是熟悉一下基本的生活情况了。VT的中国学生组织做了一个<a href="http://ocp8aowoj.bkt.clouddn.com/vtguide.pdf" target="_blank" rel="external">攻略</a>，我觉得挺好的。我觉得目前最重要的事情就是办个银行卡，然后想办法换美金😂。</p>
<h1 id="办银行卡"><a href="#办银行卡" class="headerlink" title="办银行卡"></a>办银行卡</h1><h1 id="购物"><a href="#购物" class="headerlink" title="购物"></a>购物</h1><h1 id="上学"><a href="#上学" class="headerlink" title="上学"></a>上学</h1>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;From now, begining new life.&lt;/strong&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="留学" scheme="http://yoursite.com/categories/%E7%95%99%E5%AD%A6/"/>
    
    
      <category term="美国" scheme="http://yoursite.com/tags/%E7%BE%8E%E5%9B%BD/"/>
    
      <category term="旅行" scheme="http://yoursite.com/tags/%E6%97%85%E8%A1%8C/"/>
    
  </entry>
  
  <entry>
    <title>九天学者-VT访学记之一：出发</title>
    <link href="http://yoursite.com/2017/03/23/2017-03-23-visiting-vt-departure/"/>
    <id>http://yoursite.com/2017/03/23/2017-03-23-visiting-vt-departure/</id>
    <published>2017-03-23T12:02:56.000Z</published>
    <updated>2017-03-24T15:58:40.000Z</updated>
    
    <content type="html"><![CDATA[<p><center><strong><font face="STKaiti" ,="" size="6">早发杭州城</font></strong></center>  </p>
<p><center> <strong><font face="STHeiti" ,="" size="6">九天学者</font></strong></center></p>
<p><center><font face="STFangsong" ,="" size="6"><font color="#00FF00"> 朝辞杭城云影间 </font></font></center> </p>
<p><center>万里美帝一日还  </center></p>
<p><center>俯瞰东瀛富士山 </center> </p>
<p><center>银装素裹云外颠 </center> </p>
<p><center>孤身萤窗万卷书 </center> </p>
<p><center>归来谁笑腹空虚 </center> </p>
<div align="center"><br><br><br><div align="center"><img src="http://ocp8aowoj.bkt.clouddn.com/gotovt.png"></div>

<a id="more"></a>
<h1 id="整理行李"><a href="#整理行李" class="headerlink" title="整理行李"></a>整理行李</h1><p>首先需要了解自己所乘坐的航班对行李的要求，我这个是可以带两个箱子。为了方便，决定带一大一小，大的托运，小的登机（装电脑什么的贵重物品）。  </p>
<h2 id="什么不该带"><a href="#什么不该带" class="headerlink" title="什么不该带"></a>什么不该带</h2><p>事先在网上查阅或者请教同学同事，看去美国有什么东西不能带的。美国检查很严，肉类的坚决不能带（超市买的牛肉干也不行）。反正我是决定什么吃、液体之类的都不带，坚决不带<strong>侥幸心理</strong>。不过为了在旅途中过得更愉快一点，我还是带了一些小吃，但是必须保证入关下飞机前吃完，吃不完就留在飞机上由机组人员处理。<br>其他衣服什么的东西根据自己需要，不超重就行。我是没怎么带衣服，就两件衬衫一个牛仔裤，不够穿就在当地买。  </p>
<h2 id="整理方案"><a href="#整理方案" class="headerlink" title="整理方案"></a>整理方案</h2><p>将最重要的文件（护照，DS2019表等入关有关的文件）放在背包里；贵重物品（如电脑）、易碎物品（如喜欢的玻璃杯）放在登机箱里；旅途中用不到的东西就放在大箱子里托运（如衣服、吹分机、床单被套之类的）。  </p>
<blockquote>
<p><strong>tips</strong>:最好是买一个带有海关锁的箱子，这样即使你用密码锁锁了箱子，海关依然可以用通用要是打开进行检查，不至于他们暴力撬锁损坏箱子。</p>
</blockquote>
<h1 id="抵达机场"><a href="#抵达机场" class="headerlink" title="抵达机场"></a>抵达机场</h1><p>在起飞前两天一定估算好到达机场的时间，至少要在<strong>起飞前1小时到达登机口</strong>（这是保守做法，以免出现意外带来经济损失）。从我的经验看，从你到达机场开始办理登记手续——边检——安检——登机口（有些登机口会很远），至少留出两小时通过这些流程。因此必须在起飞前至少三小时抵达机场。<br>我的航班是12:30起飞，我早上从杭州乘坐最早一班（6:50）的高铁到上海虹桥站，接着转地铁去浦东机场。路上花了大约两小时，9点多到达浦东机场，人非常多，排很长队。一开始规规矩矩的排队托运行李——边检，花了很长时间。最后距离登机时间仅有二十分钟才到安检口，这时候一定不能老老实实正常排队了，不然肯定悲剧。我找到了工作人员安排我去特别通道，但这里也是不少人，时间太紧只能悄悄插队了（如果时间充裕不建议这么做）。最后还是在起飞前30分钟到达了登机口。吓死宝宝了。 </p>
<blockquote>
<p><strong>经验</strong>：从浦东机场乘坐国际航班，如果起飞时间是12:00以前，建议（杭州乘客）还是前一天晚上到上海或者浦东机场附近住下来。</p>
</blockquote>
<h1 id="入关"><a href="#入关" class="headerlink" title="入关"></a>入关</h1><p>其实很容易，可惜我的两包牛肉干啊，下飞机前就交给机组人员了。入关的时候根本就没看我的行李。可能底特律管的比较松吧。基本流程就是：  </p>
<ol>
<li><strong>海关登记</strong>：把护照和DS2019交给海关人员，盖章，然后采集指纹。问了我去哪里就完了。  </li>
<li><strong>取行李</strong>：过了海关就是行李转盘了，上面都有显示屏的，找到自己航班对应的转盘拿走行李即可。记得看看行李上的条码还在不在。  </li>
<li><strong>入关检疫</strong>：一般要求不能带肉类什么的，可是他根本就没看我的东西，就这么走出来了。上次去德国也是这样的，可能是我看起来就是个大好人，不会违反规定吧😎。  </li>
<li><strong>转机-行李托运</strong>：如果航班是链接的，直接在国内柜台一起办理了后续转机航班的登机牌（有座位号但可能没有登机口序号）。在办理入关手续以后，带着行李跟着“To all flights”或者“Connect flight A,B and C…”指示牌往前走。期间都有工作人员，可以问他们；或者他们会引导你往前走的。在安检之前会有几个黑人哥们在行李托运口等着，旁边有个传送带，你把刚才从转盘上取下来的箱子交给他们就可以了（他们应该是根据箱子上面的条形码判断这个行李是该分配给哪个航班，具体你就不用管了）。如果后面还有转机，那一般不用管行李，会自动转运的（<strong>不过还是以买机票时候的信息为准</strong>）。  </li>
<li><strong>安检</strong>：早上在上海安检了一次，这里依然需要一次安检。会被要求脱外套和鞋子、脱皮带、还有电脑和充电宝，统统放在盒子里面过安检。电脑不拿出来会耽误时间的，他们依然会自己拿出来再过一次安检的。  </li>
<li><p><strong>登机口候机</strong>：现在已经成功入关、托运完行李并通过了安检。现在就可以去登机口候机了。安检完了前面会有显示屏上面有各个航班的登机口信息，太多了我是没找到我的，看的眼睛都花了。我还是喜欢用新科技，这里强烈推荐一款实用的app——<strong>航旅纵横</strong>，只要你的手机联网，就可以轻松查到你的航班信息（包括登机口），了如指掌。底特律是达美航空（Delta Airline）的总部所在地，所以整个一栋楼都是他家的登机口，总共有几百个（先确定你是A,B,C哪一个，门口有好几个底图可以看，很容易找到）。所以如果运气不好的话，需要走很长一段路（我的是A64，走了挺长一段）。现在如果还有时间（最好是将手机调到美国时间，这样方便一些）的话可以到处逛逛或者找个环境好点的地方拿出ipad或者mac做点自己的事情，享受这段美好的时光。我的这篇博文就是在底特律转机的时候写的，我预留了三个小时，不过今天一切都很顺利，一个小时多一点就办完了。  </p>
</li>
<li><p><strong>亚特兰大转机</strong>：在底特律机场转机的时候可能运气好，办完手续就在A区，正好是转机的区域。可是到了亚特兰大发现这里真是大，下飞机是A区，下一班飞往罗阿诺克的登机口是D16。这里总共有A,B,C,D,E,F,T(Concourse：这个词是广场、大厅的意思，就理解为不同登机口区域吧)，需要坐地铁去不同区域，步行貌似很远。从A区一直往前走到A19，下楼梯就是地铁口了。上车之后经过B,C到达D，下车后直接上楼梯就是D区域登机口，跟着指示牌就很容易找到。  </p>
<blockquote>
<p><strong>tips</strong>:机场有饮用水可以接，也有咖啡和饮料买。我看买咖啡的人挺多的貌似还不便宜，所以我就用自己的杯子接了些水（都是冷的）。   </p>
<h1 id="接机"><a href="#接机" class="headerlink" title="接机"></a>接机</h1><p>租房的时候认识的彭大哥（清华博士）和他的朋友孙大哥（哈工大博士），是他们开车去诺阿诺克接我的。幸好有人接，太远了，开车走了四十多分钟，已经晚上一点了。虽然下飞机前真是困到不行，完了在车上聊了会天感觉好点了。ROA不大，他们就直接在行李认领转盘那里等我的，很容易找到了，而且我也开了全球通很方便联系。</p>
</blockquote>
</li>
</ol>
<blockquote>
<p><strong>tips</strong>:其实可以带点面包什么的，不然这么晚到了之后第二天早上没啥吃，有点尴尬。不过我比较幸运，那俩哥们第二天早上帮我带了面包过来。</p>
</blockquote>
</div>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;center&gt;&lt;strong&gt;&lt;font face=&quot;STKaiti&quot;, size=&quot;6&quot;&gt;早发杭州城&lt;/font&gt;&lt;/strong&gt;&lt;/center &gt;  &lt;/p&gt;
&lt;p&gt;&lt;center&gt; &lt;strong&gt;&lt;font face=&quot;STHeiti&quot;, size=&quot;6&quot;&gt;九天学者&lt;/font&gt;&lt;/strong&gt;&lt;/center &gt;&lt;/p&gt;
&lt;p&gt;&lt;center&gt;&lt;font face=&quot;STFangsong&quot;, size=&quot;6&quot;&gt;&lt;font color=&quot;#00FF00&quot;&gt; 朝辞杭城云影间 &lt;/center &gt; &lt;/p&gt;
&lt;p&gt;&lt;center&gt;万里美帝一日还  &lt;/center &gt;&lt;/p&gt;
&lt;p&gt;&lt;center&gt;俯瞰东瀛富士山 &lt;/center &gt; &lt;/p&gt;
&lt;p&gt;&lt;center&gt;银装素裹云外颠 &lt;/center &gt; &lt;/p&gt;
&lt;p&gt;&lt;center&gt;孤身萤窗万卷书 &lt;/center &gt; &lt;/p&gt;
&lt;p&gt;&lt;center&gt;归来谁笑腹空虚 &lt;/center &gt; &lt;/font&gt;&lt;/p&gt;
&lt;div align=center&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;div align=center&gt;&lt;img src=&quot;http://ocp8aowoj.bkt.clouddn.com/gotovt.png&quot; /&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="留学" scheme="http://yoursite.com/categories/%E7%95%99%E5%AD%A6/"/>
    
    
      <category term="美国" scheme="http://yoursite.com/tags/%E7%BE%8E%E5%9B%BD/"/>
    
      <category term="旅行" scheme="http://yoursite.com/tags/%E6%97%85%E8%A1%8C/"/>
    
  </entry>
  
  <entry>
    <title>注释代码的正确姿势之一：Fortran</title>
    <link href="http://yoursite.com/2017/03/19/2017-03-19-Doxygen/"/>
    <id>http://yoursite.com/2017/03/19/2017-03-19-Doxygen/</id>
    <published>2017-03-19T01:30:35.000Z</published>
    <updated>2017-03-21T09:57:22.000Z</updated>
    
    <content type="html"><![CDATA[<ul>
<li>相信用过<a href="http://www.vtk.org/doc/release/7.1/html/index.html" target="_blank" rel="external">VTK</a>的同学一定对其说明文档很熟悉，并获益不少。他的说明文档是如此的强大，是怎么制作的呢？这将是本文的重点。  </li>
</ul>
<h1 id="实例：-fatiando-document"><a href="#实例：-fatiando-document" class="headerlink" title="实例： fatiando document"></a>实例： <a href="http://cosscholar.coding.me/fatiando_doc/inherits.html" target="_blank" rel="external">fatiando document</a></h1><div align="center"><img src="http://ocp8aowoj.bkt.clouddn.com/doxygen_logo.gif"></div>

<a id="more"></a>
<ul>
<li>可能有人会问，做这个文档有啥用？那么我告诉你，有如此问题说明你对计算机程序接触的还很初步，不适合看本文。至少在你没有写过大型程序，或者根本就没用过开源的大型程序。  </li>
<li>因为对于一个类似于VTK这样的大型函数库，其C++类就有几百个，每个类的功能是什么？如何调用？它有哪些成员变量？成员函数？类与类之间的关系又是如何？对于这些问题如果没有很好的方法表达，你要看懂几乎是不可能的，更别谈使用和修改了。</li>
<li>本人最近就在修改/开发一个热液系统模拟的程序，这个程序是Lewis博士用Fortran写的，总共有81和Fortran函数和文件。刚开始接触到这个根本读不下去，简直让人奔溃。后来各种不断的折腾，终于知道怎么用<a href="http://www.stack.nl/~dimitri/doxygen/download.html" target="_blank" rel="external">Doxygen</a>自动生成文档了。下面就是我要讲的经验。  </li>
</ul>
<h1 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h1><p>在Mac的终端输入命令：<code>brew install doxygen</code>即可。</p>
<h2 id="Graphviz"><a href="#Graphviz" class="headerlink" title="Graphviz"></a><a href="http://www.graphviz.org" target="_blank" rel="external">Graphviz</a></h2><p>这是配合Doxygen一起使用自动生成函数/类之间依赖关系图的工具。<br>可以在官网上<a href="http://www.pixelglow.com/graphviz/download/" target="_blank" rel="external">下载GUI版</a>，也可以使用brw安装：<code>brew install graphviz</code>。<br>摘要里面的依赖图就是用这个做出来的。</p>
<h2 id="MathjAX"><a href="#MathjAX" class="headerlink" title="MathjAX"></a><a href="https://github.com/mathjax/MathJax.git" target="_blank" rel="external">MathjAX</a></h2><p>这个是为了在注释过程中书写数学公式，这个一般是网络版服务器上用的，但也可以下载到本地使用。利用如下命令安装：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo git <span class="built_in">clone</span> https://github.com/mathjax/MathJax.git /opt/MathJax</div></pre></td></tr></table></figure></p>
<p>将这个安装地址填入配置文件中的<code>MATHJAX_RELPATH</code>参数（如下）。</p>
<ul>
<li><strong>注释中的使用：</strong> <code>\f$ \alpha + \eta \f$</code>，使用<code>\f$</code>括起来，书写是与Latex一致的。</li>
</ul>
<h1 id="配置使用"><a href="#配置使用" class="headerlink" title="配置使用"></a>配置使用</h1><p>对于一个新的项目，只需要在终端输入命令<code>doxygen -s -g</code>即可，会自动生成一个以<a href="ttp://ocp8aowoj.bkt.clouddn.com/Doxyfile" target="_blank" rel="external">Doxyfile</a>为文件名的配置文件。这里的-s命令是生成一个简化的版本，如果去掉这个参数则会生成一个完整的。然后在配置文件里面修改参数即可。主要的几个参数如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">PROJECT_NAME           = FISHES</div><div class="line">PROJECT_NUMBER         = 1.3</div><div class="line">OUTPUT_DIRECTORY       = ../fortran/FISHES</div><div class="line">EXTRACT_ALL            = YES</div><div class="line">EXTRACT_STATIC         = YES</div><div class="line">EXTRACT_LOCAL_CLASSES  = YES</div><div class="line"><span class="comment"># 使用graphviz</span></div><div class="line">HAVE_DOT               = YES</div><div class="line">CALL_GRAPH             = YES</div><div class="line">CALLER_GRAPH           = YES</div><div class="line">DOT_IMAGE_FORMAT       = svg</div><div class="line"><span class="comment"># 使用mathjax</span></div><div class="line">USE_MATHJAX            = YES</div><div class="line">MATHJAX_RELPATH        = /opt/MathJax</div><div class="line"><span class="comment"># 使用Markdown（主页等）和fortran 90</span></div><div class="line">FILE_PATTERNS          = *.c \</div><div class="line">                         *.md \</div><div class="line">                         *.f90 \</div></pre></td></tr></table></figure></p>
<h1 id="Fortran注释规范"><a href="#Fortran注释规范" class="headerlink" title="Fortran注释规范"></a>Fortran注释规范</h1><p>参考<a href="http://www.dougdevel.org/index.php" target="_blank" rel="external">DOUG</a>，这是个很好的学习素材。将其代码下载，然后稍微修改一下配置文件（<code>INPUT</code>）即可生成文档。下面是我在使用过程中的总结。</p>
<h2 id="普通注释"><a href="#普通注释" class="headerlink" title="普通注释"></a>普通注释</h2><figure class="highlight fortran"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment">!&gt; 这是个普通注释</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;相信用过&lt;a href=&quot;http://www.vtk.org/doc/release/7.1/html/index.html&quot;&gt;VTK&lt;/a&gt;的同学一定对其说明文档很熟悉，并获益不少。他的说明文档是如此的强大，是怎么制作的呢？这将是本文的重点。  &lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;实例：-fatiando-document&quot;&gt;&lt;a href=&quot;#实例：-fatiando-document&quot; class=&quot;headerlink&quot; title=&quot;实例： fatiando document&quot;&gt;&lt;/a&gt;实例： &lt;a href=&quot;http://cosscholar.coding.me/fatiando_doc/inherits.html&quot;&gt;fatiando document&lt;/a&gt;&lt;/h1&gt;&lt;div align=center&gt;&lt;img src=&quot;http://ocp8aowoj.bkt.clouddn.com/doxygen_logo.gif&quot; /&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="科研经验" scheme="http://yoursite.com/categories/%E7%A7%91%E7%A0%94%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="代码注释" scheme="http://yoursite.com/tags/%E4%BB%A3%E7%A0%81%E6%B3%A8%E9%87%8A/"/>
    
      <category term="doxygen" scheme="http://yoursite.com/tags/doxygen/"/>
    
  </entry>
  
  <entry>
    <title>九天学者-VT访学记之一：前期准备</title>
    <link href="http://yoursite.com/2017/03/11/2017-03-11-visiting-vt-prep/"/>
    <id>http://yoursite.com/2017/03/11/2017-03-11-visiting-vt-prep/</id>
    <published>2017-03-11T12:02:56.000Z</published>
    <updated>2017-03-23T12:58:20.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>只要做好知识和技能的储备，随时都有机会有梦想倾向你。</p>
</blockquote>
<ul>
<li><strong>访问国家</strong>：美国</li>
<li><strong>目标高校</strong>：弗吉尼亚理工大学(<a href="http://search.vt.edu/search/person.html?person=1329805" target="_blank" rel="external">Virginia Tec</a>)，全称是Virginia Polytechnic Institute and State University<br>　　　　　全美实力最强的四大理工学院（麻省理工，加州理工，佐治亚理工学院）</li>
<li><strong>所在城市</strong>：弗吉尼亚州-黑堡(Blacksburg)<br><img src="http://ocp8aowoj.bkt.clouddn.com/vt-logo.png" alt="vt-logo"></li>
</ul>
<a id="more"></a>
<h1 id="与导师沟通"><a href="#与导师沟通" class="headerlink" title="与导师沟通"></a>与导师沟通</h1><p>我接触到这个项目是国内导师——陶教授介绍的，他在2016年AGU会议上认识了Bob教授，对其研究非常感兴趣。当时就跟组里其他同学征求意见，看有谁想去学习的。貌似都推三阻四，没人想去，最后想到了我。简单了解之后，激起了我的兴趣，因为这个方向涉及到物理、化学、数学，还有及其的是计算机编程。陶老师在培养学生方面真是没的说，只要你肯努力，无不支持。当时建议我赶紧准备，在他的引荐之下正式认识了Bob教授。从16年12月开始，就一直持续不断跟Bob通邮件，讨论研究问题以及准备前往VT进行交流（暂定3个月）的事宜。值得肯定的是外导虽然年纪大了，但是相当的热情，每次回邮件都相当及时，这对我自己也是一种鼓励。</p>
<ul>
<li><strong>感悟</strong>：虽然跟国外有文化差异，偶尔也会遇见语言障碍（误会），但总之以诚相待，尽最大努力去做每一件事情，就不会有问题。其实语言并不是人与人沟通的最大障碍，前提是有一点语言基础。<h1 id="办理签证"><a href="#办理签证" class="headerlink" title="办理签证"></a>办理签证</h1>说到办理签证的事情，那真是挫折不断。这个故事需分两部分来讲。</li>
</ul>
<h2 id="B1-B2签证（失败）"><a href="#B1-B2签证（失败）" class="headerlink" title="B1/B2签证（失败）"></a>B1/B2签证（失败）</h2><p>一开始我们这边决定办理B1签证（旅游、商务及就医等），官方说明也包含3个月以下的学术交流（现在回想估计是那种国际会议，短期培训之类的）。把这个想法告诉Bob之后，他表示反对。他认为应该办理J1签证，因为这个事儿我跟做了不少解释，最后我直接联系了VT的国际合作处（International Service），他们的负责人说三个月以下可以通过B1来访。然后我将这个邮件抄送给Bob，他才同意，也表示抱歉，之前造成的误会。最后也让IS开了正式的邀请函。  </p>
<ul>
<li><strong>预约面谈时间</strong>： 办理美国签证跟欧洲签证很不一样，需要提前其官网上注册账号，根据里面的步骤走就行了。<br><strong>缴费</strong>：只能通过中信银行缴费：网银或者柜台。<br><strong>DS160表</strong>： 签证申请页面会有DS160表的填表链接（这是一个关于你签证申请和个人的相关信息的）。如实填写，填完以后将DS160表的编号备份在电脑上，以后可以直接用这个编号调出你的表；也可以将表格数据保存在电脑里，下次申请新的签证的时候，需要重新填写DS160表，可以将这个数据直接导入，在上面修改就行。  </li>
<li><strong>面签</strong>： 准备了各种B1签证需要的材料，兴高采烈的去北京的美国大使馆面签。签证官（Visa Officor）问我干嘛去的，我就老老实实的说去学术交流，我们跟Bob之间有一个合作研究…。VO就要了我的邀请函看了看，然后就去了后台嘀咕了一会，出来就在系统里面码字。码完字了就告诉我：你的签证申请不能被受理，需要联系VT申请J1。听到这个简直我就懵逼了，还没开始就结束了，心情很低落。出了大使馆就赶紧跟导师打电话汇报了这个噩耗，陶老师表示很是理解，说没关系，我们接着申请J1。  <blockquote>
<p>惨痛教训：<strong>办理美国签证一定要注意不能带除了申请材料意外的任何东西</strong>。要是任性或者侥幸心理带了几样（比如手机、U盘），那你一定会有经济损失的，因为大使馆外面的大爷大妈就专干这个的（存包），超级贵。当然了要是有人陪同那另说了。</p>
</blockquote>
</li>
<li><strong>沉思</strong>： 后来我们想了想，这样肯定是会失败的。因为邀请信里面说的是去作为visiting scholar，那VO肯定不干，能拒就拒。其实是我们太诚实了，当时要是不说是访问学者，编一个旅游或者商务旅行估计也行的。 <strong>不过还是不要冒险，最好诚实，万一被识破撒谎，整个不良记录就得不偿失了。还是按照正规途径走。</strong><h2 id="J1签证（非常顺利）"><a href="#J1签证（非常顺利）" class="headerlink" title="J1签证（非常顺利）"></a>J1签证（非常顺利）</h2>B1被拒后，基本上邻近春节了，而且激情也被消减了不是，一度有放弃的想法。不得不承认，领导就是有领导的感染力，回到杭州以后，跟导师聊了一会，还是很励志的。接着跟Bob联系申请J1，经过他与IS的沟通：申请J1没问题，可是需要英语考试成绩。考雅思或者托福显然是不现实的，最后看了官方的说明之后发现可以通过与VT的语言部门面试获得英语水平证明。  </li>
<li><strong>英语面试</strong>： 虽然之前去过EGU跟老外交流过，也跟我的德国老师视频面试过（很愉快）。但是跟跟美国人面试还是有点虚，决定把这个事情放到春节收假以后进行（可能是潜意识有种逃避的意思）。过完年回来还是决定尝试一把，网上报名（100$报名费）后选择了2017年2月6日晚上9点（VT的早上八点）进行SKYPE面试。<br><strong>面试前准备</strong>： 在这之前的两天，在网上搜索了一些关于视频面试的注意事项和基本问题，做了一定的准备。当天我吃完饭饭就回家了，调试网络换衣服什么的。换了正式的服装，然后在面试开始前10分钟再skype上跟面试官——Eric Moore留言说我准备好了。（<strong>在此特别感谢我的女神满霞同学。</strong>她给了我很大的鼓励，面试前先跟她视频了一会，给了不少建议）。<br><strong>正式面试</strong>： 跟我想象的完全不一样，面试其实很随意。Eric大哥早上刚到办公室，我们寒暄了一下，他说他“感冒了”。然后在趁他到咖啡的时候，我就开始自我介绍说个不停，他也听懂了我的意思说很好，那我们现在切换个话题：”平时有空闲时间都做什么运动？”；“加入你来了美国，最想去哪个城市？”；“最喜欢哪部美国电影？”其他几个问题不不记得了，反正都是很生活化的，很容易回答，而且我回答的也挺流利。总共15分钟，最后他说恭喜你通过了面试，他会出一份语言报告发给我。  </li>
<li><p><strong>DS2019表</strong>：这个表示办理J1签证必须要有的材料，是由对方学校的相关部门提供的。上面说的语言证明就是这个申请表所必须的一项材料。其他的材料很简单，无非是护照复印件、资助证明等，外导会将材料清单发过来，逐个提供就行了。其他事情都是导师搞定了，在这期间他们会跟国内的公安机关联系，确认申请人有无犯罪记录等。其实这个过程挺快的，从开始申请–面试–拿到DS2019原件，总共用了42天（当然这期间包括回家过春节，还有一些纠结的过程耗的时间），其实最短30天就可办完。Bob是通过UPS快递发给我原件的，速度相当快，三天不到就从弗吉尼亚到杭州了。  </p>
</li>
<li><p><strong>SEVIS缴费</strong>：可以用信用卡缴费，这个是必须的。面签以及到学校之后登记都需要这个的。</p>
</li>
<li><p><strong>预约面签</strong>：我是直接在上次DS160的基础上修改的，当然了签证类型不同了，这次是J1。需要填入<strong>SEVIS</strong>编号和<strong>program</strong>编号。<strong>注意</strong>：在最后确认预约面谈时间之前一定确认你系统里的DS160编号是不是你最新填的DS160的编号。</p>
</li>
<li><p><strong>面签</strong>：这次做了充足的准备，胸有成竹。一开始就跟签证官用英文交流。他人很和蔼，我把必须的那几样材料递给他，然后说我这里还有一些支持材料，需要的话告诉我。他说“very good”，然后就问了我一个简单的问题：who provide the funding?。最后他在DS2019表上洋洋洒洒的签了大名并盖了章，把所有材料都还给我了，只留下了护照，我准备的两张照片也没要。同时还给了我一个<strong>绿色</strong>的一张纸，上面写了祝贺你通过。好像被审查的是给一张<strong>黄色</strong>的纸。</p>
</li>
</ul>
<blockquote>
<p><strong>tips</strong>:我个人喜欢安静一点的环境，因为太吵了我容易分散注意力。美国大使馆（在北京的）面谈窗口除了正面的那几个之外，还有右手边一个通道也有好多窗口。如果不喜欢人多环境的，建议选择去这里。第一次去面谈的时候是在正面的那个窗口，本来紧张在加上人很吵，签证官说什么基本听不清。这种环境下说中文我都不一定听得清，别说英文了。</p>
<p><strong>何时拿到护照</strong>：我周五上午面签的，选择的是快递到杭州。下周三就收到了护照，非常快速。EMS很给力，从北京发出到我收到件总共一天时间。</p>
</blockquote>
<h1 id="租房"><a href="#租房" class="headerlink" title="租房"></a>租房</h1><p>收到DS2019表之后我就开始断断续续的找房子了，在DS2019表一起也附带了一些VT入学指南，上面有几个官方提供的租房网站，可是我查了都挺贵的。<br><strong>哪里有好学校，哪里就有很多中国人</strong>，VT也不例外，也有华人学生组织，而且也有官方论坛，这里有租房信息。我就是在这个上面一个个发邮件问的，正好有一个清华的哥们三月底回国，而且也很热情，交了1000元定金就这么决定了。<br>他还帮我找了接机的同学，因为我的航班到达时间是晚上十二点多。花40刀还是值得的。</p>
<h1 id="订机票"><a href="#订机票" class="headerlink" title="订机票"></a>订机票</h1><p>其实当你预定了面签时间之后就可以着手机票的事了，最早能出发的日期为面签时间向后推一个星期。<br>如果我们有了既定的行程计划，最好是买返程机票，这样会便宜非常非常多（单程最低7K元，返程只需要5K不到）。其次就是航班选择需要注意的几个事项了。  </p>
<ul>
<li><strong>中转预留时间</strong>： 至少3小时，因为要办理入关手续也有可能换航站楼。我是从上海飞到底特律入关，然后从底特律到亚特兰大，在从亚特兰大到罗阿诺克。  </li>
<li><strong>到达时间</strong>：最好是白天（下午五点之前）到达，否则需要联系好接机。  </li>
<li><strong>价格</strong>：虽然是公费，但也是有必要淘一淘最低价机票，毕竟都是纳税人的钱啊，不能浪费。我用的是阿里巴巴的<strong>飞猪</strong>旅行app筛选的，感觉这个要比<strong>携程</strong>便宜一些。淘机票也是很费神的，考虑好几个因素，有时候返程时间也是会影响机票价格的（比如回程时间6月28要比6月29贵一千多），这都要多试试，只要在你大概的时间计划范围内就行。</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;只要做好知识和技能的储备，随时都有机会有梦想倾向你。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;访问国家&lt;/strong&gt;：美国&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;目标高校&lt;/strong&gt;：弗吉尼亚理工大学(&lt;a href=&quot;http://search.vt.edu/search/person.html?person=1329805&quot;&gt;Virginia Tec&lt;/a&gt;)，全称是Virginia Polytechnic Institute and State University&lt;br&gt;　　　　　全美实力最强的四大理工学院（麻省理工，加州理工，佐治亚理工学院）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;所在城市&lt;/strong&gt;：弗吉尼亚州-黑堡(Blacksburg)&lt;br&gt;&lt;img src=&quot;http://ocp8aowoj.bkt.clouddn.com/vt-logo.png&quot; alt=&quot;vt-logo&quot;&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="留学" scheme="http://yoursite.com/categories/%E7%95%99%E5%AD%A6/"/>
    
    
      <category term="美国" scheme="http://yoursite.com/tags/%E7%BE%8E%E5%9B%BD/"/>
    
      <category term="旅行" scheme="http://yoursite.com/tags/%E6%97%85%E8%A1%8C/"/>
    
  </entry>
  
  <entry>
    <title>Sphinx炼成记</title>
    <link href="http://yoursite.com/2017/03/03/2017-03-03-sphinx/"/>
    <id>http://yoursite.com/2017/03/03/2017-03-03-sphinx/</id>
    <published>2017-03-03T19:29:46.000Z</published>
    <updated>2017-12-01T11:51:34.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://matplotlib.org/_static/logo2.svg" alt="hydrothermal"></p>
<blockquote>
<p>Latex虽然强大，但是不适合做在线文档。最吸引我的一个在线文档就是<a href="http://matplotlib.org/gallery.html" target="_blank" rel="external">MatplotLib</a>官方网站上的<strong>Gallery</strong>，将图像和代码结合在一起，查询和学习起来非常方便。一直以来就像折腾一下Sphinx，但是没下决心，从现在开始我将从0开始学习Sphinx的点点滴滴记录下来。</p>
</blockquote>
<a id="more"></a>
<h1 id="第一天"><a href="#第一天" class="headerlink" title="第一天"></a>第一天</h1><h2 id="安装sphinx"><a href="#安装sphinx" class="headerlink" title="安装sphinx"></a>安装sphinx</h2><p>安装sphinx非常简单，直接在终端输入命令:<code>easy_install -U sphinx</code>等待完成即可。前提是你必须安装了python，我安装的是anaconda，python的版本是2.7. 完成之后应该会是如下的显示<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">Searching <span class="keyword">for</span> sphinx</div><div class="line">Reading https://pypi.python.org/simple/sphinx/</div><div class="line">Downloading https://pypi.python.org/packages/a7/df/4487783152b14f2b7<span class="built_in">cd</span>0b0c9afb119b262c584bf972b90ab544b61b74c62/Sphinx-1.5.3.tar.gz<span class="comment">#md5=6a9522761bde569a3d50cc4509e313d9</span></div><div class="line">Best match: Sphinx 1.5.3</div><div class="line">Processing Sphinx-1.5.3.tar.gz</div><div class="line">Writing /var/folders/lt/s5pnwvx97gg1yqqtdf363ljc0000gn/T/easy_install-rt2YYP/Sphinx-1.5.3/setup.cfg</div><div class="line">Running Sphinx-1.5.3/setup.py -q bdist_egg --dist-dir /var/folders/lt/s5pnwvx97gg1yqqtdf363ljc0000gn/T/easy_install-rt2YYP/Sphinx-1.5.3/egg-dist-tmp-_AW5_W</div><div class="line">warning: no files found matching <span class="string">'sphinx/locale/.tx/config'</span></div><div class="line">no previously-included directories found matching <span class="string">'doc/_build'</span></div><div class="line">no previously-included directories found matching <span class="string">'sphinx/locale/.tx'</span></div><div class="line">creating /Users/kakushi/anaconda/lib/python2.7/site-packages/Sphinx-1.5.3-py2.7.egg</div><div class="line">Extracting Sphinx-1.5.3-py2.7.egg to /Users/kakushi/anaconda/lib/python2.7/site-packages</div><div class="line">Adding Sphinx 1.5.3 to easy-install.pth file</div><div class="line">Installing sphinx-apidoc script to /Users/kakushi/anaconda/bin</div><div class="line">Installing sphinx-build script to /Users/kakushi/anaconda/bin</div><div class="line">Installing sphinx-quickstart script to /Users/kakushi/anaconda/bin</div><div class="line">Installing sphinx-autogen script to /Users/kakushi/anaconda/bin</div><div class="line"></div><div class="line">Installed /Users/kakushi/anaconda/lib/python2.7/site-packages/Sphinx-1.5.3-py2.7.egg</div><div class="line">Processing dependencies <span class="keyword">for</span> sphinx</div><div class="line">Finished processing dependencies <span class="keyword">for</span> sphinx</div></pre></td></tr></table></figure></p>
<h2 id="创建sphinx文档"><a href="#创建sphinx文档" class="headerlink" title="创建sphinx文档"></a>创建sphinx文档</h2><p>新建一个目录，专门存放sphinx文档项目。我这里也配合了git同步到coding或者github上。于新建的这个目录下，在终端中输入命令:<code>sphinx-quickstart</code>，sphinx会自动处理文档系统所需的每一个步骤，你只需要关注项目名称和作者以及版本就行，其他的都可以一路下一步。<br>创建完毕之后会提示你：同时也创建了一个makefile，用于生成文档（关于makefile的使用请自行学习）。<br>生成pdf: <code>make latexpdf</code>，会在<code>./_build/latex</code>目录下生成一个以你项目名称命名的pdf文档。<br>上面这些步骤都是默认的，那么如何写自己的文档呢？</p>
<h2 id="创建自己的文本并编译"><a href="#创建自己的文本并编译" class="headerlink" title="创建自己的文本并编译"></a>创建自己的文本并编译</h2><p>创建一个source文件夹，如果有就省略此步骤。然后确定<code>conf.py</code>和<code>index.rst</code>两个文件在source目录下，然后需要修改makefile内容<code>SOURCEDIR     = source</code>（指定代码路径）。<br>现在可以创建自己的文档了，在source目录下创建一个<code>helloworld.rst</code>文件（当然文件名你可以随便命名），里面内容：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">The first file of cosscholar</div><div class="line">=================================</div><div class="line"></div><div class="line">my first sphinx text, perfect</div></pre></td></tr></table></figure></p>
<p>然后修改<code>index.rst</code>，添加这个文档进来:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Welcome to Test of sphinx</div><div class="line">================================</div><div class="line"></div><div class="line">.. toctree::</div><div class="line">   :maxdepth: 1</div><div class="line">   </div><div class="line">   helloworld</div></pre></td></tr></table></figure></p>
<p>最后在主目录下运行命令<code>make html</code>或者<code>make latexpdf</code>，前者是生成html，后者是pdf，可以在_build目录下查看。注意：目前这个步骤坐下来，是不支持中文文档的，如果要支持中文，请另外折腾。</p>
<h2 id="部署到Read-the-Docs"><a href="#部署到Read-the-Docs" class="headerlink" title="部署到Read the Docs"></a>部署到<a href="https://readthedocs.org" target="_blank" rel="external">Read the Docs</a></h2><p>我最初的想法是将文档项目的代码托管到coding上（因为国内服务器快一些），然后把coding的项目链接到Read teh docs上。可是貌似只能与GitHub链接。<br>试了一把，部署的慢到哭，所以暂且不折腾这个，直接在本地自己查看就行，在浏览器中加入书签。一个项目整晚了在决定发布的问题吧。</p>
<h2 id="sphinx主题"><a href="#sphinx主题" class="headerlink" title="sphinx主题"></a>sphinx主题</h2><p>fatiando中用到的主题貌似是<code>sphinx_bootstrap_theme</code>可以通过pip安装，刚刚测试了一下fatiando的文档，发现他用了gallery功能，先安装一下试试<code>pip install sphinx_gallery</code>. Fatando的文档系统是一个很好的例子，可以参考学习。没毛病，就是这两个库，安装了就好了，编译通过，跟官网上的一模一样。</p>
<h1 id="第二天"><a href="#第二天" class="headerlink" title="第二天"></a>第二天</h1><p>准备工作做完了，也有了参考资料，那么接下来自己做一个看看。</p>
<h2 id="以sphinx-bootstrap-theme主题自己做一个文档"><a href="#以sphinx-bootstrap-theme主题自己做一个文档" class="headerlink" title="以sphinx_bootstrap_theme主题自己做一个文档"></a>以<a href="http://ryan-roemer.github.io/sphinx-bootstrap-theme/index.html#" target="_blank" rel="external">sphinx_bootstrap_theme</a>主题自己做一个文档</h2><p>Sphinx其中一个最主要的功能就是做程序的说明文档及cookbook。</p>
<h2 id="automudule"><a href="#automudule" class="headerlink" title="automudule"></a>automudule</h2><p>自动加载程序模块，呈现函数及类的说明，但是可以隐藏代码，不过有显示代码的链接按钮。</p>
<p>使用这个功能之前，需要在<code>conf.py</code>中做一些设置：</p>
<ul>
<li><p>添加程序包的目录：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line">sys.path.append(<span class="string">'/Users/kakushi/Study/CoScholar_Py'</span>) <span class="comment">#这是个例子</span></div></pre></td></tr></table></figure>
</li>
<li><p>扩展中添加<code>autodoc</code>功能：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">extensions = [</div><div class="line">    <span class="string">'sphinx.ext.autodoc'</span>,    <span class="comment">#就是这一项</span></div><div class="line">    <span class="string">'sphinx.ext.autosummary'</span>,</div><div class="line">    <span class="string">'sphinx.ext.coverage'</span>,</div><div class="line">    <span class="string">'sphinx.ext.mathjax'</span>,</div><div class="line">    <span class="string">'sphinx.ext.doctest'</span>,</div><div class="line">    <span class="string">'sphinx.ext.viewcode'</span>,</div><div class="line">    <span class="string">'sphinx.ext.extlinks'</span>,</div><div class="line">    <span class="string">'matplotlib.sphinxext.plot_directive'</span>,</div><div class="line">    <span class="string">'sphinx_gallery.gen_gallery'</span>,</div><div class="line">]</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h3><p>当上面几步设置完之后，在<code>.rst</code>文件中需要导入程序说明的地方加入代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.. automodule:: RWData.ReadDat</div><div class="line">    :no-members:</div><div class="line">    :no-inherited-members:</div></pre></td></tr></table></figure></p>
<p>里面的两个参数也可不要，根据情况。</p>
<h2 id="literalinclude"><a href="#literalinclude" class="headerlink" title="literalinclude"></a>literalinclude</h2><p>从文件中包含代码（比如python,bash文件等）到rst文件中，这个在创建文档中的使用情景大概是这样的:比如你利用python代码做了一张图，想在图标题添加一个超链接用于查看绘图代码。此时你可以创建一个rst文件，这个rst文件的标题就是图片的标题，然后下面的内容是<code>literalinclude</code>，参照GMT的gallary也可以在这段代码上面显示这个图片。</p>
<ul>
<li><p>rst文件内容（假如其文件名为:<code>fig.rst</code>）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">.. _HeatFlux:</div><div class="line"></div><div class="line">地球的热通量分布比例</div><div class="line">======================================</div><div class="line">根据R.P. Lowell(2014)表1的数据，利用python做出一个统计图，更直观。</div><div class="line"></div><div class="line">.. image:: ../../figure/Bob2014Elsevier_Tab1.*</div><div class="line">   :width: 25 cm</div><div class="line">   :align: center</div><div class="line">   </div><div class="line">---------</div><div class="line"></div><div class="line">.. literalinclude:: fig_Bob2014_Tab1.py</div><div class="line">   :language: python</div></pre></td></tr></table></figure>
</li>
<li><p>利用<code>ref</code>功能引用此rst文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">图1 :ref:`HeatFlux`</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>注意：<code>ref</code>这里的<code>HeatFlux</code>标签一定要与上面rst文件中的标签一致。<br>Tips: 关于程序文档的东西，可以参考fatiando和GMT进行学习。</p>
</blockquote>
<h1 id="第三天"><a href="#第三天" class="headerlink" title="第三天"></a>第三天</h1><p>经过前几天的折腾，终于找到一个编辑和预览rst的好方法，虽然还有瑕疵，但总比之前的<code>make html</code>之后才能看到效果要好的多。  </p>
<ul>
<li><strong>Atom</strong> + <strong>rst-preview-pandoc</strong><br>安装之后打开rst文件使用快捷键<code>ctrl+shift+e</code>即可实现实时预览。</li>
<li><strong>VScode</strong> + <a href="https://github.com/vscode-restructuredtext/vscode-restructuredtext" target="_blank" rel="external">reStructuredText</a>插件<br>之前也下载过着个插件，死活预览不出来。这几天不知道为什么突然就好起来了。不过我发现了有一种情况会导致预览失败：不存在的链接地址会导致预览奔溃，只能重新启动vscode才能修复这个问题。总体来说还不错，有了它就可以放弃atom了。他直接可以预览出 $6^{th}$ 天下面的那种图。</li>
</ul>
<h1 id="第四天：Plot-directive-documentation"><a href="#第四天：Plot-directive-documentation" class="headerlink" title="第四天：Plot directive documentation"></a>第四天：<a href="http://matplotlib.org/devel/documenting_mpl.html#dynamically-generated-figures" target="_blank" rel="external">Plot directive documentation</a></h1><ul>
<li><p><strong>配置</strong> ：首先在conf.py文件里面添加如下配置  </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Config of plot_directive</span></div><div class="line">plot_include_source = <span class="keyword">False</span></div><div class="line">plot_html_show_source_link = <span class="keyword">True</span></div><div class="line">plot_html_show_formats=<span class="string">'pdf'</span></div></pre></td></tr></table></figure>
</li>
<li><p><strong>rst编写</strong> ：在需要显示绘图的地方加入命令：<code>.. plot:: _static/codes/python/fig_Bob2014_Tab1.py</code>即可，下面可以直接跟图标题。</p>
</li>
</ul>
<h1 id="5-th-中文支持"><a href="#5-th-中文支持" class="headerlink" title="$5^{th}$: 中文支持"></a>$5^{th}$: 中文支持</h1><p>按照上面的步骤做的文档是不支持中文搜索的，但这个对于中国学者来说又是必须的。  </p>
<h2 id="安装中文分词插件：jieba"><a href="#安装中文分词插件：jieba" class="headerlink" title="安装中文分词插件：jieba"></a>安装中文分词插件：<a href="https://github.com/fxsjy/jieba" target="_blank" rel="external">jieba</a></h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip install jieba</div></pre></td></tr></table></figure>
<h2 id="安装中文语言包-zh-CN"><a href="#安装中文语言包-zh-CN" class="headerlink" title="安装中文语言包: zh_CN"></a>安装中文语言包: <a href="https://github.com/bosbyj/sphinx.search.zh_CN" target="_blank" rel="external">zh_CN</a></h2><ul>
<li>检查中文库是否存在<br>检查你安装的sphinx目录下有没有这个库，(我的)所在目录为：<code>/Users/kakushi/anaconda/lib/python2.7/site-packages/Sphinx-1.5.3-py2.7.egg/sphinx/search/zh.py</code>，除此之外还有<code>de</code>（德语）,<code>fr</code>和<code>ja</code>等。如果这个目录下买有<code>zh.py</code>，那就将<a href="https://github.com/bosbyj/sphinx.search.zh_CN" target="_blank" rel="external">zh_CN.py</a>然后拷贝到此目录（最好是编译一下，貌似有人说没有.pyc会出问题什么的）。</li>
<li>设置搜索语言<br>在刚才的search目录下编辑<code>_init.py</code>文件，下面是我的这部分修改结果   <figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># SearchEnglish imported after SearchLanguage is defined due to circular import</span></div><div class="line"><span class="keyword">from</span> sphinx.search.en <span class="keyword">import</span> SearchEnglish</div><div class="line"><span class="keyword">from</span> sphinx.search.zh <span class="keyword">import</span> SearchChinese</div><div class="line">languages = &#123;</div><div class="line">    <span class="string">'da'</span>: <span class="string">'sphinx.search.da.SearchDanish'</span>,</div><div class="line">    <span class="string">'de'</span>: <span class="string">'sphinx.search.de.SearchGerman'</span>,</div><div class="line">    <span class="string">'en'</span>: SearchEnglish,</div><div class="line">    <span class="string">'es'</span>: <span class="string">'sphinx.search.es.SearchSpanish'</span>,</div><div class="line">    <span class="string">'fi'</span>: <span class="string">'sphinx.search.fi.SearchFinnish'</span>,</div><div class="line">    <span class="string">'fr'</span>: <span class="string">'sphinx.search.fr.SearchFrench'</span>,</div><div class="line">    <span class="string">'hu'</span>: <span class="string">'sphinx.search.hu.SearchHungarian'</span>,</div><div class="line">    <span class="string">'it'</span>: <span class="string">'sphinx.search.it.SearchItalian'</span>,</div><div class="line">    <span class="string">'ja'</span>: <span class="string">'sphinx.search.ja.SearchJapanese'</span>,</div><div class="line">    <span class="string">'nl'</span>: <span class="string">'sphinx.search.nl.SearchDutch'</span>,</div><div class="line">    <span class="string">'no'</span>: <span class="string">'sphinx.search.no.SearchNorwegian'</span>,</div><div class="line">    <span class="string">'pt'</span>: <span class="string">'sphinx.search.pt.SearchPortuguese'</span>,</div><div class="line">    <span class="string">'ro'</span>: <span class="string">'sphinx.search.ro.SearchRomanian'</span>,</div><div class="line">    <span class="string">'ru'</span>: <span class="string">'sphinx.search.ru.SearchRussian'</span>,</div><div class="line">    <span class="string">'sv'</span>: <span class="string">'sphinx.search.sv.SearchSwedish'</span>,</div><div class="line">    <span class="string">'tr'</span>: <span class="string">'sphinx.search.tr.SearchTurkish'</span>,</div><div class="line">    <span class="string">'zh'</span>: SearchChinese,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>举一反三，其他语言也就会设置了  </p>
<ul>
<li>配置sphinx工程<br>打开你的sphinx工程的配置文件<code>conf.py</code>中最后添加<code>html_search_language = zh_CN</code>或者<code>language = &#39;zh&#39;</code>。</li>
</ul>
<h1 id="6-th-网页美化"><a href="#6-th-网页美化" class="headerlink" title="$6^{th}$: 网页美化"></a>$6^{th}$: 网页美化</h1><p>我个人比较喜欢<a href="https://github.com/ryan-roemer/sphinx-bootstrap-theme" target="_blank" rel="external">bootstrap</a>主题，而这个主题也有很多方案可供选择，比如<a href="http://bootswatch.com/cerulean/" target="_blank" rel="external">cerulean</a>，<a href="http://bootswatch.com/sandstone/" target="_blank" rel="external">Sandstone</a>和<a href="http://bootswatch.com/slate/" target="_blank" rel="external">Slate</a>等，这些都是一些CSS模板。最有意思的是这个网站免费提供网页上各种组件的代码和主题，比如按钮、进度条等。是<a href="http://bootswatch.com" target="_blank" rel="external">Bootswatch</a>，他将一些组件已经列出来了，只需要点击<code>&lt;&gt;</code>按钮就可以显示代码，将代码复制过来放在rst文件中的<code>.. raw:: html</code>下方即可，记得空一行然后tab缩进。看下图，我的网页效果。<br><img src="http://ocp8aowoj.bkt.clouddn.com/bootstrap_example.png" alt="bootstrap_example"></p>
<h1 id="生成Latex中文pdf"><a href="#生成Latex中文pdf" class="headerlink" title="生成Latex中文pdf"></a>生成Latex中文pdf</h1><p>如果要用latex生成中文pdf，则必须首先在Mac上安装<a href="https://www.texstudio.org" target="_blank" rel="external">Texstudio</a>，然后会自动安装一个用于编译中文的程序： <strong>xelatex</strong><br>。</p>
<h2 id="主要配置"><a href="#主要配置" class="headerlink" title="主要配置"></a>主要配置</h2><ul>
<li>在conf.py文件中的latex配置如下<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 中文配置：加入ctex包就行</span></div><div class="line">latex_elements = &#123;</div><div class="line">    <span class="string">'papersize'</span> : <span class="string">'a4paper'</span>,</div><div class="line">    <span class="string">'utf8extra'</span> : <span class="string">''</span>,</div><div class="line">    <span class="string">'inputenc'</span>  : <span class="string">''</span>,</div><div class="line">    <span class="string">'babel'</span>     : <span class="string">r'''\usepackage[english]&#123;babel&#125;'''</span>,</div><div class="line">    <span class="string">'preamble'</span> : <span class="string">r'''\usepackage&#123;ctex&#125;'''</span>,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>设置完成后，用命令<code>make latex</code>就可以在build目录下生成latex代码，进入latex目录用命令<code>make all-pdf</code>生成pdf。这时候会发现有错误提示，打开Makefile查看其编译器变量为<code>LATEX</code>和<code>PDFLATEX</code>：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Makefile for Sphinx LaTeX output</span></div><div class="line"></div><div class="line">ALLDOCS = $(basename $(wildcard *.tex))</div><div class="line">ALLPDF = $(addsuffix .pdf,$(ALLDOCS))</div><div class="line">ALLDVI = $(addsuffix .dvi,$(ALLDOCS))</div><div class="line">ALLPS  = $(addsuffix .ps,$(ALLDOCS))</div><div class="line"></div><div class="line"><span class="comment"># Prefix for archive names</span></div><div class="line">ARCHIVEPREFIX =</div><div class="line"><span class="comment"># Additional LaTeX options</span></div><div class="line">LATEXOPTS =</div><div class="line"><span class="comment"># format: pdf or dvi</span></div><div class="line">FMT = pdf</div><div class="line"></div><div class="line">LATEX = pdflatex</div><div class="line">PDFLATEX = pdflatex</div><div class="line">MAKEINDEX = makeindex</div></pre></td></tr></table></figure></p>
<p>因为pdflatex是无法编译中文的，所以会提示错误，把这里的变量未给xelatex即可：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">LATEX = latex</div><div class="line">PDFLATEX = xelatex</div></pre></td></tr></table></figure></p>
<p>但是每次用sphinx生成latex的时候这个makefile都会被重写，每次修改这个就显得很麻烦。这里有个一劳永逸的办法就是修改sphinx源代码。</p>
<p>打开sphinx源代码的builders目录：<br><code>/Users/kakushi/anaconda/lib/python3.6/site-packages/Sphinx-1.5.6-py3.6.egg/sphinx/builders</code><br>打开该目录下的<code>latex.py</code>文件，找到<code>default_latex_engine</code>函数（应该是在第273行），函数内容如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">default_latex_engine</span><span class="params">(config)</span>:</span></div><div class="line">    <span class="string">""" Better default latex_engine settings for specific languages. """</span></div><div class="line">    <span class="keyword">if</span> config.language == <span class="string">'ja'</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">'platex'</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">'platex'</span></div></pre></td></tr></table></figure></p>
<p>到这一步明白要干什么了吧，对，就是把这里的platex修改为xelatex，你也可以在这里多加一个判断，如果<code>config.language == &#39;zh_CN&#39;:</code>的时候修改为xelatex。但是没必要，因为xelatex也可以编译英文，所以对于国人使用者，直接所有的都上xelatex，没毛病。修改结果如下：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">default_latex_engine</span><span class="params">(config)</span>:</span></div><div class="line">    <span class="string">""" Better default latex_engine settings for specific languages. """</span></div><div class="line">    <span class="keyword">if</span> config.language == <span class="string">'ja'</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">'platex'</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> <span class="string">'xelatex'</span></div></pre></td></tr></table></figure></p>
<h2 id="现在怎么用"><a href="#现在怎么用" class="headerlink" title="现在怎么用"></a>现在怎么用</h2><p>经过上面的三步折腾，现在可以放心使用中文了。使用步骤：</p>
<ul>
<li><code>make latex</code>:sphinx生成latex代码</li>
<li><code>cd build/latex</code>：进入latex目录</li>
<li><code>make</code>：编译latex代码生成pdf</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://matplotlib.org/_static/logo2.svg&quot; alt=&quot;hydrothermal&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Latex虽然强大，但是不适合做在线文档。最吸引我的一个在线文档就是&lt;a href=&quot;http://matplotlib.org/gallery.html&quot;&gt;MatplotLib&lt;/a&gt;官方网站上的&lt;strong&gt;Gallery&lt;/strong&gt;，将图像和代码结合在一起，查询和学习起来非常方便。一直以来就像折腾一下Sphinx，但是没下决心，从现在开始我将从0开始学习Sphinx的点点滴滴记录下来。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="科研经验" scheme="http://yoursite.com/categories/%E7%A7%91%E7%A0%94%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="Mac" scheme="http://yoursite.com/tags/Mac/"/>
    
      <category term="Sphinx" scheme="http://yoursite.com/tags/Sphinx/"/>
    
  </entry>
  
  <entry>
    <title>如何在Mac下愉快的做科研</title>
    <link href="http://yoursite.com/2017/03/03/2017-03-03-mac_research/"/>
    <id>http://yoursite.com/2017/03/03/2017-03-03-mac_research/</id>
    <published>2017-03-03T18:29:46.000Z</published>
    <updated>2017-03-21T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1488533058824&amp;di=bb50ad63251a3e9ab7518ce443c119a0&amp;imgtype=0&amp;src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F0330478554c70a700000158fcce4cb0.jpg" alt="hydrothermal"></p>
<a id="more"></a>
<blockquote>
<p><strong>工欲善其事，必先利其器。</strong><br>　　　　　　　　　　　－－《论语》<br><strong>为什么要写这篇博文：</strong> 博主是一个地球物理学在读博士生，如果了解这个专业的读者都知道，在科研过程中会用到很多很多计算机的技能做计算、成图。当然了，慢慢的就会培养出对编程方面的兴趣，这回同时培养出一种说不出是好是坏的习惯：<strong>完</strong>(Qiang)<strong>美</strong>(Po)<strong>主</strong>(Zheng)<strong>义</strong>。所以这篇文章就是为那些有同样习惯的同学们一个参考，这也是本人在不断探索实践中总结出来的一些经验。</p>
</blockquote>
<h1 id="Mac下的科研工具汇总"><a href="#Mac下的科研工具汇总" class="headerlink" title="Mac下的科研工具汇总"></a>Mac下的科研工具汇总</h1><p>这里所说的科研工具指的是一些程序或者软件，能在你的科研路上为你助力的好助手。主要有一下几类</p>
<h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>开发环境也就是通常说的编译/编程环境。我通常会用到的编程语言/脚本语言有: <code>C/C++</code>,<code>Python</code>,<code>Fortran</code>,<code>GMT</code>,<code>Matlab/Octave</code></p>
<h3 id="计算类"><a href="#计算类" class="headerlink" title="计算类"></a>计算类</h3><ul>
<li><p><strong><a href="https://registrationcenter.intel.com/en/products/" target="_blank" rel="external">Intel® Parallel Studio XE Composer Edition for C++ OS X</a></strong>: <code>C/C++</code>，<code>Fortran</code><br>当然，Mac自带的gfortran和gcc, g++这些都可以满足基本编程需要，但是我需要用到MKL等一些计算库，所以安装了Intel的开发套件，学生可以凭借edu邮箱免费申请education版本。 </p>
</li>
<li><p><strong><a href="https://www.continuum.io/downloads/" target="_blank" rel="external">Anaconda</a></strong>: <code>Python</code>,<a href="http://www.fatiando.org/docs.html" target="_blank" rel="external"><code>Fatiano</code></a>,<code>Jupyter-notebook</code><br>我最喜欢的一个工具就是<code>Jupyter-notebook</code>，这是一个非常强大的工具，不仅可以做笔记，也可以将程序代码放在cell里面直接运行，紧接着就可以出图。最后还可以导出pdf文档。结合版本控制，就可以全程记录你的整个研究的细节过程，从此可以向不可重复研究说拜拜了。<br>这个notebook是要以python为核心驱动的，而安装python可以有一个简单方式，那就是anaconda。conda是专门为科学计算整合的一个python发行版本，里面基本上包含了你能够用到的一些库，如果需要安装特定的库，可以直接用<code>pip install</code>命令很容易的安装。<br>最后一个使用<code>Python</code>的理由可能就是<code>Fatiando</code>这个地球物理软件包了，这是一位巴西的地球物理学者开发的，而且一直在更新中。里面有很多重、磁、震方面的程序，如正演、延拓、欧拉反褶积什么的。</p>
</li>
</ul>
<h3 id="写作类"><a href="#写作类" class="headerlink" title="写作类"></a>写作类</h3><ul>
<li><p><strong><a href="http://tug.org/mactex/" target="_blank" rel="external">MacTex</a></strong><br>Mac系统下虽然有了word版本，但也不是很好用。首先当文件大了之后会很容易奔溃；第二没法进行版本控制；第三参考文献、公式编号、交叉引用等等都不是很好用。而且你还可能会化很多时间去调整其排版。相信刚入门MAC的同学也不会倾向于Pages，所以这些烦恼都可以通过一个名叫Latex的神器来解决。<br>现在所有的英文期刊都是支持Latex投稿的（国内有部分也支持了），这也是我选择Latex的原因。每个期刊都有自己的Latex模板，你只需要专注于你的写作，不用操心排版等所有码字之外的事情。<br>关于参考文献，我会在下面推荐使用<code>Mendeley</code>，结合Latex使用简直就是神搭档。</p>
</li>
<li><p><strong>印象笔记</strong>+<strong>马克飞象</strong><br>印象笔记大家肯定都很熟悉了，但是把他和马克飞象结合起来用会更有意思，但是马克飞象是收费的，反正我是买了一年的vip，只因上面提到的那个习惯。</p>
</li>
<li><p><strong>Hexo</strong>+<strong>Coding</strong><br>这个属于高级篇了，这是写个人博客的工具。有兴趣的可以自己折腾或者找我，我记录了这个安装和使用过程，但是是卸载印象笔记里面的，懒得放到博客上了，有需要的可以找我<a href="1013282124@qq.com">分享</a>给你。</p>
</li>
<li><p><strong>Sphinx</strong><br>这个工具主要用于写读书（期刊、专著等文献）笔记，以及将一些绘图代码直接放到Gallery里面方便查找和再利用。其实Sphinx还可以做很多东西，比如Python程序库的说明文档、写文章+照片=记录生活等等，其他功能自己发现。<br>而且这个还可以放到网上可以作为自己的个人主页（跟个人博客是不同类型，偏重点不同）：在coding里面创建一个开放的项目，然后上传sphinx的_build内容，最后启动项目的展示功能即可。<br><strong>restructuredtext预览及编辑</strong>工具：尝试过VSCode得关于rst的插件，结果发现很不稳定，经常打不开；也尝试过sphinx-GUI，也不好用：第一是不能实时预览必须点击build才能看到结果；第二是预览和写作不能同步滚动，最终放弃。目前看到最好用的还是Atom配合其插件<code>rst-preview-pandoc</code>，安装方法与VSCode插件安装类似。</p>
</li>
</ul>
<h3 id="编程工具"><a href="#编程工具" class="headerlink" title="编程工具"></a>编程工具</h3><ul>
<li><strong>VScode</strong><br>这个是我用的最习惯的一个功能强大+颜值高的编辑器。支持各种语言的语法高亮，而且与Bash终端集成，也可以有插件支持直接运行python，bash等程序。估计Atom也是很强大的，不过先入为主啦，我还是习惯首先选择vscode。<br>我个人觉得效率最高的编程姿势还是在文本编辑器下编辑代码，然后写一个makefile来编译。本人在使用MAC之前也是VSstudio的忠实用户啊，不过MAC系统逼着自己用这种makefile的方式编程，熬过了前两天的懵逼状态，后面就会发现这种方式确实是最高效的，然后配合<strong>git</strong>进行版本管理，简直是无敌了。</li>
<li><p><strong>git</strong><br>关于git的简单用法，我只想列举一下几个命令:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">git init</div><div class="line">git remote add origin http://xxxxxx</div><div class="line">git add --all</div><div class="line">git status</div><div class="line">git commit -m<span class="string">"message"</span></div><div class="line">git push</div><div class="line">git brunch</div><div class="line">git brunch &lt;new brunch&gt;</div><div class="line">git checkout &lt;brunch2&gt;</div><div class="line">git merge &lt;brunch1&gt;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>Atom</strong><br>一个比VScode诞生更早的一个非常强大的编辑器，这里不过多介绍，我目前只是用其边际rst，因为vscode的rst预览插件实在是不好用。</p>
</li>
<li><strong>Doxygen</strong><br>用于生成程序的以来关系以及说明文档，但前提是你的程序代码必须按照Doxygen的注释规范进行注释。我主要用它进行C/C++程序和Fortran程序的文档生成。安装很简单直接用<code>brew install doxygen</code>安装即可</li>
<li><strong>Graphviz</strong><br>这是配合Doxygen使用的，主要用于生成函数或者类之间的依赖关系图的，这个过程都是自动的，只需要在配置文件里面打开<code>CALL_GRAPH</code>以及<code>CALLER_GRAPH</code>，和使用<code>DOT</code>等。<br>这个工具也可以单独使用，其官网上有MAC系统下的GUI版本。单独使用比如做流程图，其他的一些结构图之类的，程序代码的依赖关系图只是这个工具功能的冰山一角，更多的强大功能还需自己根据需要慢慢挖掘。</li>
</ul>
<blockquote>
<p>写不下去了，放的时间太久了，积累了很多，一下写不完，以后慢慢完善吧。</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;https://timgsa.baidu.com/timg?image&amp;amp;quality=80&amp;amp;size=b9999_10000&amp;amp;sec=1488533058824&amp;amp;di=bb50ad63251a3e9ab7518ce443c119a0&amp;amp;imgtype=0&amp;amp;src=http%3A%2F%2Fimg.zcool.cn%2Fcommunity%2F0330478554c70a700000158fcce4cb0.jpg&quot; alt=&quot;hydrothermal&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="科研经验" scheme="http://yoursite.com/categories/%E7%A7%91%E7%A0%94%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="Python" scheme="http://yoursite.com/tags/Python/"/>
    
      <category term="Mac" scheme="http://yoursite.com/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>强大的Python与GMT</title>
    <link href="http://yoursite.com/2016/09/28/2016-09-28-python_gmt/"/>
    <id>http://yoursite.com/2016/09/28/2016-09-28-python_gmt/</id>
    <published>2016-09-28T17:51:00.000Z</published>
    <updated>2017-03-21T09:59:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Python绘图与GMT对比</strong></p>
<hr>
<p>研究地球科学的学者没有不知道GMT的，相信大多数GMT使用者都是为了利用其地图投影，其实还有一些数据处理方面的功能，可能大家用的比较少。GMT在（数据）投影图方面表现确实很好，但是其脚本编写相对于编程语言欠灵活。这里介绍一种Python的库—Matplotlib-&gt;Basemap，其功能之强大较GMT有过之而无不及。介绍Python的好处在于其不仅能精美绘图，而且也可以做各种计算，毕竟是高级编程语言。只要学会用Python，在科研过程中的所有计算和绘图都能得到解决而且是优雅的解决。</p>
<a id="more"></a>
<h1 id="Basemap安装"><a href="#Basemap安装" class="headerlink" title="Basemap安装"></a>Basemap安装</h1><p>做科研用Python，推荐安装Python科学计算发行版<a href="https://www.continuum.io/downloads" target="_blank" rel="external">Anaconda</a>。安装好了Anaconda之后应该是自带有Basemap包的。</p>
<h2 id="安装Anaconda"><a href="#安装Anaconda" class="headerlink" title="安装Anaconda"></a>安装Anaconda</h2><p>如果已经安装了Anaconda则略过此节。如果之前安装过Python，则最好是将之前安装的所有的python都卸载掉，注意对于python进行科学计算，安装Anaconda2.7就足够了，里面集成了python，可以直接在notepad++下运行，也可以在vs2015下编写和运行。</p>
<h3 id="下载安装anaconda"><a href="#下载安装anaconda" class="headerlink" title="下载安装anaconda"></a>下载安装<a href="https://www.continuum.io/downloads" target="_blank" rel="external">anaconda</a></h3><p><img src="http://ocp8aowoj.bkt.clouddn.com/AnacondaSite.png" alt="Anaconda| center|800x0"> </p>
<h2 id="查看包"><a href="#查看包" class="headerlink" title="查看包"></a>查看包</h2><p>打开AnacondaPrompt，在终端输入<code>pip list</code>，然后会有下面这样的显示<br><img src="http://ocp8aowoj.bkt.clouddn.com/AnacondaList.png" alt="AnacondaList| center|800x0"> </p>
<h2 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h2><p>如果没有找到’basemap’，则输入命令:<code>pip install basemap</code>即可自动安装<strong>basemap包</strong><br>在地学绘图中难免绘制各种数据（比如地形、重力场、磁场或者其他的网格数据），GMT中使用的大多是nc（netCDF)格式。Basemap包也是一样的使用nc格式，但是需要安装<a href="https://pypi.python.org/pypi/netCDF4" target="_blank" rel="external">netCDF包</a>，自动安装即可：输入命令<code>pip install netCDF4</code>，等待安装完成。然后测试能否成功导入nc包：<code>from netCDF4 import Dataset as NetCDFFile</code>，如果出现错误，则需要用命令<code>pip install -U numpy</code>安装一次numpy，等待安装完成，再测试，应该就没问题了。</p>
<h1 id="Python绘图与GMT对比"><a href="#Python绘图与GMT对比" class="headerlink" title="Python绘图与GMT对比"></a>Python绘图与GMT对比</h1><h1 id="Python-Basemap绘图"><a href="#Python-Basemap绘图" class="headerlink" title="Python-Basemap绘图"></a>Python-Basemap绘图</h1><h2 id="几种主要的投影"><a href="#几种主要的投影" class="headerlink" title="几种主要的投影"></a>几种主要的投影</h2><p>常用的几种投影方式有：<a href="http://matplotlib.org/basemap/users/moll.html" target="_blank" rel="external">moll</a>, <a href="http://matplotlib.org/basemap/users/moll.html" target="_blank" rel="external">hammer</a>, <a href="http://matplotlib.org/basemap/users/robin.html" target="_blank" rel="external">robin</a>, <a href="http://matplotlib.org/basemap/users/eck4.html" target="_blank" rel="external">eck4</a>, <a href="http://matplotlib.org/basemap/users/kav7.html" target="_blank" rel="external">kav7</a>, <a href="http://matplotlib.org/basemap/users/mbtfpq.html" target="_blank" rel="external">mbtfpq</a>, <a href="http://matplotlib.org/basemap/users/cyl.html" target="_blank" rel="external">cyl</a>, <a href="http://matplotlib.org/basemap/users/merc.html" target="_blank" rel="external">merc</a>, <a href="http://matplotlib.org/basemap/users/lcc.html" target="_blank" rel="external">lcc</a>, <a href="http://matplotlib.org/basemap/users/laea.html" target="_blank" rel="external">laea</a>, <a href="http://matplotlib.org/basemap/users/plaea.html" target="_blank" rel="external">nalaea</a></p>
<hr>
<p><img src="http://ocp8aowoj.bkt.clouddn.com/eck4.png" alt="投影| center|800x0"><br><img src="http://ocp8aowoj.bkt.clouddn.com/eck4%20%281%29.png" alt="投影| center|800x0"><br><img src="http://ocp8aowoj.bkt.clouddn.com/cyl.png" alt="投影| center|800x0"><br><img src="http://ocp8aowoj.bkt.clouddn.com/kav7%20%281%29.png" alt="投影| center|800x0"><br><img src="http://ocp8aowoj.bkt.clouddn.com/robin.png" alt="投影| center|800x0"><br><img src="http://ocp8aowoj.bkt.clouddn.com/mill.png" alt="投影| center|800x0"><br><img src="http://ocp8aowoj.bkt.clouddn.com/merc.png" alt="投影| center|800x0"><br><img src="http://ocp8aowoj.bkt.clouddn.com/mbtfpq.png" alt="投影| center|800x0"><br><img src="http://ocp8aowoj.bkt.clouddn.com/lcc.png" alt="投影| center|800x0"><br><img src="http://ocp8aowoj.bkt.clouddn.com/laea.png" alt="投影| center|800x0"><br><img src="http://ocp8aowoj.bkt.clouddn.com/hammer.png" alt="投影| center|800x0"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Python绘图与GMT对比&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;研究地球科学的学者没有不知道GMT的，相信大多数GMT使用者都是为了利用其地图投影，其实还有一些数据处理方面的功能，可能大家用的比较少。GMT在（数据）投影图方面表现确实很好，但是其脚本编写相对于编程语言欠灵活。这里介绍一种Python的库—Matplotlib-&amp;gt;Basemap，其功能之强大较GMT有过之而无不及。介绍Python的好处在于其不仅能精美绘图，而且也可以做各种计算，毕竟是高级编程语言。只要学会用Python，在科研过程中的所有计算和绘图都能得到解决而且是优雅的解决。&lt;/p&gt;
    
    </summary>
    
      <category term="科研经验" scheme="http://yoursite.com/categories/%E7%A7%91%E7%A0%94%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="Python" scheme="http://yoursite.com/tags/Python/"/>
    
      <category term="GMT" scheme="http://yoursite.com/tags/GMT/"/>
    
  </entry>
  
  <entry>
    <title>洋中脊段是由斜向地幔离散造成的</title>
    <link href="http://yoursite.com/2016/08/30/2016-08-30-paper-Brandon2016/"/>
    <id>http://yoursite.com/2016/08/30/2016-08-30-paper-Brandon2016/</id>
    <published>2016-08-30T12:00:00.000Z</published>
    <updated>2017-03-21T09:56:12.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Segmentation of mid-ocean ridges attributed to oblique mantle divergence</strong></p>
<p>作者：<strong>Brandon P. VanderBeek, et al.</strong><br>期刊：<strong><a href="http://www.nature.com/ngeo/journal/v9/n8/full/ngeo2745.html" target="_blank" rel="external">Nature geoscience</a></strong></p>
<hr>
<p><strong>摘要</strong>：洋中脊脊段（segmentation）——构造和岩浆过程系统的沿轴变化——的起源一直存在争议。通常假设地幔流是板块离散的被动响应；转换断层之间的岩浆供应控制洋脊段。利用地震层析成像，我们构建了胡安德富卡脊（Juan de Fuca Ridge）的Endeavour脊段之下地幔流的几何结构和地幔熔融的分布。结合前人研究，我们的结果建立了地幔离散和板块扩张方向之间系统的倾斜角。在所有的三个实例研究中，<strong>地幔离散会由于板块扩张方向的变化而增加，并且流场随扩张速率的减小而增加</strong>。此外，地震成像也反映了大间距、非转换不连续是增强的地幔熔融保留的区域。我们提出：<strong>洋中脊之下的斜的地幔流是扩张脊段的重定向（reorientation）以及脊轴不连续之形成的驱动力</strong>。由此产生的构造不连续则是熔融向上运输的效率降低，因此形成了地幔过程在脊段尺度上的变化（segment-scale variation）。我们预测：<strong>横跨洋中脊的脊段受软流圈流演化模式和岩石圈断裂的动力学模式控制</strong>。<br><img src="http://ocp8aowoj.bkt.clouddn.com/brandon2016-Fig5-2.png" alt="快速和中速扩张脊的岩浆脊段模式"></p>
<a id="more"></a>
<hr>
<blockquote>
<p>自发现地球上洋中脊系统是被洋脊段（segments）分隔开，一些有意义的观测表明构造和岩浆过程存在系统的、沿轴变化。转换断层之间，脊段边界为长寿命的、非转换构造偏移或者二级脊岭不连续(见下图)，常出现于轴部最深处并随板块边界一起迁移。这些二级不连续包括快速和中速扩张脊上重叠的扩张中心（Overlapping spreading centres: OCSs）和慢速扩张洋脊上的斜向剪切带。非转换构造偏移与其相关的脊段尺度的岩浆过程仍是争论热点。</p>
<p>对扩张中心洋脊段的最流行假说，将二级不连续归因于上涌地幔引起的岩浆供应的变化。从此角度出发，脊段中心位于熔融供给增加的位置，岩浆于地壳或地幔深度沿轴向岩浆贫瘠的脊段末端重新分配。而另一个假说则认为板块扩张方向的变化与构造不连续的形成及洋脊下地幔和地壳过程之间的错位有关。在文中，我们利用地震数据对中速扩张的JdFR的Endeavour脊段之下地幔流和先不地幔熔融进行成像。我们综合其他扩张环境的观测结果，确定洋中脊系统的构造和岩浆脊段的响应机制。</p>
</blockquote>
<p><img src="http://ocp8aowoj.bkt.clouddn.com/brandon2016-Fig1-0.png" alt="图1. 快速和中速扩张脊的构造脊段。(a)EPR的水深图；(b)JaFR的Endeavour区域的水深；(c)MAR的水深；符号缩写：虚线表示板块边界。转换断层(TF)，重合扩张中心(OCS)和非转换偏移(NTO)。数字表示构造不连续的级数。白色箭头表示扩张方向和全扩张速率。绿色箭头表示地震各向异性方向。图中也表明了洋脊系统的欧拉极旋转方向。(d)研究区域的全球分布图"></p>
<h2 id="实验几何和层析成像"><a href="#实验几何和层析成像" class="headerlink" title="实验几何和层析成像"></a>实验几何和层析成像</h2><blockquote>
<p>图2表明了用于构建JdFR Endeavour脊段之下浅部地幔的层析成像模型的地震震源和接收的分布。我们使用Moho不连续面的反射波到时（Pn到时）对地幔之上4km、沿轴和过轴分别为100km和20km区域进行成像。构建了地壳速度和厚度的三维初始模型。</p>
</blockquote>
<h2 id="Endeavour的地幔流和熔融分布"><a href="#Endeavour的地幔流和熔融分布" class="headerlink" title="Endeavour的地幔流和熔融分布"></a>Endeavour的地幔流和熔融分布</h2><p>我们的模型的各项异性分量约束了上地幔流在脊段尺度下的几何模型。因为地幔中地震的各项异性主要由橄榄石晶体的晶格优选方向决定。</p>
<h2 id="洋中脊的构造洋脊段"><a href="#洋中脊的构造洋脊段" class="headerlink" title="洋中脊的构造洋脊段"></a>洋中脊的构造洋脊段</h2><h2 id="洋中脊的岩浆洋脊段"><a href="#洋中脊的岩浆洋脊段" class="headerlink" title="洋中脊的岩浆洋脊段"></a>洋中脊的岩浆洋脊段</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Segmentation of mid-ocean ridges attributed to oblique mantle divergence&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;strong&gt;Brandon P. VanderBeek, et al.&lt;/strong&gt;&lt;br&gt;期刊：&lt;strong&gt;&lt;a href=&quot;http://www.nature.com/ngeo/journal/v9/n8/full/ngeo2745.html&quot;&gt;Nature geoscience&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;摘要&lt;/strong&gt;：洋中脊脊段（segmentation）——构造和岩浆过程系统的沿轴变化——的起源一直存在争议。通常假设地幔流是板块离散的被动响应；转换断层之间的岩浆供应控制洋脊段。利用地震层析成像，我们构建了胡安德富卡脊（Juan de Fuca Ridge）的Endeavour脊段之下地幔流的几何结构和地幔熔融的分布。结合前人研究，我们的结果建立了地幔离散和板块扩张方向之间系统的倾斜角。在所有的三个实例研究中，&lt;strong&gt;地幔离散会由于板块扩张方向的变化而增加，并且流场随扩张速率的减小而增加&lt;/strong&gt;。此外，地震成像也反映了大间距、非转换不连续是增强的地幔熔融保留的区域。我们提出：&lt;strong&gt;洋中脊之下的斜的地幔流是扩张脊段的重定向（reorientation）以及脊轴不连续之形成的驱动力&lt;/strong&gt;。由此产生的构造不连续则是熔融向上运输的效率降低，因此形成了地幔过程在脊段尺度上的变化（segment-scale variation）。我们预测：&lt;strong&gt;横跨洋中脊的脊段受软流圈流演化模式和岩石圈断裂的动力学模式控制&lt;/strong&gt;。&lt;br&gt;&lt;img src=&quot;http://ocp8aowoj.bkt.clouddn.com/brandon2016-Fig5-2.png&quot; alt=&quot;快速和中速扩张脊的岩浆脊段模式&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="学术前沿" scheme="http://yoursite.com/categories/%E5%AD%A6%E6%9C%AF%E5%89%8D%E6%B2%BF/"/>
    
    
      <category term="地球动力学" scheme="http://yoursite.com/tags/%E5%9C%B0%E7%90%83%E5%8A%A8%E5%8A%9B%E5%AD%A6/"/>
    
      <category term="洋中脊" scheme="http://yoursite.com/tags/%E6%B4%8B%E4%B8%AD%E8%84%8A/"/>
    
  </entry>
  
  <entry>
    <title>土卫2上的热泉</title>
    <link href="http://yoursite.com/2016/08/30/2016-08-30-paper-Gabriel/"/>
    <id>http://yoursite.com/2016/08/30/2016-08-30-paper-Gabriel/</id>
    <published>2016-08-30T07:29:00.000Z</published>
    <updated>2017-03-21T09:56:50.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Enceladus’ hot springs</strong></p>
<p>作者：<strong>Gabriel Tobie: is at the Laboratoire de Planétologie et Géodynamique, Université de Nantes</strong><br>期刊：<strong><a href="http://www.nature.com/nature/journal/v519/n7542/full/519162a.html" target="_blank" rel="external">Nature</a></strong></p>
<hr>
<p><strong>摘要</strong>：在太阳系形成早期阶段，很多星体都有热液活动发生——水、岩相互作用——结果形成热液循环系统，但是目前了解到地球是仅有的还保持活动的。在2005年，卡西尼（Cassini）探测器发现了土卫2（Enceladus）存在水蒸气和冰的喷发，来自于南极温暖的、长的断裂。对Enceladus喷发羽流的盐度和冰粒的探测很清晰的反应了冰壳下存在海洋环境和被热水浸析的岩石，至少在过去是这样的。本期207页，<a href="http://www.nature.com/nature/journal/v519/n7542/full/nature14262.html" target="_blank" rel="external">Hsu</a>报道了土卫2上存在热液活动过程。<br><img src="http://ocp8aowoj.bkt.clouddn.com/Saturns-Moon-Enceladus.jpg" alt="土卫2热液喷发 | center|800x0"> </p>
<a id="more"></a>
<hr>
<p>此事始于十年前，卡西尼是探测微尘埃粒子（称为粒子束）的航天器之一，用于探测土星。粒子束从土星逃逸到太阳系。经分析发现，这些粒子束大都是纳米级大小并富含硅（silicon），与土星环境富含冰的环境形成了对比。这些例子的起源尚不明确。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Enceladus’ hot springs&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;strong&gt;Gabriel Tobie: is at the Laboratoire de Planétologie et Géodynamique, Université de Nantes&lt;/strong&gt;&lt;br&gt;期刊：&lt;strong&gt;&lt;a href=&quot;http://www.nature.com/nature/journal/v519/n7542/full/519162a.html&quot;&gt;Nature&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;摘要&lt;/strong&gt;：在太阳系形成早期阶段，很多星体都有热液活动发生——水、岩相互作用——结果形成热液循环系统，但是目前了解到地球是仅有的还保持活动的。在2005年，卡西尼（Cassini）探测器发现了土卫2（Enceladus）存在水蒸气和冰的喷发，来自于南极温暖的、长的断裂。对Enceladus喷发羽流的盐度和冰粒的探测很清晰的反应了冰壳下存在海洋环境和被热水浸析的岩石，至少在过去是这样的。本期207页，&lt;a href=&quot;http://www.nature.com/nature/journal/v519/n7542/full/nature14262.html&quot;&gt;Hsu&lt;/a&gt;报道了土卫2上存在热液活动过程。&lt;br&gt;&lt;img src=&quot;http://ocp8aowoj.bkt.clouddn.com/Saturns-Moon-Enceladus.jpg&quot; alt=&quot;土卫2热液喷发 | center|800x0&quot;&gt; &lt;/p&gt;
    
    </summary>
    
      <category term="学术前沿" scheme="http://yoursite.com/categories/%E5%AD%A6%E6%9C%AF%E5%89%8D%E6%B2%BF/"/>
    
    
      <category term="热液" scheme="http://yoursite.com/tags/%E7%83%AD%E6%B6%B2/"/>
    
  </entry>
  
  <entry>
    <title>Python数据分析</title>
    <link href="http://yoursite.com/2016/08/03/2016-08-03-python-dataAnalysis/"/>
    <id>http://yoursite.com/2016/08/03/2016-08-03-python-dataAnalysis/</id>
    <published>2016-08-03T07:29:00.000Z</published>
    <updated>2017-03-21T09:59:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>Matlab数据处理方便，但是作图实在是无力吐槽；C/C++，还有Fortran写大型的数据分析程序或高性计算还不错，但是可是化功能几乎没有。有了<strong>Python</strong>，两者兼备，既有丰富的数据处理函数库（比如numpy,scipy等，既有fft方面的也有小波方面的），也有精美的绘图函数库（如matplotlib），如果不进行大型的高性（并行）计算，强烈推荐科研过程中引入<strong>Python</strong>，如虎添翼。</p>
<a id="more"></a>
<p>从我个人的使用经历中一点一点积累经验，分享给大家，会实时更新，本文主要分享的是Python在数据处理（分析）中如何运用。</p>
<h1 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h1><p>Python自定义函数很简单，只需要<code>def _funcname(par1,par2):</code>这种形式即可，注意这里的<code>:</code>，因为<strong>Python</strong>是一门非常讲究代码格式的语言，强制你写代码必须优雅，否则会出错，直接上代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#定义</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_add</span><span class="params">(x,y)</span>:</span></div><div class="line">	z=x+y</div><div class="line">	<span class="keyword">return</span> z</div><div class="line"><span class="comment">#调用</span></div><div class="line">x=<span class="number">1</span></div><div class="line">y=<span class="number">2</span></div><div class="line">z=_add(x,y)</div></pre></td></tr></table></figure></p>
<p>Python自定义函数返回值支持返回多个参数，包括列表，字典等，比如：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#定义</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_func</span><span class="params">(x,y,z)</span>:</span></div><div class="line">	<span class="keyword">return</span> x,y,z</div><div class="line"><span class="comment">#调用</span></div><div class="line">x=<span class="number">1</span></div><div class="line">y=<span class="number">2</span></div><div class="line">z=<span class="number">3</span></div><div class="line">x0,y0,z0=_func(x,y,z)</div></pre></td></tr></table></figure></p>
<h1 id="读取数据"><a href="#读取数据" class="headerlink" title="读取数据"></a>读取数据</h1><p>通常我们处理的数据分为二维数据和三维数据，二维数据也就是通常所说的剖面数据，一般存储形式为n列的文本文件，比如我要读取一条水深剖面数据，其存储格式为：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="number">0</span>	<span class="number">-2696.041808</span>	</div><div class="line"><span class="number">500</span>	<span class="number">-2698.925123</span>	</div><div class="line"><span class="number">1000</span>	<span class="number">-2702.703325</span>	</div><div class="line"><span class="number">1500</span>	<span class="number">-2707.372416</span>	</div><div class="line"><span class="number">2000</span>	<span class="number">-2712.638406</span>	</div><div class="line"><span class="number">2500</span>	<span class="number">-2719.304509</span>	</div><div class="line"><span class="number">3000</span>	<span class="number">-2726.121160</span>	</div><div class="line"><span class="number">3500</span>	<span class="number">-2734.344562</span>	</div><div class="line">......		......</div></pre></td></tr></table></figure></p>
<p>第一列是距离，第二列是水深。读取文件我喜欢用<code>linecache</code>，这个包支持大文件读取，速度非常快，也不折腾别的了，反正现在计算机资源很多，不追求性能更优的话暂且就用这个吧。自定义一个读取文件返回数据数组的函数：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"><span class="keyword">import</span> linecache</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"></div><div class="line"><span class="comment">#读取剖面数据</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_ReadData2d</span><span class="params">(filename,col_x,col_y)</span>:</span></div><div class="line">	AllData = linecache.getlines(filename)</div><div class="line">	x=np.linspace(<span class="number">0</span>,<span class="number">1.0</span>,len(AllData))</div><div class="line">	y=np.linspace(<span class="number">0</span>,<span class="number">1.0</span>,len(AllData))</div><div class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(AllData)):</div><div class="line">		LineData=AllData[i]</div><div class="line">		x[i]=(float(LineData.split()[col_x]))</div><div class="line">		y[i]=(float(LineData.split()[col_y]))</div><div class="line">	<span class="comment"># 清除缓存,关闭文件</span></div><div class="line">	linecache .clearcache()</div><div class="line"><span class="comment">#调用</span></div><div class="line">filename_topo=<span class="string">"profile1_etopo1_500.dat"</span></div><div class="line">x,y=_ReadData2d(filename_topo,<span class="number">0</span>,<span class="number">1</span>)</div><div class="line"><span class="keyword">print</span> x,y</div></pre></td></tr></table></figure></p>
<h1 id="求频谱"><a href="#求频谱" class="headerlink" title="求频谱"></a>求频谱</h1><p>首先根据读取的数据计算频率范围，也就是$f$向量，只需要自变量$x$两个量即可：采样间隔；采样个数（数据点个数），直接上代码：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#定义</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_GetFrequency</span><span class="params">(xmin,xmax,datasize)</span>:</span></div><div class="line">	frequency=np.arange(<span class="number">0</span>,datasize/<span class="number">2.0</span>+<span class="number">1</span>,<span class="number">1.0</span>)/(xmax-xmin)</div><div class="line">	frequency2=np.arange(datasize/<span class="number">2.0</span>,<span class="number">1</span>,<span class="number">-1.0</span>)/(xmax-xmin)</div><div class="line">	frequencytotal=np.hstack((frequency,frequency2))</div><div class="line">	<span class="keyword">return</span> frequency,frequencytotal	</div><div class="line"><span class="comment">#调用</span></div><div class="line">f,ftotal=_GetFrequency(xmin,xmax,datasize)</div><div class="line"><span class="comment">#rfft函数的返回值是N/2+1个复数，分别表示从0(Hz)到sampling_rate/2(Hz)的N/2+1点频率的成分，与f大小一致</span></div><div class="line">F_topo=np.fft.rfft(topo)/datasize</div><div class="line"><span class="string">"""</span></div><div class="line">   最后我们计算每个频率分量的幅值，</div><div class="line">   并通过 20*np.log10() 将其转换为以db单位的值。</div><div class="line">   为了防止0幅值的成分造成log10无法计算，</div><div class="line">   我们调用np.clip对xf的幅值进行上下限处理：</div><div class="line">"""</div><div class="line">spectrum=<span class="number">20</span>*np.log10(np.clip(np.abs(F_topo), <span class="number">1e-20</span>, <span class="number">1e100</span>))</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Matlab数据处理方便，但是作图实在是无力吐槽；C/C++，还有Fortran写大型的数据分析程序或高性计算还不错，但是可是化功能几乎没有。有了&lt;strong&gt;Python&lt;/strong&gt;，两者兼备，既有丰富的数据处理函数库（比如numpy,scipy等，既有fft方面的也有小波方面的），也有精美的绘图函数库（如matplotlib），如果不进行大型的高性（并行）计算，强烈推荐科研过程中引入&lt;strong&gt;Python&lt;/strong&gt;，如虎添翼。&lt;/p&gt;
    
    </summary>
    
      <category term="科研经验" scheme="http://yoursite.com/categories/%E7%A7%91%E7%A0%94%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="Python" scheme="http://yoursite.com/tags/Python/"/>
    
      <category term="优美作图" scheme="http://yoursite.com/tags/%E4%BC%98%E7%BE%8E%E4%BD%9C%E5%9B%BE/"/>
    
      <category term="数据分析" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>Python精美作图</title>
    <link href="http://yoursite.com/2016/08/03/2016-08-03-matplotlib/"/>
    <id>http://yoursite.com/2016/08/03/2016-08-03-matplotlib/</id>
    <published>2016-08-03T07:29:00.000Z</published>
    <updated>2017-03-21T09:57:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>Python是写SCI论文不可多得的绘图好帮手，其绘图功能以及导出的矢量图之美观会让你欲罢不能，而且Python的<a href="http://matplotlib.org/gallery.html" target="_blank" rel="external">matplotlib</a>绘图模块也有非常完善的说明文档和例子。</p>
<a id="more"></a>
<h1 id="曲线图"><a href="#曲线图" class="headerlink" title="曲线图"></a>曲线图</h1><p>首先需要在导言区导入<code>matplotlib</code>库：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> matplotlib</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div></pre></td></tr></table></figure></p>
<p>其语法与Matlab的绘图命令非常相似，可以直接使用上面导入的<code>plt</code>进行绘图，比如:<code>plt.plot(x,y)</code>，单个曲线图太简单，不再赘述。下面介绍几种常用的绘图布局方法。</p>
<h2 id="并列图"><a href="#并列图" class="headerlink" title="并列图"></a>并列图</h2><p>有时候为了对比数据，需要将两个或几个曲线进行上下并排，也就是绘制子图。直接读代码比较好：</p>
<ul>
<li>并列类型1：<strong>两行一列</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fig, (ax0, ax1) = plt.subplots(<span class="number">2</span>, <span class="number">1</span>, sharex=<span class="keyword">True</span>,figsize=(<span class="number">9</span>,<span class="number">7</span>))</div></pre></td></tr></table></figure>
</li>
</ul>
<p>上面这是一个两行一列的并列图，分别使用<code>ax0</code>和<code>ax1</code>进行绘图</p>
<ul>
<li>并列类型2：<strong>第一行一个第二行三个</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fig=plt.figure(figsize=(<span class="number">14</span>,<span class="number">10</span>))</div><div class="line">ax0=fig.add_subplot(<span class="number">2</span>,<span class="number">1</span>,<span class="number">1</span>)</div><div class="line">ax1=fig.add_subplot(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</div><div class="line">ax2=fig.add_subplot(<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>)</div><div class="line">ax3=fig.add_subplot(<span class="number">2</span>,<span class="number">3</span>,<span class="number">6</span>)</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="共用坐标轴"><a href="#共用坐标轴" class="headerlink" title="共用坐标轴"></a>共用坐标轴</h2><p>有时候需要在同一张图上呈现几个数据，比如同时显示一条测线上的重力异常和水深，这就需要公用x轴；还有一种情况需要公用y轴：显示频谱的时候再其中一条横轴上显示波数（或频谱），在另一条横轴上显示波长，方便读图。</p>
<h3 id="共用x轴"><a href="#共用x轴" class="headerlink" title="共用x轴"></a>共用x轴</h3><p>需要用一个方法<code>twinx</code>将坐标轴分开两部分即可：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#绘图</span></div><div class="line">fig, (ax0, ax1) = plt.subplots(<span class="number">2</span>, <span class="number">1</span>, sharex=<span class="keyword">True</span>,figsize=(<span class="number">9</span>,<span class="number">7</span>))</div><div class="line"><span class="comment"># ax0.plot(ftotal,np.log10(np.clip(np.abs(Z_k), 1e-20, 1e100)))</span></div><div class="line">p1,=ax0.plot(x/<span class="number">1000.0</span>,topo/<span class="number">1000.0</span>)</div><div class="line">ax0.set_ylabel(<span class="string">'km'</span>)</div><div class="line">ax0.set_ylim(topo.min()/<span class="number">1000.0</span>,<span class="number">0</span>)</div><div class="line">part2=ax0.twinx()</div><div class="line">p2,=part2.plot(x/<span class="number">1000.0</span>,grav,<span class="string">'r'</span>)</div><div class="line">part2.set_ylabel(<span class="string">'mGal'</span>)</div><div class="line">part2.set_ylim(grav.min()*<span class="number">1.5</span>,grav.max())</div><div class="line">part2.yaxis.label.set_color(p2.get_color())</div><div class="line">tkw = dict(size=<span class="number">4</span>, width=<span class="number">1.5</span>)</div><div class="line">part2.tick_params(axis=<span class="string">'y'</span>, colors=p2.get_color(), **tkw)</div></pre></td></tr></table></figure></p>
<blockquote>
<p>特别注意<code>p1</code>, <code>p2</code>后面的那个逗号，不能掉。</p>
</blockquote>
<h3 id="共用y轴"><a href="#共用y轴" class="headerlink" title="共用y轴"></a>共用y轴</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#设置另一个x轴</span></div><div class="line">xaxis_wavelength=plt.twiny()</div><div class="line">xaxis_wavelength.set_xlabel(<span class="string">u"波长(km)"</span>,fontdict=&#123;<span class="string">"family"</span>: <span class="string">"STKaiti"</span>&#125;)</div><div class="line">xaxis_wavelength.set_xlim(k[<span class="number">0</span>],k[len(k)<span class="number">-1</span>])</div><div class="line">labels=[<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">1000</span>]</div><div class="line">labels_x=[]</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(labels)):</div><div class="line">	labels_x.append(np.pi*<span class="number">2.0</span>/labels[i])</div><div class="line">plt.xticks(labels_x,labels)</div></pre></td></tr></table></figure>
<blockquote>
<p>刻度上的label需要自己设定，根据另一个轴的值计算出来标上，用到了函数：<code>xticks</code></p>
</blockquote>
<h2 id="去掉制定坐标轴"><a href="#去掉制定坐标轴" class="headerlink" title="去掉制定坐标轴"></a>去掉制定坐标轴</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ax1.xaxis.set_ticks_position(<span class="string">'bottom'</span>)</div><div class="line">ax1.yaxis.set_ticks_position(<span class="string">'left'</span>)</div><div class="line">ax1.spines[<span class="string">'top'</span>].set_visible(<span class="keyword">False</span>)</div><div class="line">ax1.spines[<span class="string">'right'</span>].set_visible(<span class="keyword">False</span>)</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Python是写SCI论文不可多得的绘图好帮手，其绘图功能以及导出的矢量图之美观会让你欲罢不能，而且Python的&lt;a href=&quot;http://matplotlib.org/gallery.html&quot;&gt;matplotlib&lt;/a&gt;绘图模块也有非常完善的说明文档和例子。&lt;/p&gt;
    
    </summary>
    
      <category term="科研经验" scheme="http://yoursite.com/categories/%E7%A7%91%E7%A0%94%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="Python" scheme="http://yoursite.com/tags/Python/"/>
    
      <category term="优美作图" scheme="http://yoursite.com/tags/%E4%BC%98%E7%BE%8E%E4%BD%9C%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>气候驱动的海水深度变化对洋中脊岩浆供应波动的敏感度</title>
    <link href="http://yoursite.com/2016/07/30/2016-07-30-paper-nature-olive2015/"/>
    <id>http://yoursite.com/2016/07/30/2016-07-30-paper-nature-olive2015/</id>
    <published>2016-07-30T20:10:00.000Z</published>
    <updated>2017-03-21T09:55:46.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Sensitivity of seafloor bathymetry to climate-driven fluctuations in mid-ocean ridge magma supply</strong></p>
<p>作者：<strong>J.-A. Olive, et. al.</strong><br>期刊：<strong><a href="http://science.sciencemag.org/content/350/6258/310.short" target="_blank" rel="external">Science</a></strong></p>
<hr>
<p><strong>摘要</strong>：最近有研究表明，在洋中脊形成的海底地形（纹理）特征记录了由海平面变化引起的洋脊岩浆供应的快速（23 ky. ~ 100 ky.）波动，因为海平面变化会对洋底之下的地幔熔融产物有一定调节作用。我们利用断裂和岩浆侵位的定量模型证明了：实际上，海底形态的形成过程对于岩浆供应变化，周期小于100 ky. 的强阻尼波动起到了低通滤波作用。我们的研究结果表明，</p>
<a id="more"></a>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Sensitivity of seafloor bathymetry to climate-driven fluctuations in mid-ocean ridge magma supply&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;strong&gt;J.-A. Olive, et. al.&lt;/strong&gt;&lt;br&gt;期刊：&lt;strong&gt;&lt;a href=&quot;http://science.sciencemag.org/content/350/6258/310.short&quot;&gt;Science&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;摘要&lt;/strong&gt;：最近有研究表明，在洋中脊形成的海底地形（纹理）特征记录了由海平面变化引起的洋脊岩浆供应的快速（23 ky. ~ 100 ky.）波动，因为海平面变化会对洋底之下的地幔熔融产物有一定调节作用。我们利用断裂和岩浆侵位的定量模型证明了：实际上，海底形态的形成过程对于岩浆供应变化，周期小于100 ky. 的强阻尼波动起到了低通滤波作用。我们的研究结果表明，&lt;/p&gt;
    
    </summary>
    
      <category term="学术前沿" scheme="http://yoursite.com/categories/%E5%AD%A6%E6%9C%AF%E5%89%8D%E6%B2%BF/"/>
    
    
      <category term="地球物理" scheme="http://yoursite.com/tags/%E5%9C%B0%E7%90%83%E7%89%A9%E7%90%86/"/>
    
      <category term="地球动力学" scheme="http://yoursite.com/tags/%E5%9C%B0%E7%90%83%E5%8A%A8%E5%8A%9B%E5%AD%A6/"/>
    
      <category term="洋中脊" scheme="http://yoursite.com/tags/%E6%B4%8B%E4%B8%AD%E8%84%8A/"/>
    
  </entry>
  
  <entry>
    <title>如何优雅的整理笔记</title>
    <link href="http://yoursite.com/2016/07/29/2016-07-29-HowWirteNote/"/>
    <id>http://yoursite.com/2016/07/29/2016-07-29-HowWirteNote/</id>
    <published>2016-07-29T19:06:00.000Z</published>
    <updated>2017-03-21T10:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>优雅的版面，支持云同步，支持Latex，支持代码高亮等满足这一系列要求，但又不想折腾个人博客搭载，所以选择了<strong><a href="https://www.yinxiang.com/" target="_blank" rel="external">Evernote</a></strong>配合<strong><a href="https://maxiang.io/" target="_blank" rel="external">马克飞象</a></strong>写笔记。方便自己回忆，也方便分享、讨论，得益于<strong><a href="https://seisman.info/" target="_blank" rel="external">Seisman</a></strong>的博客，以后有机会也会给自己搭建一个个人博客把整理的笔记都挂上去。 </p>
</blockquote>
<a id="more"></a>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><blockquote>
<p>Markdown 是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档，然后转换成格式丰富的HTML页面。    —— <a href="https://zh.wikipedia.org/wiki/Markdown" target="_blank" rel="external">维基百科</a></p>
</blockquote>
<h3 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&gt;Markdown 是一种轻量级标记语言，它允许人们使用易读易写的纯文本格式编写文档，然后转换成格式丰富的HTML页面。    —— [<span class="string">维基百科</span>](<span class="link">https://zh.wikipedia.org/wiki/Markdown</span>)</div></pre></td></tr></table></figure>
<h2 id="LaTeX-公式"><a href="#LaTeX-公式" class="headerlink" title="$\LaTeX{}$ 公式"></a>$\LaTeX{}$ 公式</h2><p>行内公式$y=x^2$，块级公式：<br>$$<br>\vartriangle g(k) = 2\pi G(\rho_c-\rho_w)e^{-kd}\sum_{n=1}^\infty \dfrac{k^{n-1}}{n!}\Im{h^n(x)}<br>$$</p>
<h3 id="源码-1"><a href="#源码-1" class="headerlink" title="源码"></a>源码</h3><p>使用两个<code>$$</code>将$\LaTeX$公式代码括起来即可，行内公式使用一个<code>$</code><br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$$\vartriangle g(k) = 2\pi G(\rho<span class="emphasis">_c-\rho w) e^&#123;-kd&#125; \sum_</span>&#123;n=1&#125;^&#123;\infty&#125; \dfrac&#123;k^&#123;n-1&#125;&#125;&#123;n!&#125;\Im\&#123;h^n(x)\&#125;$$</div></pre></td></tr></table></figure></p>
<h2 id="图片-标题"><a href="#图片-标题" class="headerlink" title="图片+标题"></a>图片+标题</h2><p><img src="/uploads/PrattModel.png" alt="Pratt模型 | center|600x0"></p>
<h2 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"><span class="string">"""</span></div><div class="line">--------简单挠曲模型重力异常导纳曲线：P181，fig5.7，eq5.13</div><div class="line">--------郭志馗，2016/7/19，杭州</div><div class="line">--------参考文献：A. B. Watts，2001</div><div class="line">--------------------修改说明------------------------------------</div><div class="line">1. 量纲：s^-2=10^8 mGal km^-1</div><div class="line">----------------------------------------------------------------</div><div class="line"></div><div class="line">"""</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">from</span> matplotlib.font_manager <span class="keyword">import</span> fontManager</div><div class="line"><span class="keyword">from</span> matplotlib.font_manager <span class="keyword">import</span> FontProperties</div><div class="line"><span class="keyword">from</span> os <span class="keyword">import</span> path</div><div class="line"><span class="keyword">from</span> matplotlib.ticker <span class="keyword">import</span>  MultipleLocator</div><div class="line"><span class="keyword">from</span> matplotlib.ticker <span class="keyword">import</span>  FormatStrFormatter</div><div class="line"></div><div class="line"><span class="comment">#配置字典设置</span></div><div class="line"><span class="comment">#	print path.abspath(matplotlib.matplotlib_fname())	#当前使用的配置文件</span></div><div class="line">matplotlib.rcParams[<span class="string">"figure.autolayout"</span>]=<span class="string">"TRUE"</span>	<span class="comment">#图片边距</span></div><div class="line">matplotlib.rcParams[<span class="string">"font.family"</span>]=<span class="string">"Times New Roman"</span></div><div class="line">matplotlib.rcParams[<span class="string">"text.color"</span>]=<span class="string">"black"</span></div><div class="line">matplotlib.rcParams[<span class="string">"axes.linewidth"</span>]=<span class="string">"2"</span>				<span class="comment">#坐标轴线宽</span></div><div class="line">matplotlib.rcParams[<span class="string">"font.size"</span>]=<span class="string">"16"</span></div><div class="line">matplotlib.rcParams[<span class="string">"xtick.major.size"</span>]=<span class="number">10</span>				<span class="comment">#xtick设置</span></div><div class="line">matplotlib.rcParams[<span class="string">"xtick.minor.size"</span>]=<span class="number">5</span></div><div class="line">matplotlib.rcParams[<span class="string">"xtick.major.width"</span>]=<span class="number">2</span></div><div class="line">matplotlib.rcParams[<span class="string">"xtick.minor.width"</span>]=<span class="number">1</span></div><div class="line">matplotlib.rcParams[<span class="string">"ytick.major.size"</span>]=<span class="number">10</span>				<span class="comment">#ytick设置</span></div><div class="line">matplotlib.rcParams[<span class="string">"ytick.minor.size"</span>]=<span class="number">5</span></div><div class="line">matplotlib.rcParams[<span class="string">"ytick.major.width"</span>]=<span class="number">2</span></div><div class="line">matplotlib.rcParams[<span class="string">"ytick.minor.width"</span>]=<span class="number">1</span></div><div class="line">matplotlib.rcParams[<span class="string">"lines.linewidth"</span>]=<span class="number">3</span>				<span class="comment">#设置线条</span></div><div class="line">matplotlib.rcParams[<span class="string">"mathtext.default"</span>]=<span class="string">"regular"</span>		<span class="comment">#公式字体:tt, it, rm, cal, sf, bf or default/regular (non-math)</span></div><div class="line"><span class="comment">#------------------------下面正式绘图----------------------------</span></div><div class="line"><span class="comment">#参数</span></div><div class="line">G=<span class="number">6.67</span>*<span class="number">10</span>**<span class="number">-11</span>			<span class="comment">#m3 kg-1 s-2</span></div><div class="line">den_c=<span class="number">2800</span>				<span class="comment">#kg/m3</span></div><div class="line">den_2=<span class="number">2800</span></div><div class="line">den_3=<span class="number">2800</span></div><div class="line">den_m=<span class="number">3350</span></div><div class="line">den_w=<span class="number">1030</span>				<span class="comment">#kg/m3	</span></div><div class="line">d=<span class="number">4.500</span>					<span class="comment">#km</span></div><div class="line">t=<span class="number">7.1</span></div><div class="line">Te=<span class="number">5</span>					<span class="comment">#km</span></div><div class="line">E=<span class="number">10</span>**<span class="number">11</span>				<span class="comment">#N m^-2</span></div><div class="line">v=<span class="number">0.25</span></div><div class="line">g=<span class="number">9.8</span>					<span class="comment">#m s^-2</span></div><div class="line"><span class="comment">#函数</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_func_Zk</span><span class="params">(den_c,d,k,t)</span>:</span>								<span class="comment">#非均衡地形的重力异常导纳</span></div><div class="line">	Zk=<span class="number">2</span>*np.pi*G*(den_c-den_w)*np.exp(-k*d)*<span class="number">10</span>**<span class="number">8</span></div><div class="line">	<span class="keyword">return</span> Zk</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_func_ZK_Airy</span><span class="params">(t,k,d)</span>:</span>									<span class="comment">#Airy模型的重力异常导纳</span></div><div class="line">	Zk=<span class="number">2</span>*np.pi*G*(den_c-den_w)*np.exp(-k*d)*(<span class="number">1</span>-np.exp(-k*t))*<span class="number">10</span>**<span class="number">8</span></div><div class="line">	<span class="keyword">return</span> Zk</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_func_ZK_Airy_hidden</span><span class="params">(t,k,d,den_2)</span>:</span>									<span class="comment">#Airy模型的重力异常导纳</span></div><div class="line">	Zk=<span class="number">2</span>*np.pi*G*(den_2-den_w)*np.exp(-k*d)*(<span class="number">1</span>-np.exp(-k*t))*<span class="number">10</span>**<span class="number">8</span></div><div class="line">	<span class="keyword">return</span> Zk</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_func_t</span><span class="params">(Tc,d,den_2,den_3)</span>:</span></div><div class="line">	t=Tc-d*((den_m-den_w)/(den_m-den_c))</div><div class="line">	<span class="comment">#t=Tc-d*((den_2-den_w)/(den_m-den_3))</span></div><div class="line">	<span class="keyword">return</span> t</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_func_D</span><span class="params">(Te)</span>:</span></div><div class="line">	D=E*Te**<span class="number">3</span>/<span class="number">12.0</span>/(<span class="number">1</span>-v**<span class="number">2</span>)</div><div class="line">	<span class="keyword">return</span> D</div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_func_zk_flex</span><span class="params">(Te,k,g,d,t)</span>:</span></div><div class="line">	D=_func_D(Te)</div><div class="line">	phi_ekp=<span class="number">1.0</span>/(D*k**<span class="number">4</span>/(den_m-den_c)/g*<span class="number">10</span>**<span class="number">-3</span>+<span class="number">1</span>)</div><div class="line">	Zk_flex=<span class="number">2</span>*np.pi*G*(den_c-den_w)*np.exp(-k*d)*(<span class="number">1</span>-phi_ekp*np.exp(-k*t))</div><div class="line">	<span class="keyword">return</span> Zk_flex*<span class="number">10</span>**<span class="number">8</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_func_zk_pratt</span><span class="params">(k,Dcp)</span>:</span></div><div class="line">	zk_pratt=<span class="number">2</span>*np.pi*G*(den_c-den_w)*np.exp(-k*d)*(<span class="number">1</span>-np.exp(-k*Dcp))</div><div class="line">	<span class="keyword">return</span> zk_pratt*<span class="number">10</span>**<span class="number">8</span></div><div class="line"><span class="comment">#1. 图片基本设置：大小，字体等</span></div><div class="line">plt.figure(figsize=(<span class="number">9</span>,<span class="number">6</span>))</div><div class="line"></div><div class="line">k=np.linspace(<span class="number">0.0001</span>,<span class="number">0.25</span>,<span class="number">500</span>)</div><div class="line"><span class="comment">#计算挠曲模型</span></div><div class="line">Te=<span class="number">5</span></div><div class="line">zk_flex1=_func_zk_flex(Te,k,g,d,t)</div><div class="line">plt.plot(k,zk_flex1)</div><div class="line">plt.text(<span class="number">0.03</span>,_func_zk_flex(Te,<span class="number">0.03</span>,g,d,t)+<span class="number">23</span>,<span class="string">"Flexure ($T_&#123;e&#125;\ =$"</span>+str(Te)+<span class="string">" km)"</span>,ha=<span class="string">"left"</span>,va=<span class="string">"top"</span>,rotation=<span class="number">60</span>)</div><div class="line">Te=<span class="number">25</span></div><div class="line">zk_flex1=_func_zk_flex(Te,k,g,d,t)</div><div class="line">plt.plot(k,zk_flex1)</div><div class="line">plt.text(<span class="number">0.012</span>,_func_zk_flex(Te,<span class="number">0.012</span>,g,d,t)+<span class="number">20</span>,<span class="string">"Flexure ($T_&#123;e&#125;\ =$"</span>+str(Te)+<span class="string">" km)"</span>,ha=<span class="string">"left"</span>,va=<span class="string">"top"</span>,rotation=<span class="number">83</span>)</div><div class="line"><span class="comment">#计算Airy模型</span></div><div class="line">zk_airy=_func_ZK_Airy(t,k,d)</div><div class="line">line_airy,=plt.plot(k,zk_airy)</div><div class="line">dashes = [<span class="number">8</span>, <span class="number">3</span>, <span class="number">30</span>, <span class="number">3</span>]  <span class="comment"># 10 points on, 5 off, 100 on, 5 off</span></div><div class="line">line_airy.set_dashes(dashes)</div><div class="line">plt.text(<span class="number">0.125</span>,_func_ZK_Airy(t,<span class="number">0.125</span>,d)<span class="number">-2</span>,<span class="string">"Airy (t = "</span>+str(t)+<span class="string">" km)"</span>,ha=<span class="string">"left"</span>,va=<span class="string">"top"</span>,rotation=<span class="number">-3</span>)</div><div class="line"><span class="comment">#添加Pratt模型</span></div><div class="line">Dcp=<span class="number">113.2</span></div><div class="line">zk_pratt=_func_zk_pratt(k,Dcp)</div><div class="line">plt.plot(k,zk_pratt,<span class="string">":"</span>)</div><div class="line">plt.annotate(<span class="string">"Pratt ($D_&#123;c&#125;^&#123;\\textasciiacute&#125;$ = "</span>+str(Dcp)+<span class="string">"km)"</span>, xy=(<span class="number">0.015</span>, _func_zk_pratt(<span class="number">0.015</span>,Dcp)),</div><div class="line">                xytext=(<span class="number">0.05</span>, <span class="number">74</span>),</div><div class="line">				va=<span class="string">"center"</span>,</div><div class="line">				ha=<span class="string">"left"</span>,</div><div class="line">                bbox=dict(boxstyle=<span class="string">"round"</span>, fc=(<span class="number">1.</span>, <span class="number">0.8</span>, <span class="number">0.8</span>),ec=<span class="string">"none"</span>),</div><div class="line">                arrowprops=dict(arrowstyle=<span class="string">"fancy"</span>,</div><div class="line">                                fc=(<span class="number">1.</span>, <span class="number">0.8</span>, <span class="number">0.8</span>), ec=<span class="string">"none"</span>,</div><div class="line">                                <span class="comment">#patchB=el,</span></div><div class="line">                                connectionstyle=<span class="string">"arc3,rad=0.4"</span>),</div><div class="line">                )</div><div class="line"><span class="comment">#添加一个非均衡地形的重力异常导纳</span></div><div class="line">plt.plot(k,_func_Zk(den_c,d,k,t),<span class="string">'k--'</span>)</div><div class="line">plt.text(<span class="number">0.14</span>,_func_Zk(den_c,d,<span class="number">0.14</span>,t)<span class="number">-2</span>,<span class="string">"Uncompensated: t = "</span>+str(t)+<span class="string">" km"</span>,ha=<span class="string">"left"</span>,va=<span class="string">"center"</span>,rotation=<span class="number">-17</span>)</div><div class="line"><span class="comment">#label</span></div><div class="line">plt.ylabel(<span class="string">"Admittance $Z(k)(mGal\ km^&#123;-1&#125;)$"</span>)</div><div class="line">plt.xlabel(<span class="string">"Wavenumber k ($km^&#123;-1&#125;$)"</span>)</div><div class="line">plt.text(<span class="number">0.18</span>,<span class="number">73</span>,<span class="string">"d = "</span>+str(d)+<span class="string">" km\nt = "</span>+str(t)+<span class="string">" km\n$\\rho_&#123;c&#125;\ =\ "</span>+str(den_c)+<span class="string">"\ kg/m^3$\n$\\rho_&#123;m&#125;$ = "</span>+str(den_m)+<span class="string">"\n$\\rho_&#123;w&#125;$ = "</span>+str(den_w),ha=<span class="string">"left"</span>,va=<span class="string">"top"</span>)</div><div class="line"></div><div class="line"><span class="comment">#设置另一个x轴</span></div><div class="line">xaxis_wavelength=plt.twiny()</div><div class="line">xaxis_wavelength.set_xlabel(<span class="string">u"波长(km)"</span>,fontdict=&#123;<span class="string">"family"</span>: <span class="string">"STKaiti"</span>&#125;)</div><div class="line">xaxis_wavelength.set_xlim(k[<span class="number">0</span>],k[len(k)<span class="number">-1</span>])</div><div class="line">labels=[<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">1000</span>]</div><div class="line">labels_x=[]</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>,len(labels)):</div><div class="line">	labels_x.append(np.pi*<span class="number">2.0</span>/labels[i])</div><div class="line">plt.xticks(labels_x,labels)</div><div class="line"><span class="comment">#设置</span></div><div class="line"><span class="comment"># plt.show()</span></div><div class="line">plt.savefig(<span class="string">u"pdf\\简单挠曲模型重力异常导纳曲线.pdf"</span>)</div><div class="line">plt.savefig(<span class="string">u"png\\简单挠曲模型重力异常导纳曲线.png"</span>,dpi=<span class="number">300</span>)</div></pre></td></tr></table></figure>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><p>看这绘制表格的功能也真是有点无奈，也就绘制个简单的表格还行<br>| 岩石圈参数        |    常用值            |    表示符号    |    单位            |<br>|:——-                |——–                    |                    |                    |<br>|密度                |$2800    $                |    $\rho_c$    |$kg/m^3$    |<br>|样式模量            |$10^{11}$            |    $E$            |    $N/m^2$    |</p>
<h3 id="源码-2"><a href="#源码-2" class="headerlink" title="源码"></a>源码</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">| 岩石圈参数		|	常用值			|	表示符号		|	单位		|</div><div class="line">|:-------		|--------			|				|			|</div><div class="line">|密度			|$2800	$			|	$\rho_c$	|$kg/m^3$	|</div><div class="line">|样式模量			|$10^&#123;11&#125;$			|	$E$			|	$N/m^2$	|</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;优雅的版面，支持云同步，支持Latex，支持代码高亮等满足这一系列要求，但又不想折腾个人博客搭载，所以选择了&lt;strong&gt;&lt;a href=&quot;https://www.yinxiang.com/&quot;&gt;Evernote&lt;/a&gt;&lt;/strong&gt;配合&lt;strong&gt;&lt;a href=&quot;https://maxiang.io/&quot;&gt;马克飞象&lt;/a&gt;&lt;/strong&gt;写笔记。方便自己回忆，也方便分享、讨论，得益于&lt;strong&gt;&lt;a href=&quot;https://seisman.info/&quot;&gt;Seisman&lt;/a&gt;&lt;/strong&gt;的博客，以后有机会也会给自己搭建一个个人博客把整理的笔记都挂上去。 &lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="科研经验" scheme="http://yoursite.com/categories/%E7%A7%91%E7%A0%94%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="马克飞象" scheme="http://yoursite.com/tags/%E9%A9%AC%E5%85%8B%E9%A3%9E%E8%B1%A1/"/>
    
      <category term="Evernote" scheme="http://yoursite.com/tags/Evernote/"/>
    
  </entry>
  
  <entry>
    <title>Sublime Text 3使用技巧之（二：常用插件）</title>
    <link href="http://yoursite.com/2016/07/29/2016-07-29-sublime/"/>
    <id>http://yoursite.com/2016/07/29/2016-07-29-sublime/</id>
    <published>2016-07-29T19:06:00.000Z</published>
    <updated>2017-03-21T09:58:40.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>无插件不神器：陆续添加我喜欢的插件说明。安装插件前期了解参见：<strong>[Sublime Text 3使用技巧之（一：预热）]</strong></p>
</blockquote>
<a id="more"></a>
<h2 id="Python环境配置"><a href="#Python环境配置" class="headerlink" title="Python环境配置"></a>Python环境配置</h2><ul>
<li>安装<strong>SublimeREPL</strong>插件<blockquote>
<p>在package control中输入<code>SublimeREPL</code>安装，安装完成后会显示在菜单中<strong>Tools</strong>→<strong>SublimeREPL</strong>→<strong>Python</strong>，就会将python IDE集成在<strong>ST</strong>中</p>
<h3 id="快捷键设置"><a href="#快捷键设置" class="headerlink" title="快捷键设置"></a>快捷键设置</h3><p>快捷键的作用就是代替每次打开Python用鼠标点击菜单的痛苦。<br>打开Preferences-&gt;Key Bindings-User，复制代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[&#123;<span class="string">"keys"</span>:[<span class="string">"f1"</span>],</div><div class="line"><span class="string">"caption"</span>: <span class="string">"SublimeREPL: Python - RUN current file"</span>,</div><div class="line"><span class="string">"command"</span>: <span class="string">"run_existing_window_command"</span>, <span class="string">"args"</span>:</div><div class="line">&#123;<span class="string">"id"</span>: <span class="string">"repl_python_run"</span>,<span class="string">"file"</span>: <span class="string">"config/Python/Main.sublime-menu"</span>&#125;</div><div class="line">&#125;]</div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h3 id="运行Python脚本"><a href="#运行Python脚本" class="headerlink" title="运行Python脚本"></a>运行Python脚本</h3><p>新建或者打开.py文件，然后直接使用键盘组合：<code>Ctrl + B</code>运行Python代码。</p>
<hr>
<h2 id="运行bat文件（cmd命令）"><a href="#运行bat文件（cmd命令）" class="headerlink" title="运行bat文件（cmd命令）"></a>运行bat文件（cmd命令）</h2><p><strong>Tools</strong> -&gt; <strong>Build System</strong> -&gt; <strong>New Build System…</strong>，在打开的文件中输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	<span class="string">"cmd"</span>: <span class="string">"<span class="variable">$file</span>"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后保存为<strong>cmd.sublime-build</strong>即可，这是<strong>Tools</strong> -&gt; <strong>Build System</strong>菜单中会出现一个<strong>cmd</strong>。打开一个bat文件然后利用组合键：<code>Ctrl + B</code>运行，或许运行前需要选择<strong>Build System</strong>为<strong>cmd</strong></p>
<hr>
<h2 id="配置Git"><a href="#配置Git" class="headerlink" title="配置Git"></a>配置Git</h2><h2 id="Markdown环境配置"><a href="#Markdown环境配置" class="headerlink" title="Markdown环境配置"></a>Markdown环境配置</h2><blockquote>
<p>所需插件：<strong><a href="https://github.com/SublimeText-Markdown/MarkdownEditing" target="_blank" rel="external">MarkdownEditing</a></strong>, <strong><a href="https://github.com/revolunet/sublimetext-markdown-preview" target="_blank" rel="external">MarkdownPreview</a></strong>, <strong><a href="https://github.com/jonschlinkert/sublime-monokai-extended" target="_blank" rel="external">Monokai Extened</a></strong>, <strong><a href="http://theo.im/OmniMarkupPreviewer/" target="_blank" rel="external">OmniMarkupPreviwer</a></strong>, <strong><a href="https://github.com/vkocubinsky/SublimeTableEditor" target="_blank" rel="external">TableEditor</a></strong></p>
</blockquote>
<h3 id="MarkdownEditing"><a href="#MarkdownEditing" class="headerlink" title="MarkdownEditing"></a>MarkdownEditing</h3><p>支持Markdown语法高亮；支持Github Favored Markdown语法，其实没啥用，并不好看。<strong>可以不安装</strong></p>
<h3 id="MarkdownPreview"><a href="#MarkdownPreview" class="headerlink" title="MarkdownPreview"></a>MarkdownPreview</h3><p>按<code>Ctrl + B</code>生成网页HTML，在前面添加<code>[TOC]</code>可以自动生成目录，但是这种方法会在被预览的<code>.md</code>文件所在目录下生成<code>.html</code>文件，这并不是我们想要的，在用hexo推送博客的时候会增大<code>_posts</code>目录体重，<strong>可以不安装</strong></p>
<h3 id="Monokai-Extened"><a href="#Monokai-Extened" class="headerlink" title="Monokai Extened"></a>Monokai Extened</h3><p>这是一个很不错的插件，是Monokai主题的扩展，不仅支持Markdown同时也不会改变其他语言的Monokai主题样式。本人很喜欢Monokai主题。</p>
<h3 id="OmniMarkupPreviwer"><a href="#OmniMarkupPreviwer" class="headerlink" title="OmniMarkupPreviwer"></a>OmniMarkupPreviwer</h3><p>此插件是本人推荐使用的，可以在浏览器中实时预览Markdown，因为我一般使用三屏工作，体验还不错。在<strong><a href="http://gmt.soest.hawaii.edu/" target="_blank" rel="external">gmt</a></strong>和<strong><a href="http://matplotlib.org/" target="_blank" rel="external">python</a></strong>做图的时候我也是用这种一边写代码一遍开着<strong><a href="http://www.sumatrapdfreader.org/free-pdf-reader.html" target="_blank" rel="external">SumatraPdf</a></strong>进行pdf预览。<br>快捷键：<code>Ctrl + Alt + O</code></p>
<ul>
<li>支持Latex公式<blockquote>
<p>在OmniMarkupPreviewer的设置中(<code>C:\Users\zhiku\AppData\Roaming\Sublime Text 3\Packages\OmniMarkupPreviewer\OmniMarkupPreviewer.sublime-settings</code>)将mathjax_enabled设置为:<code>True</code>，之后MathJax会在后端自动下载；如果下载网速比较慢，可以手动<a href="https://github.com/downloads/timonwong/OmniMarkupPreviewer/mathjax.zip" target="_blank" rel="external">下载</a>，然后解压到：<code>C:\Users\zhiku\AppData\Roaming\Sublime Text 3\Packages\OmniMarkupPreviewer\public</code>，之后在<code>C:\Users\zhiku\AppData\Roaming\Sublime Text 3\Packages\OmniMarkupPreviewer</code>中创建一个空的文件：<code>MATHJAX.DOWNLOADED</code>即可。更多设置可参考<a href="http://blog.leanote.com/post/54bfa17b8404f03097000000" target="_blank" rel="external">MacPlay</a>博文。</p>
</blockquote>
</li>
</ul>
<h3 id="TableEditor"><a href="#TableEditor" class="headerlink" title="TableEditor"></a>TableEditor</h3><p>这个插件也是推荐的，因为Markdown写表格确实有点无奈，这个插件可以有一定帮助，用<code>Tab</code>键可以自动完成对齐。使用之前，需要使用<code>Ctrl + shift + P</code>打开功能：<strong>Table Editor: Enable for current syntax or Table Editor: Enable for current view or “Table Editor: Set table syntax … for current view”</strong>。</p>
<h2 id="小记"><a href="#小记" class="headerlink" title="小记"></a>小记</h2><ul>
<li>卸载插件：<code>Ctrl + Shift + P</code>-&gt;<code>remove</code>-&gt;输入需要卸载的插件名</li>
<li>插件安装路径：<code>C:\Users\zhiku\AppData\Roaming\Sublime Text 3\Packages</code></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;无插件不神器：陆续添加我喜欢的插件说明。安装插件前期了解参见：&lt;strong&gt;[Sublime Text 3使用技巧之（一：预热）]&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="科研经验" scheme="http://yoursite.com/categories/%E7%A7%91%E7%A0%94%E7%BB%8F%E9%AA%8C/"/>
    
    
      <category term="SublimeText" scheme="http://yoursite.com/tags/SublimeText/"/>
    
  </entry>
  
</feed>
